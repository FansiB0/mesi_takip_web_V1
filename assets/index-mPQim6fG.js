(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var iy={exports:{}},au={},ay={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oa=Symbol.for("react.element"),L1=Symbol.for("react.portal"),F1=Symbol.for("react.fragment"),U1=Symbol.for("react.strict_mode"),z1=Symbol.for("react.profiler"),B1=Symbol.for("react.provider"),$1=Symbol.for("react.context"),H1=Symbol.for("react.forward_ref"),q1=Symbol.for("react.suspense"),W1=Symbol.for("react.memo"),G1=Symbol.for("react.lazy"),gp=Symbol.iterator;function K1(t){return t===null||typeof t!="object"?null:(t=gp&&t[gp]||t["@@iterator"],typeof t=="function"?t:null)}var oy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ly=Object.assign,uy={};function ai(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||oy}ai.prototype.isReactComponent={};ai.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ai.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cy(){}cy.prototype=ai.prototype;function bh(t,e,n){this.props=t,this.context=e,this.refs=uy,this.updater=n||oy}var Ih=bh.prototype=new cy;Ih.constructor=bh;ly(Ih,ai.prototype);Ih.isPureReactComponent=!0;var yp=Array.isArray,dy=Object.prototype.hasOwnProperty,Sh={current:null},hy={key:!0,ref:!0,__self:!0,__source:!0};function fy(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)dy.call(e,r)&&!hy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Oa,type:t,key:i,ref:a,props:s,_owner:Sh.current}}function Q1(t,e){return{$$typeof:Oa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nh(t){return typeof t=="object"&&t!==null&&t.$$typeof===Oa}function Y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var vp=/\/+/g;function vc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Y1(""+t.key):e.toString(36)}function Wo(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Oa:case L1:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+vc(a,0):r,yp(s)?(n="",t!=null&&(n=t.replace(vp,"$&/")+"/"),Wo(s,e,n,"",function(d){return d})):s!=null&&(Nh(s)&&(s=Q1(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(vp,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",yp(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+vc(i,l);a+=Wo(i,e,n,c,s)}else if(c=K1(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+vc(i,l++),a+=Wo(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function xo(t,e,n){if(t==null)return t;var r=[],s=0;return Wo(t,r,"","",function(i){return e.call(n,i,s++)}),r}function X1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Go={transition:null},J1={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Go,ReactCurrentOwner:Sh};function my(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:xo,forEach:function(t,e,n){xo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xo(t,function(){e++}),e},toArray:function(t){return xo(t,function(e){return e})||[]},only:function(t){if(!Nh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=ai;te.Fragment=F1;te.Profiler=z1;te.PureComponent=bh;te.StrictMode=U1;te.Suspense=q1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J1;te.act=my;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ly({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Sh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)dy.call(e,c)&&!hy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Oa,type:t.type,key:s,ref:i,props:r,_owner:a}};te.createContext=function(t){return t={$$typeof:$1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:B1,_context:t},t.Consumer=t};te.createElement=fy;te.createFactory=function(t){var e=fy.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:H1,render:t}};te.isValidElement=Nh;te.lazy=function(t){return{$$typeof:G1,_payload:{_status:-1,_result:t},_init:X1}};te.memo=function(t,e){return{$$typeof:W1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Go.transition;Go.transition={};try{t()}finally{Go.transition=e}};te.unstable_act=my;te.useCallback=function(t,e){return pt.current.useCallback(t,e)};te.useContext=function(t){return pt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};te.useEffect=function(t,e){return pt.current.useEffect(t,e)};te.useId=function(){return pt.current.useId()};te.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return pt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};te.useRef=function(t){return pt.current.useRef(t)};te.useState=function(t){return pt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return pt.current.useTransition()};te.version="18.3.1";ay.exports=te;var q=ay.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z1=q,eE=Symbol.for("react.element"),tE=Symbol.for("react.fragment"),nE=Object.prototype.hasOwnProperty,rE=Z1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sE={key:!0,ref:!0,__self:!0,__source:!0};function py(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)nE.call(e,r)&&!sE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:eE,type:t,key:i,ref:a,props:s,_owner:rE.current}}au.Fragment=tE;au.jsx=py;au.jsxs=py;iy.exports=au;var u=iy.exports,gy={exports:{}},Rt={},yy={exports:{}},vy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var K=z.length;z.push(G);e:for(;0<K;){var ve=K-1>>>1,de=z[ve];if(0<s(de,G))z[ve]=G,z[K]=de,K=ve;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],K=z.pop();if(K!==G){z[0]=K;e:for(var ve=0,de=z.length,ie=de>>>1;ve<ie;){var Re=2*(ve+1)-1,Dt=z[Re],_n=Re+1,xn=z[_n];if(0>s(Dt,K))_n<de&&0>s(xn,Dt)?(z[ve]=xn,z[_n]=K,ve=_n):(z[ve]=Dt,z[Re]=K,ve=Re);else if(_n<de&&0>s(xn,K))z[ve]=xn,z[_n]=K,ve=_n;else break e}}return G}function s(z,G){var K=z.sortIndex-G.sortIndex;return K!==0?K:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],m=1,v=null,g=3,T=!1,N=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=z)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function P(z){if(R=!1,S(z),!N)if(n(c)!==null)N=!0,Se(D);else{var G=n(d);G!==null&&yt(P,G.startTime-z)}}function D(z,G){N=!1,R&&(R=!1,w(p),p=-1),T=!0;var K=g;try{for(S(G),v=n(c);v!==null&&(!(v.expirationTime>G)||z&&!I());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,g=v.priorityLevel;var de=ve(v.expirationTime<=G);G=t.unstable_now(),typeof de=="function"?v.callback=de:v===n(c)&&r(c),S(G)}else r(c);v=n(c)}if(v!==null)var ie=!0;else{var Re=n(d);Re!==null&&yt(P,Re.startTime-G),ie=!1}return ie}finally{v=null,g=K,T=!1}}var V=!1,x=null,p=-1,y=5,k=-1;function I(){return!(t.unstable_now()-k<y)}function A(){if(x!==null){var z=t.unstable_now();k=z;var G=!0;try{G=x(!0,z)}finally{G?b():(V=!1,x=null)}}else V=!1}var b;if(typeof E=="function")b=function(){E(A)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ue=me.port2;me.port1.onmessage=A,b=function(){ue.postMessage(null)}}else b=function(){O(A,0)};function Se(z){x=z,V||(V=!0,b())}function yt(z,G){p=O(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){N||T||(N=!0,Se(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var K=g;g=G;try{return z()}finally{g=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=g;g=z;try{return G()}finally{g=K}},t.unstable_scheduleCallback=function(z,G,K){var ve=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ve+K:ve):K=ve,z){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=K+de,z={id:m++,callback:G,priorityLevel:z,startTime:K,expirationTime:de,sortIndex:-1},K>ve?(z.sortIndex=K,e(d,z),n(c)===null&&z===n(d)&&(R?(w(p),p=-1):R=!0,yt(P,K-ve))):(z.sortIndex=de,e(c,z),N||T||(N=!0,Se(D))),z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(z){var G=g;return function(){var K=g;g=G;try{return z.apply(this,arguments)}finally{g=K}}}})(vy);yy.exports=vy;var iE=yy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aE=q,Ct=iE;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _y=new Set,ca={};function is(t,e){qs(t,e),qs(t+"Capture",e)}function qs(t,e){for(ca[t]=e,t=0;t<e.length;t++)_y.add(e[t])}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sd=Object.prototype.hasOwnProperty,oE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_p={},xp={};function lE(t){return sd.call(xp,t)?!0:sd.call(_p,t)?!1:oE.test(t)?xp[t]=!0:(_p[t]=!0,!1)}function uE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cE(t,e,n,r){if(e===null||typeof e>"u"||uE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function gt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new gt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new gt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new gt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new gt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new gt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new gt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new gt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new gt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new gt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ah=/[\-:]([a-z])/g;function Ch(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ah,Ch);Xe[e]=new gt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ah,Ch);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ah,Ch);Xe[e]=new gt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new gt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new gt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rh(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cE(e,n,s,r)&&(n=null),r||s===null?lE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var zn=aE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wo=Symbol.for("react.element"),ws=Symbol.for("react.portal"),Es=Symbol.for("react.fragment"),Ph=Symbol.for("react.strict_mode"),id=Symbol.for("react.profiler"),xy=Symbol.for("react.provider"),wy=Symbol.for("react.context"),Dh=Symbol.for("react.forward_ref"),ad=Symbol.for("react.suspense"),od=Symbol.for("react.suspense_list"),jh=Symbol.for("react.memo"),Kn=Symbol.for("react.lazy"),Ey=Symbol.for("react.offscreen"),wp=Symbol.iterator;function Ri(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,_c;function Fi(t){if(_c===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_c=e&&e[1]||""}return`
`+_c+t}var xc=!1;function wc(t,e){if(!t||xc)return"";xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{xc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fi(t):""}function dE(t){switch(t.tag){case 5:return Fi(t.type);case 16:return Fi("Lazy");case 13:return Fi("Suspense");case 19:return Fi("SuspenseList");case 0:case 2:case 15:return t=wc(t.type,!1),t;case 11:return t=wc(t.type.render,!1),t;case 1:return t=wc(t.type,!0),t;default:return""}}function ld(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Es:return"Fragment";case ws:return"Portal";case id:return"Profiler";case Ph:return"StrictMode";case ad:return"Suspense";case od:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wy:return(t.displayName||"Context")+".Consumer";case xy:return(t._context.displayName||"Context")+".Provider";case Dh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jh:return e=t.displayName||null,e!==null?e:ld(t.type)||"Memo";case Kn:e=t._payload,t=t._init;try{return ld(t(e))}catch{}}return null}function hE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ld(e);case 8:return e===Ph?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function vr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ky(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fE(t){var e=ky(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Eo(t){t._valueTracker||(t._valueTracker=fE(t))}function Ty(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=ky(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ml(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ud(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Ep(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=vr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function by(t,e){e=e.checked,e!=null&&Rh(t,"checked",e,!1)}function cd(t,e){by(t,e);var n=vr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&dd(t,e.type,vr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dd(t,e,n){(e!=="number"||ml(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ui=Array.isArray;function js(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+vr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ui(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:vr(n)}}function Iy(t,e){var n=vr(e.value),r=vr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function bp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ko,Ny=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ko=ko||document.createElement("div"),ko.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ko.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function da(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Qi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mE=["Webkit","ms","Moz","O"];Object.keys(Qi).forEach(function(t){mE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Qi[e]=Qi[t]})});function Ay(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Qi.hasOwnProperty(t)&&Qi[t]?(""+e).trim():e+"px"}function Cy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Ay(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var pE=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function md(t,e){if(e){if(pE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function pd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gd=null;function Vh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var yd=null,Vs=null,Ms=null;function Ip(t){if(t=Ua(t)){if(typeof yd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=du(e),yd(t.stateNode,t.type,e))}}function Ry(t){Vs?Ms?Ms.push(t):Ms=[t]:Vs=t}function Py(){if(Vs){var t=Vs,e=Ms;if(Ms=Vs=null,Ip(t),e)for(t=0;t<e.length;t++)Ip(e[t])}}function Dy(t,e){return t(e)}function jy(){}var Ec=!1;function Vy(t,e,n){if(Ec)return t(e,n);Ec=!0;try{return Dy(t,e,n)}finally{Ec=!1,(Vs!==null||Ms!==null)&&(jy(),Py())}}function ha(t,e){var n=t.stateNode;if(n===null)return null;var r=du(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var vd=!1;if(Dn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){vd=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{vd=!1}function gE(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Yi=!1,pl=null,gl=!1,_d=null,yE={onError:function(t){Yi=!0,pl=t}};function vE(t,e,n,r,s,i,a,l,c){Yi=!1,pl=null,gE.apply(yE,arguments)}function _E(t,e,n,r,s,i,a,l,c){if(vE.apply(this,arguments),Yi){if(Yi){var d=pl;Yi=!1,pl=null}else throw Error(F(198));gl||(gl=!0,_d=d)}}function as(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function My(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sp(t){if(as(t)!==t)throw Error(F(188))}function xE(t){var e=t.alternate;if(!e){if(e=as(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Sp(s),t;if(i===r)return Sp(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Oy(t){return t=xE(t),t!==null?Ly(t):null}function Ly(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Ly(t);if(e!==null)return e;t=t.sibling}return null}var Fy=Ct.unstable_scheduleCallback,Np=Ct.unstable_cancelCallback,wE=Ct.unstable_shouldYield,EE=Ct.unstable_requestPaint,De=Ct.unstable_now,kE=Ct.unstable_getCurrentPriorityLevel,Mh=Ct.unstable_ImmediatePriority,Uy=Ct.unstable_UserBlockingPriority,yl=Ct.unstable_NormalPriority,TE=Ct.unstable_LowPriority,zy=Ct.unstable_IdlePriority,ou=null,un=null;function bE(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(ou,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:NE,IE=Math.log,SE=Math.LN2;function NE(t){return t>>>=0,t===0?32:31-(IE(t)/SE|0)|0}var To=64,bo=4194304;function zi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=zi(l):(i&=a,i!==0&&(r=zi(i)))}else a=n&~s,a!==0?r=zi(a):i!==0&&(r=zi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),s=1<<n,r|=t[n],e&=~s;return r}function AE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Yt(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=AE(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function xd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function By(){var t=To;return To<<=1,!(To&4194240)&&(To=64),t}function kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function La(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function RE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Oh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function $y(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hy,Lh,qy,Wy,Gy,wd=!1,Io=[],ir=null,ar=null,or=null,fa=new Map,ma=new Map,Yn=[],PE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ap(t,e){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":ar=null;break;case"mouseover":case"mouseout":or=null;break;case"pointerover":case"pointerout":fa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ma.delete(e.pointerId)}}function Di(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ua(e),e!==null&&Lh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DE(t,e,n,r,s){switch(e){case"focusin":return ir=Di(ir,t,e,n,r,s),!0;case"dragenter":return ar=Di(ar,t,e,n,r,s),!0;case"mouseover":return or=Di(or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return fa.set(i,Di(fa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ma.set(i,Di(ma.get(i)||null,t,e,n,r,s)),!0}return!1}function Ky(t){var e=Ur(t.target);if(e!==null){var n=as(e);if(n!==null){if(e=n.tag,e===13){if(e=My(n),e!==null){t.blockedOn=e,Gy(t.priority,function(){qy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ko(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ed(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gd=r,n.target.dispatchEvent(r),gd=null}else return e=Ua(n),e!==null&&Lh(e),t.blockedOn=n,!1;e.shift()}return!0}function Cp(t,e,n){Ko(t)&&n.delete(e)}function jE(){wd=!1,ir!==null&&Ko(ir)&&(ir=null),ar!==null&&Ko(ar)&&(ar=null),or!==null&&Ko(or)&&(or=null),fa.forEach(Cp),ma.forEach(Cp)}function ji(t,e){t.blockedOn===e&&(t.blockedOn=null,wd||(wd=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,jE)))}function pa(t){function e(s){return ji(s,t)}if(0<Io.length){ji(Io[0],t);for(var n=1;n<Io.length;n++){var r=Io[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ir!==null&&ji(ir,t),ar!==null&&ji(ar,t),or!==null&&ji(or,t),fa.forEach(e),ma.forEach(e),n=0;n<Yn.length;n++)r=Yn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Yn.length&&(n=Yn[0],n.blockedOn===null);)Ky(n),n.blockedOn===null&&Yn.shift()}var Os=zn.ReactCurrentBatchConfig,_l=!0;function VE(t,e,n,r){var s=he,i=Os.transition;Os.transition=null;try{he=1,Fh(t,e,n,r)}finally{he=s,Os.transition=i}}function ME(t,e,n,r){var s=he,i=Os.transition;Os.transition=null;try{he=4,Fh(t,e,n,r)}finally{he=s,Os.transition=i}}function Fh(t,e,n,r){if(_l){var s=Ed(t,e,n,r);if(s===null)Dc(t,e,r,xl,n),Ap(t,r);else if(DE(s,t,e,n,r))r.stopPropagation();else if(Ap(t,r),e&4&&-1<PE.indexOf(t)){for(;s!==null;){var i=Ua(s);if(i!==null&&Hy(i),i=Ed(t,e,n,r),i===null&&Dc(t,e,r,xl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dc(t,e,r,null,n)}}var xl=null;function Ed(t,e,n,r){if(xl=null,t=Vh(r),t=Ur(t),t!==null)if(e=as(t),e===null)t=null;else if(n=e.tag,n===13){if(t=My(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return xl=t,null}function Qy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kE()){case Mh:return 1;case Uy:return 4;case yl:case TE:return 16;case zy:return 536870912;default:return 16}default:return 16}}var nr=null,Uh=null,Qo=null;function Yy(){if(Qo)return Qo;var t,e=Uh,n=e.length,r,s="value"in nr?nr.value:nr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return Qo=s.slice(t,1<r?1-r:void 0)}function Yo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function So(){return!0}function Rp(){return!1}function Pt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?So:Rp,this.isPropagationStopped=Rp,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=So)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=So)},persist:function(){},isPersistent:So}),e}var oi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zh=Pt(oi),Fa=be({},oi,{view:0,detail:0}),OE=Pt(Fa),Tc,bc,Vi,lu=be({},Fa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vi&&(Vi&&t.type==="mousemove"?(Tc=t.screenX-Vi.screenX,bc=t.screenY-Vi.screenY):bc=Tc=0,Vi=t),Tc)},movementY:function(t){return"movementY"in t?t.movementY:bc}}),Pp=Pt(lu),LE=be({},lu,{dataTransfer:0}),FE=Pt(LE),UE=be({},Fa,{relatedTarget:0}),Ic=Pt(UE),zE=be({},oi,{animationName:0,elapsedTime:0,pseudoElement:0}),BE=Pt(zE),$E=be({},oi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),HE=Pt($E),qE=be({},oi,{data:0}),Dp=Pt(qE),WE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},GE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KE[t])?!!e[t]:!1}function Bh(){return QE}var YE=be({},Fa,{key:function(t){if(t.key){var e=WE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Yo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?GE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bh,charCode:function(t){return t.type==="keypress"?Yo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Yo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XE=Pt(YE),JE=be({},lu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jp=Pt(JE),ZE=be({},Fa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bh}),ek=Pt(ZE),tk=be({},oi,{propertyName:0,elapsedTime:0,pseudoElement:0}),nk=Pt(tk),rk=be({},lu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sk=Pt(rk),ik=[9,13,27,32],$h=Dn&&"CompositionEvent"in window,Xi=null;Dn&&"documentMode"in document&&(Xi=document.documentMode);var ak=Dn&&"TextEvent"in window&&!Xi,Xy=Dn&&(!$h||Xi&&8<Xi&&11>=Xi),Vp=" ",Mp=!1;function Jy(t,e){switch(t){case"keyup":return ik.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ks=!1;function ok(t,e){switch(t){case"compositionend":return Zy(e);case"keypress":return e.which!==32?null:(Mp=!0,Vp);case"textInput":return t=e.data,t===Vp&&Mp?null:t;default:return null}}function lk(t,e){if(ks)return t==="compositionend"||!$h&&Jy(t,e)?(t=Yy(),Qo=Uh=nr=null,ks=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xy&&e.locale!=="ko"?null:e.data;default:return null}}var uk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!uk[t.type]:e==="textarea"}function ev(t,e,n,r){Ry(r),e=wl(e,"onChange"),0<e.length&&(n=new zh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ji=null,ga=null;function ck(t){dv(t,0)}function uu(t){var e=Is(t);if(Ty(e))return t}function dk(t,e){if(t==="change")return e}var tv=!1;if(Dn){var Sc;if(Dn){var Nc="oninput"in document;if(!Nc){var Lp=document.createElement("div");Lp.setAttribute("oninput","return;"),Nc=typeof Lp.oninput=="function"}Sc=Nc}else Sc=!1;tv=Sc&&(!document.documentMode||9<document.documentMode)}function Fp(){Ji&&(Ji.detachEvent("onpropertychange",nv),ga=Ji=null)}function nv(t){if(t.propertyName==="value"&&uu(ga)){var e=[];ev(e,ga,t,Vh(t)),Vy(ck,e)}}function hk(t,e,n){t==="focusin"?(Fp(),Ji=e,ga=n,Ji.attachEvent("onpropertychange",nv)):t==="focusout"&&Fp()}function fk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uu(ga)}function mk(t,e){if(t==="click")return uu(e)}function pk(t,e){if(t==="input"||t==="change")return uu(e)}function gk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:gk;function ya(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!sd.call(e,s)||!Zt(t[s],e[s]))return!1}return!0}function Up(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zp(t,e){var n=Up(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Up(n)}}function rv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function sv(){for(var t=window,e=ml();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ml(t.document)}return e}function Hh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yk(t){var e=sv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rv(n.ownerDocument.documentElement,n)){if(r!==null&&Hh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=zp(n,i);var a=zp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vk=Dn&&"documentMode"in document&&11>=document.documentMode,Ts=null,kd=null,Zi=null,Td=!1;function Bp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Td||Ts==null||Ts!==ml(r)||(r=Ts,"selectionStart"in r&&Hh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zi&&ya(Zi,r)||(Zi=r,r=wl(kd,"onSelect"),0<r.length&&(e=new zh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ts)))}function No(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bs={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Ac={},iv={};Dn&&(iv=document.createElement("div").style,"AnimationEvent"in window||(delete bs.animationend.animation,delete bs.animationiteration.animation,delete bs.animationstart.animation),"TransitionEvent"in window||delete bs.transitionend.transition);function cu(t){if(Ac[t])return Ac[t];if(!bs[t])return t;var e=bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iv)return Ac[t]=e[n];return t}var av=cu("animationend"),ov=cu("animationiteration"),lv=cu("animationstart"),uv=cu("transitionend"),cv=new Map,$p="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(t,e){cv.set(t,e),is(e,[t])}for(var Cc=0;Cc<$p.length;Cc++){var Rc=$p[Cc],_k=Rc.toLowerCase(),xk=Rc[0].toUpperCase()+Rc.slice(1);Ir(_k,"on"+xk)}Ir(av,"onAnimationEnd");Ir(ov,"onAnimationIteration");Ir(lv,"onAnimationStart");Ir("dblclick","onDoubleClick");Ir("focusin","onFocus");Ir("focusout","onBlur");Ir(uv,"onTransitionEnd");qs("onMouseEnter",["mouseout","mouseover"]);qs("onMouseLeave",["mouseout","mouseover"]);qs("onPointerEnter",["pointerout","pointerover"]);qs("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bi));function Hp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,_E(r,e,void 0,t),t.currentTarget=null}function dv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Hp(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Hp(s,l,d),i=c}}}if(gl)throw t=_d,gl=!1,_d=null,t}function xe(t,e){var n=e[Ad];n===void 0&&(n=e[Ad]=new Set);var r=t+"__bubble";n.has(r)||(hv(e,t,2,!1),n.add(r))}function Pc(t,e,n){var r=0;e&&(r|=4),hv(n,t,r,e)}var Ao="_reactListening"+Math.random().toString(36).slice(2);function va(t){if(!t[Ao]){t[Ao]=!0,_y.forEach(function(n){n!=="selectionchange"&&(wk.has(n)||Pc(n,!1,t),Pc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ao]||(e[Ao]=!0,Pc("selectionchange",!1,e))}}function hv(t,e,n,r){switch(Qy(e)){case 1:var s=VE;break;case 4:s=ME;break;default:s=Fh}n=s.bind(null,e,n,t),s=void 0,!vd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Ur(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Vy(function(){var d=i,m=Vh(n),v=[];e:{var g=cv.get(t);if(g!==void 0){var T=zh,N=t;switch(t){case"keypress":if(Yo(n)===0)break e;case"keydown":case"keyup":T=XE;break;case"focusin":N="focus",T=Ic;break;case"focusout":N="blur",T=Ic;break;case"beforeblur":case"afterblur":T=Ic;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Pp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=FE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=ek;break;case av:case ov:case lv:T=BE;break;case uv:T=nk;break;case"scroll":T=OE;break;case"wheel":T=sk;break;case"copy":case"cut":case"paste":T=HE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=jp}var R=(e&4)!==0,O=!R&&t==="scroll",w=R?g!==null?g+"Capture":null:g;R=[];for(var E=d,S;E!==null;){S=E;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,w!==null&&(P=ha(E,w),P!=null&&R.push(_a(E,P,S)))),O)break;E=E.return}0<R.length&&(g=new T(g,N,null,n,m),v.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==gd&&(N=n.relatedTarget||n.fromElement)&&(Ur(N)||N[jn]))break e;if((T||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,T?(N=n.relatedTarget||n.toElement,T=d,N=N?Ur(N):null,N!==null&&(O=as(N),N!==O||N.tag!==5&&N.tag!==6)&&(N=null)):(T=null,N=d),T!==N)){if(R=Pp,P="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(R=jp,P="onPointerLeave",w="onPointerEnter",E="pointer"),O=T==null?g:Is(T),S=N==null?g:Is(N),g=new R(P,E+"leave",T,n,m),g.target=O,g.relatedTarget=S,P=null,Ur(m)===d&&(R=new R(w,E+"enter",N,n,m),R.target=S,R.relatedTarget=O,P=R),O=P,T&&N)t:{for(R=T,w=N,E=0,S=R;S;S=gs(S))E++;for(S=0,P=w;P;P=gs(P))S++;for(;0<E-S;)R=gs(R),E--;for(;0<S-E;)w=gs(w),S--;for(;E--;){if(R===w||w!==null&&R===w.alternate)break t;R=gs(R),w=gs(w)}R=null}else R=null;T!==null&&qp(v,g,T,R,!1),N!==null&&O!==null&&qp(v,O,N,R,!0)}}e:{if(g=d?Is(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var D=dk;else if(Op(g))if(tv)D=pk;else{D=fk;var V=hk}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=mk);if(D&&(D=D(t,d))){ev(v,D,n,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&dd(g,"number",g.value)}switch(V=d?Is(d):window,t){case"focusin":(Op(V)||V.contentEditable==="true")&&(Ts=V,kd=d,Zi=null);break;case"focusout":Zi=kd=Ts=null;break;case"mousedown":Td=!0;break;case"contextmenu":case"mouseup":case"dragend":Td=!1,Bp(v,n,m);break;case"selectionchange":if(vk)break;case"keydown":case"keyup":Bp(v,n,m)}var x;if($h)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else ks?Jy(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(Xy&&n.locale!=="ko"&&(ks||p!=="onCompositionStart"?p==="onCompositionEnd"&&ks&&(x=Yy()):(nr=m,Uh="value"in nr?nr.value:nr.textContent,ks=!0)),V=wl(d,p),0<V.length&&(p=new Dp(p,t,null,n,m),v.push({event:p,listeners:V}),x?p.data=x:(x=Zy(n),x!==null&&(p.data=x)))),(x=ak?ok(t,n):lk(t,n))&&(d=wl(d,"onBeforeInput"),0<d.length&&(m=new Dp("onBeforeInput","beforeinput",null,n,m),v.push({event:m,listeners:d}),m.data=x))}dv(v,e)})}function _a(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ha(t,n),i!=null&&r.unshift(_a(t,i,s)),i=ha(t,e),i!=null&&r.push(_a(t,i,s))),t=t.return}return r}function gs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qp(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=ha(n,i),c!=null&&a.unshift(_a(n,c,l))):s||(c=ha(n,i),c!=null&&a.push(_a(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Ek=/\r\n?/g,kk=/\u0000|\uFFFD/g;function Wp(t){return(typeof t=="string"?t:""+t).replace(Ek,`
`).replace(kk,"")}function Co(t,e,n){if(e=Wp(e),Wp(t)!==e&&n)throw Error(F(425))}function El(){}var bd=null,Id=null;function Sd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Nd=typeof setTimeout=="function"?setTimeout:void 0,Tk=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,bk=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(t){return Gp.resolve(null).then(t).catch(Ik)}:Nd;function Ik(t){setTimeout(function(){throw t})}function jc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),pa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);pa(e)}function lr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Kp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var li=Math.random().toString(36).slice(2),ln="__reactFiber$"+li,xa="__reactProps$"+li,jn="__reactContainer$"+li,Ad="__reactEvents$"+li,Sk="__reactListeners$"+li,Nk="__reactHandles$"+li;function Ur(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Kp(t);t!==null;){if(n=t[ln])return n;t=Kp(t)}return e}t=n,n=t.parentNode}return null}function Ua(t){return t=t[ln]||t[jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Is(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function du(t){return t[xa]||null}var Cd=[],Ss=-1;function Sr(t){return{current:t}}function we(t){0>Ss||(t.current=Cd[Ss],Cd[Ss]=null,Ss--)}function ye(t,e){Ss++,Cd[Ss]=t.current,t.current=e}var _r={},lt=Sr(_r),Et=Sr(!1),Gr=_r;function Ws(t,e){var n=t.type.contextTypes;if(!n)return _r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function kt(t){return t=t.childContextTypes,t!=null}function kl(){we(Et),we(lt)}function Qp(t,e,n){if(lt.current!==_r)throw Error(F(168));ye(lt,e),ye(Et,n)}function fv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,hE(t)||"Unknown",s));return be({},n,r)}function Tl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_r,Gr=lt.current,ye(lt,t),ye(Et,Et.current),!0}function Yp(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=fv(t,e,Gr),r.__reactInternalMemoizedMergedChildContext=t,we(Et),we(lt),ye(lt,t)):we(Et),ye(Et,n)}var Tn=null,hu=!1,Vc=!1;function mv(t){Tn===null?Tn=[t]:Tn.push(t)}function Ak(t){hu=!0,mv(t)}function Nr(){if(!Vc&&Tn!==null){Vc=!0;var t=0,e=he;try{var n=Tn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,hu=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),Fy(Mh,Nr),s}finally{he=e,Vc=!1}}return null}var Ns=[],As=0,bl=null,Il=0,jt=[],Vt=0,Kr=null,bn=1,In="";function Or(t,e){Ns[As++]=Il,Ns[As++]=bl,bl=t,Il=e}function pv(t,e,n){jt[Vt++]=bn,jt[Vt++]=In,jt[Vt++]=Kr,Kr=t;var r=bn;t=In;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,bn=1<<32-Yt(e)+s|n<<s|r,In=i+t}else bn=1<<i|n<<s|r,In=t}function qh(t){t.return!==null&&(Or(t,1),pv(t,1,0))}function Wh(t){for(;t===bl;)bl=Ns[--As],Ns[As]=null,Il=Ns[--As],Ns[As]=null;for(;t===Kr;)Kr=jt[--Vt],jt[Vt]=null,In=jt[--Vt],jt[Vt]=null,bn=jt[--Vt],jt[Vt]=null}var At=null,St=null,Ee=!1,Kt=null;function gv(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Xp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,At=t,St=lr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,At=t,St=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Kr!==null?{id:bn,overflow:In}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,At=t,St=null,!0):!1;default:return!1}}function Rd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pd(t){if(Ee){var e=St;if(e){var n=e;if(!Xp(t,e)){if(Rd(t))throw Error(F(418));e=lr(n.nextSibling);var r=At;e&&Xp(t,e)?gv(r,n):(t.flags=t.flags&-4097|2,Ee=!1,At=t)}}else{if(Rd(t))throw Error(F(418));t.flags=t.flags&-4097|2,Ee=!1,At=t}}}function Jp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;At=t}function Ro(t){if(t!==At)return!1;if(!Ee)return Jp(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Sd(t.type,t.memoizedProps)),e&&(e=St)){if(Rd(t))throw yv(),Error(F(418));for(;e;)gv(t,e),e=lr(e.nextSibling)}if(Jp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){St=lr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}St=null}}else St=At?lr(t.stateNode.nextSibling):null;return!0}function yv(){for(var t=St;t;)t=lr(t.nextSibling)}function Gs(){St=At=null,Ee=!1}function Gh(t){Kt===null?Kt=[t]:Kt.push(t)}var Ck=zn.ReactCurrentBatchConfig;function Mi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Po(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Zp(t){var e=t._init;return e(t._payload)}function vv(t){function e(w,E){if(t){var S=w.deletions;S===null?(w.deletions=[E],w.flags|=16):S.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(w,E){return w=hr(w,E),w.index=0,w.sibling=null,w}function i(w,E,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<E?(w.flags|=2,E):S):(w.flags|=2,E)):(w.flags|=1048576,E)}function a(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,E,S,P){return E===null||E.tag!==6?(E=Bc(S,w.mode,P),E.return=w,E):(E=s(E,S),E.return=w,E)}function c(w,E,S,P){var D=S.type;return D===Es?m(w,E,S.props.children,P,S.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Kn&&Zp(D)===E.type)?(P=s(E,S.props),P.ref=Mi(w,E,S),P.return=w,P):(P=rl(S.type,S.key,S.props,null,w.mode,P),P.ref=Mi(w,E,S),P.return=w,P)}function d(w,E,S,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=$c(S,w.mode,P),E.return=w,E):(E=s(E,S.children||[]),E.return=w,E)}function m(w,E,S,P,D){return E===null||E.tag!==7?(E=qr(S,w.mode,P,D),E.return=w,E):(E=s(E,S),E.return=w,E)}function v(w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Bc(""+E,w.mode,S),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case wo:return S=rl(E.type,E.key,E.props,null,w.mode,S),S.ref=Mi(w,null,E),S.return=w,S;case ws:return E=$c(E,w.mode,S),E.return=w,E;case Kn:var P=E._init;return v(w,P(E._payload),S)}if(Ui(E)||Ri(E))return E=qr(E,w.mode,S,null),E.return=w,E;Po(w,E)}return null}function g(w,E,S,P){var D=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(w,E,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case wo:return S.key===D?c(w,E,S,P):null;case ws:return S.key===D?d(w,E,S,P):null;case Kn:return D=S._init,g(w,E,D(S._payload),P)}if(Ui(S)||Ri(S))return D!==null?null:m(w,E,S,P,null);Po(w,S)}return null}function T(w,E,S,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(S)||null,l(E,w,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case wo:return w=w.get(P.key===null?S:P.key)||null,c(E,w,P,D);case ws:return w=w.get(P.key===null?S:P.key)||null,d(E,w,P,D);case Kn:var V=P._init;return T(w,E,S,V(P._payload),D)}if(Ui(P)||Ri(P))return w=w.get(S)||null,m(E,w,P,D,null);Po(E,P)}return null}function N(w,E,S,P){for(var D=null,V=null,x=E,p=E=0,y=null;x!==null&&p<S.length;p++){x.index>p?(y=x,x=null):y=x.sibling;var k=g(w,x,S[p],P);if(k===null){x===null&&(x=y);break}t&&x&&k.alternate===null&&e(w,x),E=i(k,E,p),V===null?D=k:V.sibling=k,V=k,x=y}if(p===S.length)return n(w,x),Ee&&Or(w,p),D;if(x===null){for(;p<S.length;p++)x=v(w,S[p],P),x!==null&&(E=i(x,E,p),V===null?D=x:V.sibling=x,V=x);return Ee&&Or(w,p),D}for(x=r(w,x);p<S.length;p++)y=T(x,w,p,S[p],P),y!==null&&(t&&y.alternate!==null&&x.delete(y.key===null?p:y.key),E=i(y,E,p),V===null?D=y:V.sibling=y,V=y);return t&&x.forEach(function(I){return e(w,I)}),Ee&&Or(w,p),D}function R(w,E,S,P){var D=Ri(S);if(typeof D!="function")throw Error(F(150));if(S=D.call(S),S==null)throw Error(F(151));for(var V=D=null,x=E,p=E=0,y=null,k=S.next();x!==null&&!k.done;p++,k=S.next()){x.index>p?(y=x,x=null):y=x.sibling;var I=g(w,x,k.value,P);if(I===null){x===null&&(x=y);break}t&&x&&I.alternate===null&&e(w,x),E=i(I,E,p),V===null?D=I:V.sibling=I,V=I,x=y}if(k.done)return n(w,x),Ee&&Or(w,p),D;if(x===null){for(;!k.done;p++,k=S.next())k=v(w,k.value,P),k!==null&&(E=i(k,E,p),V===null?D=k:V.sibling=k,V=k);return Ee&&Or(w,p),D}for(x=r(w,x);!k.done;p++,k=S.next())k=T(x,w,p,k.value,P),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?p:k.key),E=i(k,E,p),V===null?D=k:V.sibling=k,V=k);return t&&x.forEach(function(A){return e(w,A)}),Ee&&Or(w,p),D}function O(w,E,S,P){if(typeof S=="object"&&S!==null&&S.type===Es&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case wo:e:{for(var D=S.key,V=E;V!==null;){if(V.key===D){if(D=S.type,D===Es){if(V.tag===7){n(w,V.sibling),E=s(V,S.props.children),E.return=w,w=E;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Kn&&Zp(D)===V.type){n(w,V.sibling),E=s(V,S.props),E.ref=Mi(w,V,S),E.return=w,w=E;break e}n(w,V);break}else e(w,V);V=V.sibling}S.type===Es?(E=qr(S.props.children,w.mode,P,S.key),E.return=w,w=E):(P=rl(S.type,S.key,S.props,null,w.mode,P),P.ref=Mi(w,E,S),P.return=w,w=P)}return a(w);case ws:e:{for(V=S.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(w,E.sibling),E=s(E,S.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=$c(S,w.mode,P),E.return=w,w=E}return a(w);case Kn:return V=S._init,O(w,E,V(S._payload),P)}if(Ui(S))return N(w,E,S,P);if(Ri(S))return R(w,E,S,P);Po(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(w,E.sibling),E=s(E,S),E.return=w,w=E):(n(w,E),E=Bc(S,w.mode,P),E.return=w,w=E),a(w)):n(w,E)}return O}var Ks=vv(!0),_v=vv(!1),Sl=Sr(null),Nl=null,Cs=null,Kh=null;function Qh(){Kh=Cs=Nl=null}function Yh(t){var e=Sl.current;we(Sl),t._currentValue=e}function Dd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ls(t,e){Nl=t,Kh=Cs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wt=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(Kh!==t)if(t={context:t,memoizedValue:e,next:null},Cs===null){if(Nl===null)throw Error(F(308));Cs=t,Nl.dependencies={lanes:0,firstContext:t}}else Cs=Cs.next=t;return e}var zr=null;function Xh(t){zr===null?zr=[t]:zr.push(t)}function xv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Xh(e)):(n.next=s.next,s.next=n),e.interleaved=n,Vn(t,r)}function Vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Qn=!1;function Jh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function An(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Vn(t,n)}return s=r.interleaved,s===null?(e.next=e,Xh(r)):(e.next=s.next,s.next=e),r.interleaved=e,Vn(t,n)}function Xo(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oh(t,n)}}function eg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Al(t,e,n,r){var s=t.updateQueue;Qn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==a&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var v=s.baseState;a=0,m=d=c=null,l=i;do{var g=l.lane,T=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,R=l;switch(g=e,T=n,R.tag){case 1:if(N=R.payload,typeof N=="function"){v=N.call(T,v,g);break e}v=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=R.payload,g=typeof N=="function"?N.call(T,v,g):N,g==null)break e;v=be({},v,g);break e;case 2:Qn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=T,c=v):m=m.next=T,a|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=v),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Yr|=a,t.lanes=a,t.memoizedState=v}}function tg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var za={},cn=Sr(za),wa=Sr(za),Ea=Sr(za);function Br(t){if(t===za)throw Error(F(174));return t}function Zh(t,e){switch(ye(Ea,e),ye(wa,t),ye(cn,za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fd(e,t)}we(cn),ye(cn,e)}function Qs(){we(cn),we(wa),we(Ea)}function Ev(t){Br(Ea.current);var e=Br(cn.current),n=fd(e,t.type);e!==n&&(ye(wa,t),ye(cn,n))}function ef(t){wa.current===t&&(we(cn),we(wa))}var ke=Sr(0);function Cl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Mc=[];function tf(){for(var t=0;t<Mc.length;t++)Mc[t]._workInProgressVersionPrimary=null;Mc.length=0}var Jo=zn.ReactCurrentDispatcher,Oc=zn.ReactCurrentBatchConfig,Qr=0,Te=null,Fe=null,$e=null,Rl=!1,ea=!1,ka=0,Rk=0;function nt(){throw Error(F(321))}function nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function rf(t,e,n,r,s,i){if(Qr=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jo.current=t===null||t.memoizedState===null?Vk:Mk,t=n(r,s),ea){i=0;do{if(ea=!1,ka=0,25<=i)throw Error(F(301));i+=1,$e=Fe=null,e.updateQueue=null,Jo.current=Ok,t=n(r,s)}while(ea)}if(Jo.current=Pl,e=Fe!==null&&Fe.next!==null,Qr=0,$e=Fe=Te=null,Rl=!1,e)throw Error(F(300));return t}function sf(){var t=ka!==0;return ka=0,t}function an(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Te.memoizedState=$e=t:$e=$e.next=t,$e}function Bt(){if(Fe===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=$e===null?Te.memoizedState:$e.next;if(e!==null)$e=e,Fe=t;else{if(t===null)throw Error(F(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},$e===null?Te.memoizedState=$e=t:$e=$e.next=t}return $e}function Ta(t,e){return typeof e=="function"?e(t):e}function Lc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var m=d.lane;if((Qr&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var v={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=v,a=r):c=c.next=v,Te.lanes|=m,Yr|=m}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,Zt(r,e.memoizedState)||(wt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,Yr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Zt(i,e.memoizedState)||(wt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function kv(){}function Tv(t,e){var n=Te,r=Bt(),s=e(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,wt=!0),r=r.queue,af(Sv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,ba(9,Iv.bind(null,n,r,s,e),void 0,null),He===null)throw Error(F(349));Qr&30||bv(n,e,s)}return s}function bv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iv(t,e,n,r){e.value=n,e.getSnapshot=r,Nv(e)&&Av(t)}function Sv(t,e,n){return n(function(){Nv(e)&&Av(t)})}function Nv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function Av(t){var e=Vn(t,1);e!==null&&Xt(e,t,1,-1)}function ng(t){var e=an();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:t},e.queue=t,t=t.dispatch=jk.bind(null,Te,t),[e.memoizedState,t]}function ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Cv(){return Bt().memoizedState}function Zo(t,e,n,r){var s=an();Te.flags|=t,s.memoizedState=ba(1|e,n,void 0,r===void 0?null:r)}function fu(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var a=Fe.memoizedState;if(i=a.destroy,r!==null&&nf(r,a.deps)){s.memoizedState=ba(e,n,i,r);return}}Te.flags|=t,s.memoizedState=ba(1|e,n,i,r)}function rg(t,e){return Zo(8390656,8,t,e)}function af(t,e){return fu(2048,8,t,e)}function Rv(t,e){return fu(4,2,t,e)}function Pv(t,e){return fu(4,4,t,e)}function Dv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jv(t,e,n){return n=n!=null?n.concat([t]):null,fu(4,4,Dv.bind(null,e,t),n)}function of(){}function Vv(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Mv(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ov(t,e,n){return Qr&21?(Zt(n,e)||(n=By(),Te.lanes|=n,Yr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wt=!0),t.memoizedState=n)}function Pk(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=Oc.transition;Oc.transition={};try{t(!1),e()}finally{he=n,Oc.transition=r}}function Lv(){return Bt().memoizedState}function Dk(t,e,n){var r=dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Fv(t))Uv(e,n);else if(n=xv(t,e,n,r),n!==null){var s=ft();Xt(n,t,r,s),zv(n,e,r)}}function jk(t,e,n){var r=dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fv(t))Uv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,a)){var c=e.interleaved;c===null?(s.next=s,Xh(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=xv(t,e,s,r),n!==null&&(s=ft(),Xt(n,t,r,s),zv(n,e,r))}}function Fv(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function Uv(t,e){ea=Rl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function zv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Oh(t,n)}}var Pl={readContext:zt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},Vk={readContext:zt,useCallback:function(t,e){return an().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:rg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Zo(4194308,4,Dv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Zo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Zo(4,2,t,e)},useMemo:function(t,e){var n=an();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=an();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Dk.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=an();return t={current:t},e.memoizedState=t},useState:ng,useDebugValue:of,useDeferredValue:function(t){return an().memoizedState=t},useTransition:function(){var t=ng(!1),e=t[0];return t=Pk.bind(null,t[1]),an().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=an();if(Ee){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),He===null)throw Error(F(349));Qr&30||bv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,rg(Sv.bind(null,r,i,t),[t]),r.flags|=2048,ba(9,Iv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=an(),e=He.identifierPrefix;if(Ee){var n=In,r=bn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Rk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Mk={readContext:zt,useCallback:Vv,useContext:zt,useEffect:af,useImperativeHandle:jv,useInsertionEffect:Rv,useLayoutEffect:Pv,useMemo:Mv,useReducer:Lc,useRef:Cv,useState:function(){return Lc(Ta)},useDebugValue:of,useDeferredValue:function(t){var e=Bt();return Ov(e,Fe.memoizedState,t)},useTransition:function(){var t=Lc(Ta)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:kv,useSyncExternalStore:Tv,useId:Lv,unstable_isNewReconciler:!1},Ok={readContext:zt,useCallback:Vv,useContext:zt,useEffect:af,useImperativeHandle:jv,useInsertionEffect:Rv,useLayoutEffect:Pv,useMemo:Mv,useReducer:Fc,useRef:Cv,useState:function(){return Fc(Ta)},useDebugValue:of,useDeferredValue:function(t){var e=Bt();return Fe===null?e.memoizedState=t:Ov(e,Fe.memoizedState,t)},useTransition:function(){var t=Fc(Ta)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:kv,useSyncExternalStore:Tv,useId:Lv,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function jd(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var mu={isMounted:function(t){return(t=t._reactInternals)?as(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),s=dr(t),i=An(r,s);i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(Xt(e,t,s,r),Xo(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),s=dr(t),i=An(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=ur(t,i,s),e!==null&&(Xt(e,t,s,r),Xo(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=dr(t),s=An(n,r);s.tag=2,e!=null&&(s.callback=e),e=ur(t,s,r),e!==null&&(Xt(e,t,r,n),Xo(e,t,r))}};function sg(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!ya(n,r)||!ya(s,i):!0}function Bv(t,e,n){var r=!1,s=_r,i=e.contextType;return typeof i=="object"&&i!==null?i=zt(i):(s=kt(e)?Gr:lt.current,r=e.contextTypes,i=(r=r!=null)?Ws(t,s):_r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=mu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ig(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&mu.enqueueReplaceState(e,e.state,null)}function Vd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Jh(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zt(i):(i=kt(e)?Gr:lt.current,s.context=Ws(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(jd(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&mu.enqueueReplaceState(s,s.state,null),Al(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ys(t,e){try{var n="",r=e;do n+=dE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Uc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Md(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lk=typeof WeakMap=="function"?WeakMap:Map;function $v(t,e,n){n=An(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){jl||(jl=!0,Wd=r),Md(t,e)},n}function Hv(t,e,n){n=An(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Md(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Md(t,e),typeof r!="function"&&(cr===null?cr=new Set([this]):cr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function ag(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Jk.bind(null,t,e,n),e.then(t,t))}function og(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=An(-1,1),e.tag=2,ur(n,e,1))),n.lanes|=1),t)}var Fk=zn.ReactCurrentOwner,wt=!1;function ht(t,e,n,r){e.child=t===null?_v(e,null,n,r):Ks(e,t.child,n,r)}function ug(t,e,n,r,s){n=n.render;var i=e.ref;return Ls(e,s),r=rf(t,e,n,r,i,s),n=sf(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Ee&&n&&qh(e),e.flags|=1,ht(t,e,r,s),e.child)}function cg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!pf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qv(t,e,i,r,s)):(t=rl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:ya,n(a,r)&&t.ref===e.ref)return Mn(t,e,s)}return e.flags|=1,t=hr(i,r),t.ref=e.ref,t.return=e,e.child=t}function qv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ya(i,r)&&t.ref===e.ref)if(wt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(wt=!0);else return e.lanes=t.lanes,Mn(t,e,s)}return Od(t,e,n,r,s)}function Wv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Ps,It),It|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Ps,It),It|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Ps,It),It|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Ps,It),It|=r;return ht(t,e,s,n),e.child}function Gv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Od(t,e,n,r,s){var i=kt(n)?Gr:lt.current;return i=Ws(e,i),Ls(e,s),n=rf(t,e,n,r,i,s),r=sf(),t!==null&&!wt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Mn(t,e,s)):(Ee&&r&&qh(e),e.flags|=1,ht(t,e,n,s),e.child)}function dg(t,e,n,r,s){if(kt(n)){var i=!0;Tl(e)}else i=!1;if(Ls(e,s),e.stateNode===null)el(t,e),Bv(e,n,r),Vd(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=kt(n)?Gr:lt.current,d=Ws(e,d));var m=n.getDerivedStateFromProps,v=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&ig(e,a,r,d),Qn=!1;var g=e.memoizedState;a.state=g,Al(e,r,a,s),c=e.memoizedState,l!==r||g!==c||Et.current||Qn?(typeof m=="function"&&(jd(e,n,m,r),c=e.memoizedState),(l=Qn||sg(e,n,l,r,g,c,d))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,wv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Wt(e.type,l),a.props=d,v=e.pendingProps,g=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=zt(c):(c=kt(n)?Gr:lt.current,c=Ws(e,c));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==v||g!==c)&&ig(e,a,r,c),Qn=!1,g=e.memoizedState,a.state=g,Al(e,r,a,s);var N=e.memoizedState;l!==v||g!==N||Et.current||Qn?(typeof T=="function"&&(jd(e,n,T,r),N=e.memoizedState),(d=Qn||sg(e,n,d,r,g,N,c)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,N,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,N,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),a.props=r,a.state=N,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Ld(t,e,n,r,i,s)}function Ld(t,e,n,r,s,i){Gv(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Yp(e,n,!1),Mn(t,e,i);r=e.stateNode,Fk.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=Ks(e,t.child,null,i),e.child=Ks(e,null,l,i)):ht(t,e,l,i),e.memoizedState=r.state,s&&Yp(e,n,!0),e.child}function Kv(t){var e=t.stateNode;e.pendingContext?Qp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Qp(t,e.context,!1),Zh(t,e.containerInfo)}function hg(t,e,n,r,s){return Gs(),Gh(s),e.flags|=256,ht(t,e,n,r),e.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Ud(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qv(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(ke,s&1),t===null)return Pd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=yu(a,r,0,null),t=qr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ud(n),e.memoizedState=Fd,t):lf(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Uk(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=hr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=hr(l,i):(i=qr(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?Ud(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=Fd,r}return i=t.child,t=i.sibling,r=hr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function lf(t,e){return e=yu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Do(t,e,n,r){return r!==null&&Gh(r),Ks(e,t.child,null,n),t=lf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Uk(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=Uc(Error(F(422))),Do(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yu({mode:"visible",children:r.children},s,0,null),i=qr(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ks(e,t.child,null,a),e.child.memoizedState=Ud(a),e.memoizedState=Fd,i);if(!(e.mode&1))return Do(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Uc(i,r,void 0),Do(t,e,a,r)}if(l=(a&t.childLanes)!==0,wt||l){if(r=He,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Vn(t,s),Xt(r,t,s,-1))}return mf(),r=Uc(Error(F(421))),Do(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Zk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,St=lr(s.nextSibling),At=e,Ee=!0,Kt=null,t!==null&&(jt[Vt++]=bn,jt[Vt++]=In,jt[Vt++]=Kr,bn=t.id,In=t.overflow,Kr=e),e=lf(e,r.children),e.flags|=4096,e)}function fg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dd(t.return,e,n)}function zc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yv(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fg(t,n,e);else if(t.tag===19)fg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Cl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Cl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zc(e,!0,n,null,i);break;case"together":zc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function el(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Mn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Yr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=hr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zk(t,e,n){switch(e.tag){case 3:Kv(e),Gs();break;case 5:Ev(e);break;case 1:kt(e.type)&&Tl(e);break;case 4:Zh(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Sl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?Qv(t,e,n):(ye(ke,ke.current&1),t=Mn(t,e,n),t!==null?t.sibling:null);ye(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Yv(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Wv(t,e,n)}return Mn(t,e,n)}var Xv,zd,Jv,Zv;Xv=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zd=function(){};Jv=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Br(cn.current);var i=null;switch(n){case"input":s=ud(t,s),r=ud(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=hd(t,s),r=hd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=El)}md(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ca.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ca.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Zv=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oi(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Bk(t,e,n){var r=e.pendingProps;switch(Wh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return kt(e.type)&&kl(),rt(e),null;case 3:return r=e.stateNode,Qs(),we(Et),we(lt),tf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ro(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(Qd(Kt),Kt=null))),zd(t,e),rt(e),null;case 5:ef(e);var s=Br(Ea.current);if(n=e.type,t!==null&&e.stateNode!=null)Jv(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return rt(e),null}if(t=Br(cn.current),Ro(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ln]=e,r[xa]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<Bi.length;s++)xe(Bi[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Ep(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Tp(r,i),xe("invalid",r)}md(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Co(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Co(r.textContent,l,t),s=["children",""+l]):ca.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&xe("scroll",r)}switch(n){case"input":Eo(r),kp(r,i,!0);break;case"textarea":Eo(r),bp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=El)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[ln]=e,t[xa]=r,Xv(t,e,!1,!1),e.stateNode=t;e:{switch(a=pd(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Bi.length;s++)xe(Bi[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Ep(t,r),s=ud(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Tp(t,r),s=hd(t,r),xe("invalid",t);break;default:s=r}md(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?Cy(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ny(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&da(t,c):typeof c=="number"&&da(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ca.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xe("scroll",t):c!=null&&Rh(t,i,c,a))}switch(n){case"input":Eo(t),kp(t,r,!1);break;case"textarea":Eo(t),bp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+vr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?js(t,!!r.multiple,i,!1):r.defaultValue!=null&&js(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=El)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)Zv(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Br(Ea.current),Br(cn.current),Ro(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(i=r.nodeValue!==n)&&(t=At,t!==null))switch(t.tag){case 3:Co(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Co(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return rt(e),null;case 13:if(we(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&St!==null&&e.mode&1&&!(e.flags&128))yv(),Gs(),e.flags|=98560,i=!1;else if(i=Ro(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[ln]=e}else Gs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Kt!==null&&(Qd(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ue===0&&(Ue=3):mf())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Qs(),zd(t,e),t===null&&va(e.stateNode.containerInfo),rt(e),null;case 10:return Yh(e.type._context),rt(e),null;case 17:return kt(e.type)&&kl(),rt(e),null;case 19:if(we(ke),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)Oi(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Cl(t),a!==null){for(e.flags|=128,Oi(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>Xs&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Cl(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ee)return rt(e),null}else 2*De()-i.renderingStartTime>Xs&&n!==1073741824&&(e.flags|=128,r=!0,Oi(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=ke.current,ye(ke,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return ff(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?It&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function $k(t,e){switch(Wh(e),e.tag){case 1:return kt(e.type)&&kl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qs(),we(Et),we(lt),tf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ef(e),null;case 13:if(we(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Gs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(ke),null;case 4:return Qs(),null;case 10:return Yh(e.type._context),null;case 22:case 23:return ff(),null;case 24:return null;default:return null}}var jo=!1,at=!1,Hk=typeof WeakSet=="function"?WeakSet:Set,H=null;function Rs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function Bd(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var mg=!1;function qk(t,e){if(bd=_l,t=sv(),Hh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,m=0,v=t,g=null;t:for(;;){for(var T;v!==n||s!==0&&v.nodeType!==3||(l=a+s),v!==i||r!==0&&v.nodeType!==3||(c=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(T=v.firstChild)!==null;)g=v,v=T;for(;;){if(v===t)break t;if(g===n&&++d===s&&(l=a),g===i&&++m===r&&(c=a),(T=v.nextSibling)!==null)break;v=g,g=v.parentNode}v=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Id={focusedElem:t,selectionRange:n},_l=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,O=N.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:Wt(e.type,R),O);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(P){Ae(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=mg,mg=!1,N}function ta(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bd(e,n,i)}s=s.next}while(s!==r)}}function pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $d(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function e_(t){var e=t.alternate;e!==null&&(t.alternate=null,e_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[xa],delete e[Ad],delete e[Sk],delete e[Nk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function t_(t){return t.tag===5||t.tag===3||t.tag===4}function pg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||t_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=El));else if(r!==4&&(t=t.child,t!==null))for(Hd(t,e,n),t=t.sibling;t!==null;)Hd(t,e,n),t=t.sibling}function qd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qd(t,e,n),t=t.sibling;t!==null;)qd(t,e,n),t=t.sibling}var Ge=null,Gt=!1;function Wn(t,e,n){for(n=n.child;n!==null;)n_(t,e,n),n=n.sibling}function n_(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(ou,n)}catch{}switch(n.tag){case 5:at||Rs(n,e);case 6:var r=Ge,s=Gt;Ge=null,Wn(t,e,n),Ge=r,Gt=s,Ge!==null&&(Gt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Gt?(t=Ge,n=n.stateNode,t.nodeType===8?jc(t.parentNode,n):t.nodeType===1&&jc(t,n),pa(t)):jc(Ge,n.stateNode));break;case 4:r=Ge,s=Gt,Ge=n.stateNode.containerInfo,Gt=!0,Wn(t,e,n),Ge=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!at&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Bd(n,e,a),s=s.next}while(s!==r)}Wn(t,e,n);break;case 1:if(!at&&(Rs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ae(n,e,l)}Wn(t,e,n);break;case 21:Wn(t,e,n);break;case 22:n.mode&1?(at=(r=at)||n.memoizedState!==null,Wn(t,e,n),at=r):Wn(t,e,n);break;default:Wn(t,e,n)}}function gg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hk),e.forEach(function(r){var s=eT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Ge=l.stateNode,Gt=!1;break e;case 3:Ge=l.stateNode.containerInfo,Gt=!0;break e;case 4:Ge=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Ge===null)throw Error(F(160));n_(i,a,s),Ge=null,Gt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)r_(e,t),e=e.sibling}function r_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),sn(t),r&4){try{ta(3,t,t.return),pu(3,t)}catch(R){Ae(t,t.return,R)}try{ta(5,t,t.return)}catch(R){Ae(t,t.return,R)}}break;case 1:qt(e,t),sn(t),r&512&&n!==null&&Rs(n,n.return);break;case 5:if(qt(e,t),sn(t),r&512&&n!==null&&Rs(n,n.return),t.flags&32){var s=t.stateNode;try{da(s,"")}catch(R){Ae(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&by(s,i),pd(l,a);var d=pd(l,i);for(a=0;a<c.length;a+=2){var m=c[a],v=c[a+1];m==="style"?Cy(s,v):m==="dangerouslySetInnerHTML"?Ny(s,v):m==="children"?da(s,v):Rh(s,m,v,d)}switch(l){case"input":cd(s,i);break;case"textarea":Iy(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?js(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?js(s,!!i.multiple,i.defaultValue,!0):js(s,!!i.multiple,i.multiple?[]:"",!1))}s[xa]=i}catch(R){Ae(t,t.return,R)}}break;case 6:if(qt(e,t),sn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ae(t,t.return,R)}}break;case 3:if(qt(e,t),sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pa(e.containerInfo)}catch(R){Ae(t,t.return,R)}break;case 4:qt(e,t),sn(t);break;case 13:qt(e,t),sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(df=De())),r&4&&gg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(at=(d=at)||m,qt(e,t),at=d):qt(e,t),sn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(H=t,m=t.child;m!==null;){for(v=H=m;H!==null;){switch(g=H,T=g.child,g.tag){case 0:case 11:case 14:case 15:ta(4,g,g.return);break;case 1:Rs(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(R){Ae(r,n,R)}}break;case 5:Rs(g,g.return);break;case 22:if(g.memoizedState!==null){vg(v);continue}}T!==null?(T.return=g,H=T):vg(v)}m=m.sibling}e:for(m=null,v=t;;){if(v.tag===5){if(m===null){m=v;try{s=v.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=v.stateNode,c=v.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ay("display",a))}catch(R){Ae(t,t.return,R)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(R){Ae(t,t.return,R)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:qt(e,t),sn(t),r&4&&gg(t);break;case 21:break;default:qt(e,t),sn(t)}}function sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(t_(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(da(s,""),r.flags&=-33);var i=pg(t);qd(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=pg(t);Hd(t,l,a);break;default:throw Error(F(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Wk(t,e,n){H=t,s_(t)}function s_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||jo;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||at;l=jo;var d=at;if(jo=a,(at=c)&&!d)for(H=s;H!==null;)a=H,c=a.child,a.tag===22&&a.memoizedState!==null?_g(s):c!==null?(c.return=a,H=c):_g(s);for(;i!==null;)H=i,s_(i),i=i.sibling;H=s,jo=l,at=d}yg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):yg(t)}}function yg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:at||pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!at)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&tg(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}tg(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&pa(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}at||e.flags&512&&$d(e)}catch(g){Ae(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function vg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function _g(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pu(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ae(e,s,c)}}var i=e.return;try{$d(e)}catch(c){Ae(e,i,c)}break;case 5:var a=e.return;try{$d(e)}catch(c){Ae(e,a,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var Gk=Math.ceil,Dl=zn.ReactCurrentDispatcher,uf=zn.ReactCurrentOwner,Ft=zn.ReactCurrentBatchConfig,oe=0,He=null,Me=null,Ye=0,It=0,Ps=Sr(0),Ue=0,Ia=null,Yr=0,gu=0,cf=0,na=null,_t=null,df=0,Xs=1/0,kn=null,jl=!1,Wd=null,cr=null,Vo=!1,rr=null,Vl=0,ra=0,Gd=null,tl=-1,nl=0;function ft(){return oe&6?De():tl!==-1?tl:tl=De()}function dr(t){return t.mode&1?oe&2&&Ye!==0?Ye&-Ye:Ck.transition!==null?(nl===0&&(nl=By()),nl):(t=he,t!==0||(t=window.event,t=t===void 0?16:Qy(t.type)),t):1}function Xt(t,e,n,r){if(50<ra)throw ra=0,Gd=null,Error(F(185));La(t,n,r),(!(oe&2)||t!==He)&&(t===He&&(!(oe&2)&&(gu|=n),Ue===4&&Xn(t,Ye)),Tt(t,r),n===1&&oe===0&&!(e.mode&1)&&(Xs=De()+500,hu&&Nr()))}function Tt(t,e){var n=t.callbackNode;CE(t,e);var r=vl(t,t===He?Ye:0);if(r===0)n!==null&&Np(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Np(n),e===1)t.tag===0?Ak(xg.bind(null,t)):mv(xg.bind(null,t)),bk(function(){!(oe&6)&&Nr()}),n=null;else{switch($y(r)){case 1:n=Mh;break;case 4:n=Uy;break;case 16:n=yl;break;case 536870912:n=zy;break;default:n=yl}n=h_(n,i_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function i_(t,e){if(tl=-1,nl=0,oe&6)throw Error(F(327));var n=t.callbackNode;if(Fs()&&t.callbackNode!==n)return null;var r=vl(t,t===He?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Ml(t,r);else{e=r;var s=oe;oe|=2;var i=o_();(He!==t||Ye!==e)&&(kn=null,Xs=De()+500,Hr(t,e));do try{Yk();break}catch(l){a_(t,l)}while(!0);Qh(),Dl.current=i,oe=s,Me!==null?e=0:(He=null,Ye=0,e=Ue)}if(e!==0){if(e===2&&(s=xd(t),s!==0&&(r=s,e=Kd(t,s))),e===1)throw n=Ia,Hr(t,0),Xn(t,r),Tt(t,De()),n;if(e===6)Xn(t,r);else{if(s=t.current.alternate,!(r&30)&&!Kk(s)&&(e=Ml(t,r),e===2&&(i=xd(t),i!==0&&(r=i,e=Kd(t,i))),e===1))throw n=Ia,Hr(t,0),Xn(t,r),Tt(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Lr(t,_t,kn);break;case 3:if(Xn(t,r),(r&130023424)===r&&(e=df+500-De(),10<e)){if(vl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Nd(Lr.bind(null,t,_t,kn),e);break}Lr(t,_t,kn);break;case 4:if(Xn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Yt(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gk(r/1960))-r,10<r){t.timeoutHandle=Nd(Lr.bind(null,t,_t,kn),r);break}Lr(t,_t,kn);break;case 5:Lr(t,_t,kn);break;default:throw Error(F(329))}}}return Tt(t,De()),t.callbackNode===n?i_.bind(null,t):null}function Kd(t,e){var n=na;return t.current.memoizedState.isDehydrated&&(Hr(t,e).flags|=256),t=Ml(t,e),t!==2&&(e=_t,_t=n,e!==null&&Qd(e)),t}function Qd(t){_t===null?_t=t:_t.push.apply(_t,t)}function Kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xn(t,e){for(e&=~cf,e&=~gu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function xg(t){if(oe&6)throw Error(F(327));Fs();var e=vl(t,0);if(!(e&1))return Tt(t,De()),null;var n=Ml(t,e);if(t.tag!==0&&n===2){var r=xd(t);r!==0&&(e=r,n=Kd(t,r))}if(n===1)throw n=Ia,Hr(t,0),Xn(t,e),Tt(t,De()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lr(t,_t,kn),Tt(t,De()),null}function hf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(Xs=De()+500,hu&&Nr())}}function Xr(t){rr!==null&&rr.tag===0&&!(oe&6)&&Fs();var e=oe;oe|=1;var n=Ft.transition,r=he;try{if(Ft.transition=null,he=1,t)return t()}finally{he=r,Ft.transition=n,oe=e,!(oe&6)&&Nr()}}function ff(){It=Ps.current,we(Ps)}function Hr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Tk(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(Wh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kl();break;case 3:Qs(),we(Et),we(lt),tf();break;case 5:ef(r);break;case 4:Qs();break;case 13:we(ke);break;case 19:we(ke);break;case 10:Yh(r.type._context);break;case 22:case 23:ff()}n=n.return}if(He=t,Me=t=hr(t.current,null),Ye=It=e,Ue=0,Ia=null,cf=gu=Yr=0,_t=na=null,zr!==null){for(e=0;e<zr.length;e++)if(n=zr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}zr=null}return t}function a_(t,e){do{var n=Me;try{if(Qh(),Jo.current=Pl,Rl){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Rl=!1}if(Qr=0,$e=Fe=Te=null,ea=!1,ka=0,uf.current=null,n===null||n.return===null){Ue=1,Ia=e,Me=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=Ye,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=og(a);if(T!==null){T.flags&=-257,lg(T,a,l,i,e),T.mode&1&&ag(i,d,e),e=T,c=d;var N=e.updateQueue;if(N===null){var R=new Set;R.add(c),e.updateQueue=R}else N.add(c);break e}else{if(!(e&1)){ag(i,d,e),mf();break e}c=Error(F(426))}}else if(Ee&&l.mode&1){var O=og(a);if(O!==null){!(O.flags&65536)&&(O.flags|=256),lg(O,a,l,i,e),Gh(Ys(c,l));break e}}i=c=Ys(c,l),Ue!==4&&(Ue=2),na===null?na=[i]:na.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=$v(i,c,e);eg(i,w);break e;case 1:l=c;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(cr===null||!cr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Hv(i,l,e);eg(i,P);break e}}i=i.return}while(i!==null)}u_(n)}catch(D){e=D,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function o_(){var t=Dl.current;return Dl.current=Pl,t===null?Pl:t}function mf(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),He===null||!(Yr&268435455)&&!(gu&268435455)||Xn(He,Ye)}function Ml(t,e){var n=oe;oe|=2;var r=o_();(He!==t||Ye!==e)&&(kn=null,Hr(t,e));do try{Qk();break}catch(s){a_(t,s)}while(!0);if(Qh(),oe=n,Dl.current=r,Me!==null)throw Error(F(261));return He=null,Ye=0,Ue}function Qk(){for(;Me!==null;)l_(Me)}function Yk(){for(;Me!==null&&!wE();)l_(Me)}function l_(t){var e=d_(t.alternate,t,It);t.memoizedProps=t.pendingProps,e===null?u_(t):Me=e,uf.current=null}function u_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=$k(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Me=null;return}}else if(n=Bk(n,e,It),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);Ue===0&&(Ue=5)}function Lr(t,e,n){var r=he,s=Ft.transition;try{Ft.transition=null,he=1,Xk(t,e,n,r)}finally{Ft.transition=s,he=r}return null}function Xk(t,e,n,r){do Fs();while(rr!==null);if(oe&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(RE(t,i),t===He&&(Me=He=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Vo||(Vo=!0,h_(yl,function(){return Fs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ft.transition,Ft.transition=null;var a=he;he=1;var l=oe;oe|=4,uf.current=null,qk(t,n),r_(n,t),yk(Id),_l=!!bd,Id=bd=null,t.current=n,Wk(n),EE(),oe=l,he=a,Ft.transition=i}else t.current=n;if(Vo&&(Vo=!1,rr=t,Vl=s),i=t.pendingLanes,i===0&&(cr=null),bE(n.stateNode),Tt(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(jl)throw jl=!1,t=Wd,Wd=null,t;return Vl&1&&t.tag!==0&&Fs(),i=t.pendingLanes,i&1?t===Gd?ra++:(ra=0,Gd=t):ra=0,Nr(),null}function Fs(){if(rr!==null){var t=$y(Vl),e=Ft.transition,n=he;try{if(Ft.transition=null,he=16>t?16:t,rr===null)var r=!1;else{if(t=rr,rr=null,Vl=0,oe&6)throw Error(F(331));var s=oe;for(oe|=4,H=t.current;H!==null;){var i=H,a=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(H=d;H!==null;){var m=H;switch(m.tag){case 0:case 11:case 15:ta(8,m,i)}var v=m.child;if(v!==null)v.return=m,H=v;else for(;H!==null;){m=H;var g=m.sibling,T=m.return;if(e_(m),m===d){H=null;break}if(g!==null){g.return=T,H=g;break}H=T}}}var N=i.alternate;if(N!==null){var R=N.child;if(R!==null){N.child=null;do{var O=R.sibling;R.sibling=null,R=O}while(R!==null)}}H=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,H=a;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ta(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var E=t.current;for(H=E;H!==null;){a=H;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,H=S;else e:for(a=E;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pu(9,l)}}catch(D){Ae(l,l.return,D)}if(l===a){H=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,H=P;break e}H=l.return}}if(oe=s,Nr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(ou,t)}catch{}r=!0}return r}finally{he=n,Ft.transition=e}}return!1}function wg(t,e,n){e=Ys(n,e),e=$v(t,e,1),t=ur(t,e,1),e=ft(),t!==null&&(La(t,1,e),Tt(t,e))}function Ae(t,e,n){if(t.tag===3)wg(t,t,n);else for(;e!==null;){if(e.tag===3){wg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(cr===null||!cr.has(r))){t=Ys(n,t),t=Hv(e,t,1),e=ur(e,t,1),t=ft(),e!==null&&(La(e,1,t),Tt(e,t));break}}e=e.return}}function Jk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Ye&n)===n&&(Ue===4||Ue===3&&(Ye&130023424)===Ye&&500>De()-df?Hr(t,0):cf|=n),Tt(t,e)}function c_(t,e){e===0&&(t.mode&1?(e=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):e=1);var n=ft();t=Vn(t,e),t!==null&&(La(t,e,n),Tt(t,n))}function Zk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),c_(t,n)}function eT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),c_(t,n)}var d_;d_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Et.current)wt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wt=!1,zk(t,e,n);wt=!!(t.flags&131072)}else wt=!1,Ee&&e.flags&1048576&&pv(e,Il,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;el(t,e),t=e.pendingProps;var s=Ws(e,lt.current);Ls(e,n),s=rf(null,e,r,t,s,n);var i=sf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kt(r)?(i=!0,Tl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jh(e),s.updater=mu,e.stateNode=s,s._reactInternals=e,Vd(e,r,t,n),e=Ld(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&qh(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(el(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=nT(r),t=Wt(r,t),s){case 0:e=Od(null,e,r,t,n);break e;case 1:e=dg(null,e,r,t,n);break e;case 11:e=ug(null,e,r,t,n);break e;case 14:e=cg(null,e,r,Wt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),Od(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),dg(t,e,r,s,n);case 3:e:{if(Kv(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,wv(t,e),Al(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ys(Error(F(423)),e),e=hg(t,e,r,n,s);break e}else if(r!==s){s=Ys(Error(F(424)),e),e=hg(t,e,r,n,s);break e}else for(St=lr(e.stateNode.containerInfo.firstChild),At=e,Ee=!0,Kt=null,n=_v(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Gs(),r===s){e=Mn(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return Ev(e),t===null&&Pd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,Sd(r,s)?a=null:i!==null&&Sd(r,i)&&(e.flags|=32),Gv(t,e),ht(t,e,a,n),e.child;case 6:return t===null&&Pd(e),null;case 13:return Qv(t,e,n);case 4:return Zh(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ks(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),ug(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,ye(Sl,r._currentValue),r._currentValue=a,i!==null)if(Zt(i.value,a)){if(i.children===s.children&&!Et.current){e=Mn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=An(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Dd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(F(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Dd(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ls(e,n),s=zt(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Wt(r,e.pendingProps),s=Wt(r.type,s),cg(t,e,r,s,n);case 15:return qv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),el(t,e),e.tag=1,kt(r)?(t=!0,Tl(e)):t=!1,Ls(e,n),Bv(e,r,s),Vd(e,r,s,n),Ld(null,e,r,!0,t,n);case 19:return Yv(t,e,n);case 22:return Wv(t,e,n)}throw Error(F(156,e.tag))};function h_(t,e){return Fy(t,e)}function tT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new tT(t,e,n,r)}function pf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nT(t){if(typeof t=="function")return pf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dh)return 11;if(t===jh)return 14}return 2}function hr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function rl(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")pf(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Es:return qr(n.children,s,i,e);case Ph:a=8,s|=8;break;case id:return t=Lt(12,n,e,s|2),t.elementType=id,t.lanes=i,t;case ad:return t=Lt(13,n,e,s),t.elementType=ad,t.lanes=i,t;case od:return t=Lt(19,n,e,s),t.elementType=od,t.lanes=i,t;case Ey:return yu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xy:a=10;break e;case wy:a=9;break e;case Dh:a=11;break e;case jh:a=14;break e;case Kn:a=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Lt(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function qr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function yu(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=Ey,t.lanes=n,t.stateNode={isHidden:!1},t}function Bc(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function $c(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gf(t,e,n,r,s,i,a,l,c){return t=new rT(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jh(i),t}function sT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ws,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function f_(t){if(!t)return _r;t=t._reactInternals;e:{if(as(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(kt(n))return fv(t,n,e)}return e}function m_(t,e,n,r,s,i,a,l,c){return t=gf(n,r,!0,t,s,i,a,l,c),t.context=f_(null),n=t.current,r=ft(),s=dr(n),i=An(r,s),i.callback=e??null,ur(n,i,s),t.current.lanes=s,La(t,s,r),Tt(t,r),t}function vu(t,e,n,r){var s=e.current,i=ft(),a=dr(s);return n=f_(n),e.context===null?e.context=n:e.pendingContext=n,e=An(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ur(s,e,a),t!==null&&(Xt(t,s,a,i),Xo(t,s,a)),a}function Ol(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Eg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function yf(t,e){Eg(t,e),(t=t.alternate)&&Eg(t,e)}function iT(){return null}var p_=typeof reportError=="function"?reportError:function(t){console.error(t)};function vf(t){this._internalRoot=t}_u.prototype.render=vf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));vu(t,e,null,null)};_u.prototype.unmount=vf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xr(function(){vu(null,t,null,null)}),e[jn]=null}};function _u(t){this._internalRoot=t}_u.prototype.unstable_scheduleHydration=function(t){if(t){var e=Wy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Yn.length&&e!==0&&e<Yn[n].priority;n++);Yn.splice(n,0,t),n===0&&Ky(t)}};function _f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function xu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kg(){}function aT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ol(a);i.call(d)}}var a=m_(e,r,t,0,null,!1,!1,"",kg);return t._reactRootContainer=a,t[jn]=a.current,va(t.nodeType===8?t.parentNode:t),Xr(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ol(c);l.call(d)}}var c=gf(t,0,!1,null,null,!1,!1,"",kg);return t._reactRootContainer=c,t[jn]=c.current,va(t.nodeType===8?t.parentNode:t),Xr(function(){vu(e,c,n,r)}),c}function wu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Ol(a);l.call(c)}}vu(e,a,t,s)}else a=aT(n,e,t,s,r);return Ol(a)}Hy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=zi(e.pendingLanes);n!==0&&(Oh(e,n|1),Tt(e,De()),!(oe&6)&&(Xs=De()+500,Nr()))}break;case 13:Xr(function(){var r=Vn(t,1);if(r!==null){var s=ft();Xt(r,t,1,s)}}),yf(t,1)}};Lh=function(t){if(t.tag===13){var e=Vn(t,134217728);if(e!==null){var n=ft();Xt(e,t,134217728,n)}yf(t,134217728)}};qy=function(t){if(t.tag===13){var e=dr(t),n=Vn(t,e);if(n!==null){var r=ft();Xt(n,t,e,r)}yf(t,e)}};Wy=function(){return he};Gy=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};yd=function(t,e,n){switch(e){case"input":if(cd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=du(r);if(!s)throw Error(F(90));Ty(r),cd(r,s)}}}break;case"textarea":Iy(t,n);break;case"select":e=n.value,e!=null&&js(t,!!n.multiple,e,!1)}};Dy=hf;jy=Xr;var oT={usingClientEntryPoint:!1,Events:[Ua,Is,du,Ry,Py,hf]},Li={findFiberByHostInstance:Ur,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lT={bundleType:Li.bundleType,version:Li.version,rendererPackageName:Li.rendererPackageName,rendererConfig:Li.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oy(t),t===null?null:t.stateNode},findFiberByHostInstance:Li.findFiberByHostInstance||iT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Mo.isDisabled&&Mo.supportsFiber)try{ou=Mo.inject(lT),un=Mo}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oT;Rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_f(e))throw Error(F(200));return sT(t,e,null,n)};Rt.createRoot=function(t,e){if(!_f(t))throw Error(F(299));var n=!1,r="",s=p_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gf(t,1,!1,null,null,n,!1,r,s),t[jn]=e.current,va(t.nodeType===8?t.parentNode:t),new vf(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Oy(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return Xr(t)};Rt.hydrate=function(t,e,n){if(!xu(e))throw Error(F(200));return wu(null,t,e,!0,n)};Rt.hydrateRoot=function(t,e,n){if(!_f(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=p_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=m_(e,null,t,1,n??null,s,!1,i,a),t[jn]=e.current,va(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _u(e)};Rt.render=function(t,e,n){if(!xu(e))throw Error(F(200));return wu(null,t,e,!1,n)};Rt.unmountComponentAtNode=function(t){if(!xu(t))throw Error(F(40));return t._reactRootContainer?(Xr(function(){wu(null,null,t,!1,function(){t._reactRootContainer=null,t[jn]=null})}),!0):!1};Rt.unstable_batchedUpdates=hf;Rt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!xu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return wu(t,e,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function g_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g_)}catch(t){console.error(t)}}g_(),gy.exports=Rt;var uT=gy.exports,y_,Tg=uT;y_=Tg.createRoot,Tg.hydrateRoot;const cT=()=>{};var bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},dT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},__={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,m=i>>2,v=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,T=d&63;c||(T=64,a||(g=64)),r.push(n[m],n[v],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(v_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||v==null)throw new hT;const g=i<<2|l>>4;if(r.push(g),d!==64){const T=l<<4&240|d>>2;if(r.push(T),v!==64){const N=d<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class hT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fT=function(t){const e=v_(t);return __.encodeByteArray(e,!0)},Ll=function(t){return fT(t).replace(/\./g,"")},x_=function(t){try{return __.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=()=>mT().__FIREBASE_DEFAULTS__,gT=()=>{if(typeof process>"u"||typeof bg>"u")return;const t=bg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},yT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&x_(t[1]);return e&&JSON.parse(e)},Eu=()=>{try{return cT()||pT()||gT()||yT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},w_=t=>{var e,n;return(n=(e=Eu())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},vT=t=>{const e=w_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},E_=()=>{var t;return(t=Eu())==null?void 0:t.config},k_=t=>{var e;return(e=Eu())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function T_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ll(JSON.stringify(n)),Ll(JSON.stringify(a)),""].join(".")}const sa={};function wT(){const t={prod:[],emulator:[]};for(const e of Object.keys(sa))sa[e]?t.emulator.push(e):t.prod.push(e);return t}function ET(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Ig=!1;function b_(t,e){if(typeof window>"u"||typeof document>"u"||!ui(window.location.host)||sa[t]===e||sa[t]||Ig)return;sa[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=wT().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Ig=!0,a()},g}function m(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function v(){const g=ET(r),T=n("text"),N=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),O=document.getElementById(R)||document.createElement("a"),w=n("preprendIcon"),E=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),m(O,R);const P=d();c(E,w),S.append(E,N,O,P),document.body.appendChild(S)}i?(N.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function TT(){var e;const t=(e=Eu())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function IT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function ST(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function NT(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function AT(){return!TT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function CT(){try{return typeof indexedDB=="object"}catch{return!1}}function RT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="FirebaseError";class Bn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=PT,Object.setPrototypeOf(this,Bn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ba.prototype.create)}}class Ba{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?DT(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Bn(s,l,r)}}function DT(t,e){return t.replace(jT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const jT=/\{\$([^}]+)}/g;function VT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(Sg(i)&&Sg(a)){if(!Jr(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Sg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $a(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $i(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Hi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function MT(t,e){const n=new OT(t,e);return n.subscribe.bind(n)}class OT{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");LT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hc),s.error===void 0&&(s.error=Hc),s.complete===void 0&&(s.complete=Hc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function LT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class Zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new _T;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zT(e))try{this.getOrInitializeService({instanceIdentifier:Fr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Fr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fr){return this.instances.has(e)}getOptions(e=Fr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:UT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Fr){return this.component?this.component.multipleInstances?e:Fr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function UT(t){return t===Fr?void 0:t}function zT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new FT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const $T={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},HT=ne.INFO,qT={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},WT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=qT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xf{constructor(e){this.name=e,this._logLevel=HT,this._logHandler=WT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$T[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const GT=(t,e)=>e.some(n=>t instanceof n);let Ng,Ag;function KT(){return Ng||(Ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function QT(){return Ag||(Ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I_=new WeakMap,Yd=new WeakMap,S_=new WeakMap,qc=new WeakMap,wf=new WeakMap;function YT(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(fr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&I_.set(n,t)}).catch(()=>{}),wf.set(e,t),e}function XT(t){if(Yd.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Yd.set(t,e)}let Xd={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Yd.get(t);if(e==="objectStoreNames")return t.objectStoreNames||S_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function JT(t){Xd=t(Xd)}function ZT(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Wc(this),e,...n);return S_.set(r,e.sort?e.sort():[e]),fr(r)}:QT().includes(t)?function(...e){return t.apply(Wc(this),e),fr(I_.get(this))}:function(...e){return fr(t.apply(Wc(this),e))}}function eb(t){return typeof t=="function"?ZT(t):(t instanceof IDBTransaction&&XT(t),GT(t,KT())?new Proxy(t,Xd):t)}function fr(t){if(t instanceof IDBRequest)return YT(t);if(qc.has(t))return qc.get(t);const e=eb(t);return e!==t&&(qc.set(t,e),wf.set(e,t)),e}const Wc=t=>wf.get(t);function tb(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=fr(a);return r&&a.addEventListener("upgradeneeded",c=>{r(fr(a.result),c.oldVersion,c.newVersion,fr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const nb=["get","getKey","getAll","getAllKeys","count"],rb=["put","add","delete","clear"],Gc=new Map;function Cg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gc.get(e))return Gc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=rb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||nb.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Gc.set(e,i),i}JT(t=>({...t,get:(e,n,r)=>Cg(e,n)||t.get(e,n,r),has:(e,n)=>!!Cg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ib(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ib(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jd="@firebase/app",Rg="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new xf("@firebase/app"),ab="@firebase/app-compat",ob="@firebase/analytics-compat",lb="@firebase/analytics",ub="@firebase/app-check-compat",cb="@firebase/app-check",db="@firebase/auth",hb="@firebase/auth-compat",fb="@firebase/database",mb="@firebase/data-connect",pb="@firebase/database-compat",gb="@firebase/functions",yb="@firebase/functions-compat",vb="@firebase/installations",_b="@firebase/installations-compat",xb="@firebase/messaging",wb="@firebase/messaging-compat",Eb="@firebase/performance",kb="@firebase/performance-compat",Tb="@firebase/remote-config",bb="@firebase/remote-config-compat",Ib="@firebase/storage",Sb="@firebase/storage-compat",Nb="@firebase/firestore",Ab="@firebase/ai",Cb="@firebase/firestore-compat",Rb="firebase",Pb="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="[DEFAULT]",Db={[Jd]:"fire-core",[ab]:"fire-core-compat",[lb]:"fire-analytics",[ob]:"fire-analytics-compat",[cb]:"fire-app-check",[ub]:"fire-app-check-compat",[db]:"fire-auth",[hb]:"fire-auth-compat",[fb]:"fire-rtdb",[mb]:"fire-data-connect",[pb]:"fire-rtdb-compat",[gb]:"fire-fn",[yb]:"fire-fn-compat",[vb]:"fire-iid",[_b]:"fire-iid-compat",[xb]:"fire-fcm",[wb]:"fire-fcm-compat",[Eb]:"fire-perf",[kb]:"fire-perf-compat",[Tb]:"fire-rc",[bb]:"fire-rc-compat",[Ib]:"fire-gcs",[Sb]:"fire-gcs-compat",[Nb]:"fire-fst",[Cb]:"fire-fst-compat",[Ab]:"fire-vertex","fire-js":"fire-js",[Rb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl=new Map,jb=new Map,eh=new Map;function Pg(t,e){try{t.container.addComponent(e)}catch(n){On.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Js(t){const e=t.name;if(eh.has(e))return On.debug(`There were multiple attempts to register component ${e}.`),!1;eh.set(e,t);for(const n of Fl.values())Pg(n,t);for(const n of jb.values())Pg(n,t);return!0}function Ef(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},mr=new Ba("app","Firebase",Vb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=Pb;function N_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Zd,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw mr.create("bad-app-name",{appName:String(s)});if(n||(n=E_()),!n)throw mr.create("no-options");const i=Fl.get(s);if(i){if(Jr(n,i.options)&&Jr(r,i.config))return i;throw mr.create("duplicate-app",{appName:s})}const a=new BT(s);for(const c of eh.values())a.addComponent(c);const l=new Mb(n,r,a);return Fl.set(s,l),l}function A_(t=Zd){const e=Fl.get(t);if(!e&&t===Zd&&E_())return N_();if(!e)throw mr.create("no-app",{appName:t});return e}function pr(t,e,n){let r=Db[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),On.warn(a.join(" "));return}Js(new Zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebase-heartbeat-database",Lb=1,Sa="firebase-heartbeat-store";let Kc=null;function C_(){return Kc||(Kc=tb(Ob,Lb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Sa)}catch(n){console.warn(n)}}}}).catch(t=>{throw mr.create("idb-open",{originalErrorMessage:t.message})})),Kc}async function Fb(t){try{const n=(await C_()).transaction(Sa),r=await n.objectStore(Sa).get(R_(t));return await n.done,r}catch(e){if(e instanceof Bn)On.warn(e.message);else{const n=mr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});On.warn(n.message)}}}async function Dg(t,e){try{const r=(await C_()).transaction(Sa,"readwrite");await r.objectStore(Sa).put(e,R_(t)),await r.done}catch(n){if(n instanceof Bn)On.warn(n.message);else{const r=mr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});On.warn(r.message)}}}function R_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub=1024,zb=30;class Bb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=jg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>zb){const a=qb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){On.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=jg(),{heartbeatsToSend:r,unsentEntries:s}=$b(this._heartbeatsCache.heartbeats),i=Ll(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return On.warn(n),""}}}function jg(){return new Date().toISOString().substring(0,10)}function $b(t,e=Ub){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),Vg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Hb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return CT()?RT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Fb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Dg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Vg(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}function qb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wb(t){Js(new Zr("platform-logger",e=>new sb(e),"PRIVATE")),Js(new Zr("heartbeat",e=>new Bb(e),"PRIVATE")),pr(Jd,Rg,t),pr(Jd,Rg,"esm2020"),pr("fire-js","")}Wb("");function P_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Gb=P_,D_=new Ba("auth","Firebase",P_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=new xf("@firebase/auth");function Kb(t,...e){Ul.logLevel<=ne.WARN&&Ul.warn(`Auth (${ci}): ${t}`,...e)}function sl(t,...e){Ul.logLevel<=ne.ERROR&&Ul.error(`Auth (${ci}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw kf(t,...e)}function dn(t,...e){return kf(t,...e)}function j_(t,e,n){const r={...Gb(),[e]:n};return new Ba("auth","Firebase",r).create(e,{appName:t.name})}function Cn(t){return j_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return D_.create(t,...e)}function Q(t,e,...n){if(!t)throw kf(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw sl(e),new Error(e)}function Ln(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function Qb(){return Mg()==="http:"||Mg()==="https:"}function Mg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qb()||IT()||"connection"in navigator)?navigator.onLine:!0}function Xb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ln(n>e,"Short delay should be less than long delay!"),this.isMobile=kT()||ST()}get(){return Yb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(t,e){Ln(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],eI=new Ha(3e4,6e4);function Ar(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Cr(t,e,n,r,s={}){return M_(t,s,async()=>{let i={},a={};r&&(e==="GET"?a=r:i={body:JSON.stringify(r)});const l=$a({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return bT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&ui(t.emulatorConfig.host)&&(d.credentials="include"),V_.fetch()(await O_(t,t.config.apiHost,n,l),d)})}async function M_(t,e,n){t._canInitEmulator=!1;const r={...Jb,...e};try{const s=new nI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw Oo(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Oo(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw Oo(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw Oo(t,"user-disabled",a);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw j_(t,m,d);en(t,m)}}catch(s){if(s instanceof Bn)throw s;en(t,"network-request-failed",{message:String(s)})}}async function qa(t,e,n,r,s={}){const i=await Cr(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function O_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,a=i.config.emulator?Tf(t.config,s):`${t.config.apiScheme}://${s}`;return Zb.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}function tI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class nI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),eI.get())})}}function Oo(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dn(t,e,r);return s.customData._tokenResponse=n,s}function Og(t){return t!==void 0&&t.enterprise!==void 0}class rI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return tI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function sI(t,e){return Cr(t,"GET","/v2/recaptchaConfig",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iI(t,e){return Cr(t,"POST","/v1/accounts:delete",e)}async function zl(t,e){return Cr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aI(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=bf(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ia(Qc(s.auth_time)),issuedAtTime:ia(Qc(s.iat)),expirationTime:ia(Qc(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Qc(t){return Number(t)*1e3}function bf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return sl("JWT malformed, contained fewer than 3 sections"),null;try{const s=x_(n);return s?JSON.parse(s):(sl("Failed to decode base64 JWT payload"),null)}catch(s){return sl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Lg(t){const e=bf(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Na(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bn&&oI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function oI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ia(this.lastLoginAt),this.creationTime=ia(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t){var v;const e=t.auth,n=await t.getIdToken(),r=await Na(t,zl(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(v=s.providerUserInfo)!=null&&v.length?L_(s.providerUserInfo):[],a=cI(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new nh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function uI(t){const e=qe(t);await Bl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function L_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t,e){const n=await M_(t,{},async()=>{const r=$a({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await O_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&ui(t.emulatorConfig.host)&&(c.credentials="include"),V_.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function hI(t,e){return Cr(t,"POST","/v2/accounts:revokeToken",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=Lg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await dI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,a=new Us;return r&&(Q(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Us,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new lI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new nh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Na(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return aI(this,e)}reload(){return uI(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(Cn(this.auth));const e=await this.getIdToken();return await Na(this,iI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:v,emailVerified:g,isAnonymous:T,providerData:N,stsTokenManager:R}=n;Q(v&&R,e,"internal-error");const O=Us.fromJSON(this.name,R);Q(typeof v=="string",e,"internal-error"),Gn(r,e.name),Gn(s,e.name),Q(typeof g=="boolean",e,"internal-error"),Q(typeof T=="boolean",e,"internal-error"),Gn(i,e.name),Gn(a,e.name),Gn(l,e.name),Gn(c,e.name),Gn(d,e.name),Gn(m,e.name);const w=new Qt({uid:v,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:T,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:O,createdAt:d,lastLoginAt:m});return N&&Array.isArray(N)&&(w.providerData=N.map(E=>({...E}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new Us;s.updateFromServerResponse(n);const i=new Qt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Bl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?L_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Us;l.updateFromIdToken(r);const c=new Qt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new nh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fg=new Map;function Nn(t){Ln(t instanceof Function,"Expected a class definition");let e=Fg.get(t);return e?(Ln(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Fg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}F_.type="NONE";const Ug=F_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t,e,n){return`firebase:${t}:${e}:${n}`}class zs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=il(this.userKey,s.apiKey,i),this.fullPersistenceKey=il("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await zl(this.auth,{idToken:e}).catch(()=>{});return n?Qt._fromGetAccountInfoResponse(this.auth,n,e):null}return Qt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new zs(Nn(Ug),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Nn(Ug);const a=il(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(a);if(m){let v;if(typeof m=="string"){const g=await zl(e,{idToken:m}).catch(()=>{});if(!g)break;v=await Qt._fromGetAccountInfoResponse(e,g,m)}else v=Qt._fromJSON(e,m);d!==i&&(l=v),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new zs(i,e,r):(i=c[0],l&&await i._set(a,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new zs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(U_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q_(e))return"Blackberry";if(W_(e))return"Webos";if(z_(e))return"Safari";if((e.includes("chrome/")||B_(e))&&!e.includes("edge/"))return"Chrome";if(H_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function U_(t=ut()){return/firefox\//i.test(t)}function z_(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function B_(t=ut()){return/crios\//i.test(t)}function $_(t=ut()){return/iemobile/i.test(t)}function H_(t=ut()){return/android/i.test(t)}function q_(t=ut()){return/blackberry/i.test(t)}function W_(t=ut()){return/webos/i.test(t)}function If(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function fI(t=ut()){var e;return If(t)&&!!((e=window.navigator)!=null&&e.standalone)}function mI(){return NT()&&document.documentMode===10}function G_(t=ut()){return If(t)||H_(t)||W_(t)||q_(t)||/windows phone/i.test(t)||$_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t,e=[]){let n;switch(t){case"Browser":n=zg(ut());break;case"Worker":n=`${zg(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ci}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((a,l)=>{try{const c=e(i);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(t,e={}){return Cr(t,"GET","/v2/passwordPolicy",Ar(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=6;class vI{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??yI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bg(this),this.idTokenSubscription=new Bg(this),this.beforeStateQueue=new pI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=D_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await zs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await zl(this,{idToken:e}),r=await Qt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mt(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Xb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(Cn(this));const n=e?qe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(Cn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(Cn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gI(this),n=new vI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ba("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await hI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await zs.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=K_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&Kb(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function os(t){return qe(t)}class Bg{constructor(e){this.auth=e,this.observer=null,this.addObserver=MT(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xI(t){ku=t}function Q_(t){return ku.loadJS(t)}function wI(){return ku.recaptchaEnterpriseScript}function EI(){return ku.gapiScript}function kI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class TI{constructor(){this.enterprise=new bI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class bI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const II="recaptcha-enterprise",Y_="NO_RECAPTCHA";class SI{constructor(e){this.type=II,this.auth=os(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(a,l)=>{sI(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new rI(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,a(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,a,l){const c=window.grecaptcha;Og(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{a(d)}).catch(()=>{a(Y_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new TI().execute("siteKey",{action:"verify"}):new Promise((i,a)=>{r(this.auth).then(l=>{if(!n&&Og(window.grecaptcha))s(l,i,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=wI();c.length!==0&&(c+=l),Q_(c).then(()=>{s(l,i,a)}).catch(d=>{a(d)})}}).catch(l=>{a(l)})})}}async function $g(t,e,n,r=!1,s=!1){const i=new SI(t);let a;if(s)a=Y_;else try{a=await i.verify(n)}catch{a=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function rh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await $g(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await $g(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI(t,e){const n=Ef(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Jr(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function AI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CI(t,e,n){const r=os(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=X_(e),{host:a,port:l}=RI(e),c=l===null?"":`:${l}`,d={url:`${i}//${a}${c}/`},m=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Jr(d,r.config.emulator)&&Jr(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,ui(a)?(T_(`${i}//${a}${c}`),b_("Auth",!0)):PI()}function X_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RI(t){const e=X_(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Hg(r.substr(i.length+1))}}else{const[i,a]=r.split(":");return{host:i,port:Hg(a)}}}function Hg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function PI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function DI(t,e){return Cr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jI(t,e){return qa(t,"POST","/v1/accounts:signInWithPassword",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}async function MI(t,e){return qa(t,"POST","/v1/accounts:signInWithEmailLink",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends Sf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Aa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Aa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,n,"signInWithPassword",jI);case"emailLink":return VI(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rh(e,r,"signUpPassword",DI);case"emailLink":return MI(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bs(t,e){return qa(t,"POST","/v1/accounts:signInWithIdp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI="http://localhost";class es extends Sf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new es(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const a=new es(r,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Bs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bs(e,n)}buildRequest(){const e={requestUri:OI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=$a(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function FI(t){const e=$i(Hi(t)).link,n=e?$i(Hi(e)).deep_link_id:null,r=$i(Hi(t)).deep_link_id;return(r?$i(Hi(r)).link:null)||r||n||e||t}class Nf{constructor(e){const n=$i(Hi(e)),r=n.apiKey??null,s=n.oobCode??null,i=LI(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=FI(e);try{return new Nf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.providerId=di.PROVIDER_ID}static credential(e,n){return Aa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Nf.parseLink(n);return Q(r,"argument-error"),Aa._fromEmailAndCode(e,r.code,r.tenantId)}}di.PROVIDER_ID="password";di.EMAIL_PASSWORD_SIGN_IN_METHOD="password";di.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa extends J_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends Wa{constructor(){super("facebook.com")}static credential(e){return es._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jn.credential(e.oauthAccessToken)}catch{return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends Wa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return es._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Zn.credential(n,r)}catch{return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com";Zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Wa{constructor(){super("github.com")}static credential(e){return es._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return er.credential(e.oauthAccessToken)}catch{return null}}}er.GITHUB_SIGN_IN_METHOD="github.com";er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Wa{constructor(){super("twitter.com")}static credential(e,n){return es._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return tr.credential(n,r)}catch{return null}}}tr.TWITTER_SIGN_IN_METHOD="twitter.com";tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(t,e){return qa(t,"POST","/v1/accounts:signUp",Ar(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qt._fromIdTokenResponse(e,r,s),a=qg(r);return new ts({user:i,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qg(r);return new ts({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l extends Bn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,$l.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new $l(e,n,r,s)}}function Z_(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?$l._fromErrorAndOperation(t,i,e,r):i})}async function zI(t,e,n=!1){const r=await Na(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ts._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BI(t,e,n=!1){const{auth:r}=t;if(Mt(r.app))return Promise.reject(Cn(r));const s="reauthenticate";try{const i=await Na(t,Z_(r,s,e,t),n);Q(i.idToken,r,"internal-error");const a=bf(i.idToken);Q(a,r,"internal-error");const{sub:l}=a;return Q(t.uid===l,r,"user-mismatch"),ts._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ex(t,e,n=!1){if(Mt(t.app))return Promise.reject(Cn(t));const r="signIn",s=await Z_(t,r,e),i=await ts._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function $I(t,e){return ex(os(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t){const e=os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function HI(t,e,n){if(Mt(t.app))return Promise.reject(Cn(t));const r=os(t),a=await rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UI).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&tx(t),c}),l=await ts._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(l.user),l}function qI(t,e,n){return Mt(t.app)?Promise.reject(Cn(t)):$I(qe(t),di.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&tx(t),r})}function WI(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function GI(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function KI(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function QI(t){return qe(t).signOut()}const Hl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hl,"1"),this.storage.removeItem(Hl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI=1e3,XI=10;class rx extends nx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=G_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},i=this.storage.getItem(r);mI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,XI):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},YI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rx.type="LOCAL";const JI=rx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx extends nx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sx.type="SESSION";const ix=sx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Tu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async d=>d(n.origin,i)),c=await ZI(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Tu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,c)=>{const d=Af("",20);s.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(v){const g=v;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return window}function tS(t){hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){return typeof hn().WorkerGlobalScope<"u"&&typeof hn().importScripts=="function"}async function nS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function rS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function sS(){return ax()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox="firebaseLocalStorageDb",iS=1,ql="firebaseLocalStorage",lx="fbase_key";class Ga{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function bu(t,e){return t.transaction([ql],e?"readwrite":"readonly").objectStore(ql)}function aS(){const t=indexedDB.deleteDatabase(ox);return new Ga(t).toPromise()}function sh(){const t=indexedDB.open(ox,iS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ql,{keyPath:lx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ql)?e(r):(r.close(),await aS(),e(await sh()))})})}async function Wg(t,e,n){const r=bu(t,!0).put({[lx]:e,value:n});return new Ga(r).toPromise()}async function oS(t,e){const n=bu(t,!1).get(e),r=await new Ga(n).toPromise();return r===void 0?null:r.value}function Gg(t,e){const n=bu(t,!0).delete(e);return new Ga(n).toPromise()}const lS=800,uS=3;class ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>uS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ax()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Tu._getInstance(sS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await nS(),!this.activeServiceWorker)return;this.sender=new eS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||rS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sh();return await Wg(e,Hl,"1"),await Gg(e,Hl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Wg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>oS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=bu(s,!1).getAll();return new Ga(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),lS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ux.type="LOCAL";const cS=ux;new Ha(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dS(t,e){return e?Nn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf extends Sf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function hS(t){return ex(t.auth,new Cf(t),t.bypassAuthState)}function fS(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),BI(n,new Cf(t),t.bypassAuthState)}async function mS(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),zI(n,new Cf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hS;case"linkViaPopup":case"linkViaRedirect":return mS;case"reauthViaPopup":case"reauthViaRedirect":return fS;default:en(this.auth,"internal-error")}}resolve(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ln(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=new Ha(2e3,1e4);class Ds extends cx{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ds.currentPopupAction&&Ds.currentPopupAction.cancel(),Ds.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Ln(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ds.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,pS.get())};e()}}Ds.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS="pendingRedirect",al=new Map;class yS extends cx{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=al.get(this.auth._key());if(!e){try{const r=await vS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}al.set(this.auth._key(),e)}return this.bypassAuthState||al.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vS(t,e){const n=wS(e),r=xS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function _S(t,e){al.set(t._key(),e)}function xS(t){return Nn(t._redirectPersistence)}function wS(t){return il(gS,t.config.apiKey,t.name)}async function ES(t,e,n=!1){if(Mt(t.app))return Promise.reject(Cn(t));const r=os(t),s=dS(r,e),a=await new yS(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kS=10*60*1e3;class TS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!bS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!dx(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kS&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kg(e))}saveEventToCache(e){this.cachedEventUids.add(Kg(e)),this.lastProcessedEventTime=Date.now()}}function Kg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function dx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function bS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(t,e={}){return Cr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NS=/^https?/;async function AS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await IS(t);for(const n of e)try{if(CS(n))return}catch{}en(t,"unauthorized-domain")}function CS(t){const e=th(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!NS.test(n))return!1;if(SS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=new Ha(3e4,6e4);function Qg(){const t=hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PS(t){return new Promise((e,n)=>{var s,i,a;function r(){Qg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Qg(),n(dn(t,"network-request-failed"))},timeout:RS.get()})}if((i=(s=hn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=hn().gapi)!=null&&a.load)r();else{const l=kI("iframefcb");return hn()[l]=()=>{gapi.load?r():n(dn(t,"network-request-failed"))},Q_(`${EI()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ol=null,e})}let ol=null;function DS(t){return ol=ol||PS(t),ol}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jS=new Ha(5e3,15e3),VS="__/auth/iframe",MS="emulator/auth/iframe",OS={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},LS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FS(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Tf(e,MS):`https://${t.config.authDomain}/${VS}`,r={apiKey:e.apiKey,appName:t.name,v:ci},s=LS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${$a(r).slice(1)}`}async function US(t){const e=await DS(t),n=hn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:FS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:OS,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const a=dn(t,"network-request-failed"),l=hn().setTimeout(()=>{i(a)},jS.get());function c(){hn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},BS=500,$S=600,HS="_blank",qS="http://localhost";class Yg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function WS(t,e,n,r=BS,s=$S){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...zS,width:r.toString(),height:s.toString(),top:i,left:a},d=ut().toLowerCase();n&&(l=B_(d)?HS:n),U_(d)&&(e=e||qS,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[T,N])=>`${g}${T}=${N},`,"");if(fI(d)&&l!=="_self")return GS(e||"",l),new Yg(null);const v=window.open(e||"",l,m);Q(v,t,"popup-blocked");try{v.focus()}catch{}return new Yg(v)}function GS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="__/auth/handler",QS="emulator/auth/handler",YS=encodeURIComponent("fac");async function Xg(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ci,eventId:s};if(e instanceof J_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",VT(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))a[m]=v}if(e instanceof Wa){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),d=c?`#${YS}=${encodeURIComponent(c)}`:"";return`${XS(t)}?${$a(l).slice(1)}${d}`}function XS({config:t}){return t.emulator?Tf(t,QS):`https://${t.authDomain}/${KS}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="webStorageSupport";class JS{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ix,this._completeRedirectFn=ES,this._overrideRedirectResult=_S}async _openPopup(e,n,r,s){var a;Ln((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await Xg(e,n,r,th(),s);return WS(e,i,Af())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Xg(e,n,r,th(),s);return tS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Ln(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await US(e),r=new TS(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yc,{type:Yc},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[Yc];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=AS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return G_()||z_()||If()}}const ZS=JS;var Jg="@firebase/auth",Zg="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function n2(t){Js(new Zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Q(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:K_(t)},d=new _I(r,s,i,c);return AI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Js(new Zr("auth-internal",e=>{const n=os(e.getProvider("auth").getImmediate());return(r=>new e2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pr(Jg,Zg,t2(t)),pr(Jg,Zg,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2=5*60,s2=k_("authIdTokenMaxAge")||r2;let e0=null;const i2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>s2)return;const s=n==null?void 0:n.token;e0!==s&&(e0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function a2(t=A_()){const e=Ef(t,"auth");if(e.isInitialized())return e.getImmediate();const n=NI(t,{popupRedirectResolver:ZS,persistence:[cS,JI,ix]}),r=k_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const a=i2(i.toString());GI(n,a,()=>a(n.currentUser)),WI(n,l=>a(l))}}const s=w_("auth");return s&&CI(n,`http://${s}`),n}function o2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}xI({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",o2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});n2("Browser");var l2="firebase",u2="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr(l2,u2,"app");var t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gr,hx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,p){function y(){}y.prototype=p.prototype,x.D=p.prototype,x.prototype=new y,x.prototype.constructor=x,x.C=function(k,I,A){for(var b=Array(arguments.length-2),me=2;me<arguments.length;me++)b[me-2]=arguments[me];return p.prototype[I].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,p,y){y||(y=0);var k=Array(16);if(typeof p=="string")for(var I=0;16>I;++I)k[I]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(I=0;16>I;++I)k[I]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=x.g[0],y=x.g[1],I=x.g[2];var A=x.g[3],b=p+(A^y&(I^A))+k[0]+3614090360&4294967295;p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[1]+3905402710&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[2]+606105819&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[3]+3250441966&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(A^y&(I^A))+k[4]+4118548399&4294967295,p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[5]+1200080426&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[6]+2821735955&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[7]+4249261313&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(A^y&(I^A))+k[8]+1770035416&4294967295,p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[9]+2336552879&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[10]+4294925233&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[11]+2304563134&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(A^y&(I^A))+k[12]+1804603682&4294967295,p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[13]+4254626195&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[14]+2792965006&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[15]+1236535329&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(I^A&(y^I))+k[1]+4129170786&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[6]+3225465664&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[11]+643717713&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[0]+3921069994&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(I^A&(y^I))+k[5]+3593408605&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[10]+38016083&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[15]+3634488961&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[4]+3889429448&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(I^A&(y^I))+k[9]+568446438&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[14]+3275163606&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[3]+4107603335&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[8]+1163531501&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(I^A&(y^I))+k[13]+2850285829&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[2]+4243563512&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[7]+1735328473&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[12]+2368359562&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(y^I^A)+k[5]+4294588738&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[8]+2272392833&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[11]+1839030562&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[14]+4259657740&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(y^I^A)+k[1]+2763975236&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[4]+1272893353&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[7]+4139469664&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[10]+3200236656&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(y^I^A)+k[13]+681279174&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[0]+3936430074&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[3]+3572445317&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[6]+76029189&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(y^I^A)+k[9]+3654602809&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[12]+3873151461&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[15]+530742520&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[2]+3299628645&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(I^(y|~A))+k[0]+4096336452&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[7]+1126891415&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[14]+2878612391&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[5]+4237533241&4294967295,y=I+(b<<21&4294967295|b>>>11),b=p+(I^(y|~A))+k[12]+1700485571&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[3]+2399980690&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[10]+4293915773&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[1]+2240044497&4294967295,y=I+(b<<21&4294967295|b>>>11),b=p+(I^(y|~A))+k[8]+1873313359&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[15]+4264355552&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[6]+2734768916&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[13]+1309151649&4294967295,y=I+(b<<21&4294967295|b>>>11),b=p+(I^(y|~A))+k[4]+4149444226&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[11]+3174756917&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[2]+718787259&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+p&4294967295,x.g[1]=x.g[1]+(I+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+I&4294967295,x.g[3]=x.g[3]+A&4294967295}r.prototype.u=function(x,p){p===void 0&&(p=x.length);for(var y=p-this.blockSize,k=this.B,I=this.h,A=0;A<p;){if(I==0)for(;A<=y;)s(this,x,A),A+=this.blockSize;if(typeof x=="string"){for(;A<p;)if(k[I++]=x.charCodeAt(A++),I==this.blockSize){s(this,k),I=0;break}}else for(;A<p;)if(k[I++]=x[A++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=p},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var p=1;p<x.length-8;++p)x[p]=0;var y=8*this.o;for(p=x.length-8;p<x.length;++p)x[p]=y&255,y/=256;for(this.u(x),x=Array(16),p=y=0;4>p;++p)for(var k=0;32>k;k+=8)x[y++]=this.g[p]>>>k&255;return x};function i(x,p){var y=l;return Object.prototype.hasOwnProperty.call(y,x)?y[x]:y[x]=p(x)}function a(x,p){this.h=p;for(var y=[],k=!0,I=x.length-1;0<=I;I--){var A=x[I]|0;k&&A==p||(y[I]=A,k=!1)}this.g=y}var l={};function c(x){return-128<=x&&128>x?i(x,function(p){return new a([p|0],0>p?-1:0)}):new a([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return O(d(-x));for(var p=[],y=1,k=0;x>=y;k++)p[k]=x/y|0,y*=4294967296;return new a(p,0)}function m(x,p){if(x.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(x.charAt(0)=="-")return O(m(x.substring(1),p));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(p,8)),k=v,I=0;I<x.length;I+=8){var A=Math.min(8,x.length-I),b=parseInt(x.substring(I,I+A),p);8>A?(A=d(Math.pow(p,A)),k=k.j(A).add(d(b))):(k=k.j(y),k=k.add(d(b)))}return k}var v=c(0),g=c(1),T=c(16777216);t=a.prototype,t.m=function(){if(R(this))return-O(this).m();for(var x=0,p=1,y=0;y<this.g.length;y++){var k=this.i(y);x+=(0<=k?k:4294967296+k)*p,p*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if(R(this))return"-"+O(this).toString(x);for(var p=d(Math.pow(x,6)),y=this,k="";;){var I=P(y,p).g;y=w(y,I.j(p));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(x);if(y=I,N(y))return A+k;for(;6>A.length;)A="0"+A;k=A+k}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(var p=0;p<x.g.length;p++)if(x.g[p]!=0)return!1;return!0}function R(x){return x.h==-1}t.l=function(x){return x=w(this,x),R(x)?-1:N(x)?0:1};function O(x){for(var p=x.g.length,y=[],k=0;k<p;k++)y[k]=~x.g[k];return new a(y,~x.h).add(g)}t.abs=function(){return R(this)?O(this):this},t.add=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0,I=0;I<=p;I++){var A=k+(this.i(I)&65535)+(x.i(I)&65535),b=(A>>>16)+(this.i(I)>>>16)+(x.i(I)>>>16);k=b>>>16,A&=65535,b&=65535,y[I]=b<<16|A}return new a(y,y[y.length-1]&-2147483648?-1:0)};function w(x,p){return x.add(O(p))}t.j=function(x){if(N(this)||N(x))return v;if(R(this))return R(x)?O(this).j(O(x)):O(O(this).j(x));if(R(x))return O(this.j(O(x)));if(0>this.l(T)&&0>x.l(T))return d(this.m()*x.m());for(var p=this.g.length+x.g.length,y=[],k=0;k<2*p;k++)y[k]=0;for(k=0;k<this.g.length;k++)for(var I=0;I<x.g.length;I++){var A=this.i(k)>>>16,b=this.i(k)&65535,me=x.i(I)>>>16,ue=x.i(I)&65535;y[2*k+2*I]+=b*ue,E(y,2*k+2*I),y[2*k+2*I+1]+=A*ue,E(y,2*k+2*I+1),y[2*k+2*I+1]+=b*me,E(y,2*k+2*I+1),y[2*k+2*I+2]+=A*me,E(y,2*k+2*I+2)}for(k=0;k<p;k++)y[k]=y[2*k+1]<<16|y[2*k];for(k=p;k<2*p;k++)y[k]=0;return new a(y,0)};function E(x,p){for(;(x[p]&65535)!=x[p];)x[p+1]+=x[p]>>>16,x[p]&=65535,p++}function S(x,p){this.g=x,this.h=p}function P(x,p){if(N(p))throw Error("division by zero");if(N(x))return new S(v,v);if(R(x))return p=P(O(x),p),new S(O(p.g),O(p.h));if(R(p))return p=P(x,O(p)),new S(O(p.g),p.h);if(30<x.g.length){if(R(x)||R(p))throw Error("slowDivide_ only works with positive integers.");for(var y=g,k=p;0>=k.l(x);)y=D(y),k=D(k);var I=V(y,1),A=V(k,1);for(k=V(k,2),y=V(y,2);!N(k);){var b=A.add(k);0>=b.l(x)&&(I=I.add(y),A=b),k=V(k,1),y=V(y,1)}return p=w(x,I.j(p)),new S(I,p)}for(I=v;0<=x.l(p);){for(y=Math.max(1,Math.floor(x.m()/p.m())),k=Math.ceil(Math.log(y)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),A=d(y),b=A.j(p);R(b)||0<b.l(x);)y-=k,A=d(y),b=A.j(p);N(A)&&(A=g),I=I.add(A),x=w(x,b)}return new S(I,x)}t.A=function(x){return P(this,x).h},t.and=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0;k<p;k++)y[k]=this.i(k)&x.i(k);return new a(y,this.h&x.h)},t.or=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0;k<p;k++)y[k]=this.i(k)|x.i(k);return new a(y,this.h|x.h)},t.xor=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0;k<p;k++)y[k]=this.i(k)^x.i(k);return new a(y,this.h^x.h)};function D(x){for(var p=x.g.length+1,y=[],k=0;k<p;k++)y[k]=x.i(k)<<1|x.i(k-1)>>>31;return new a(y,x.h)}function V(x,p){var y=p>>5;p%=32;for(var k=x.g.length-y,I=[],A=0;A<k;A++)I[A]=0<p?x.i(A+y)>>>p|x.i(A+y+1)<<32-p:x.i(A+y);return new a(I,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hx=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=m,gr=a}).apply(typeof t0<"u"?t0:typeof self<"u"?self:typeof window<"u"?window:{});var Lo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fx,qi,mx,ll,ih,px,gx,yx;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,h,f){return o==Array.prototype||o==Object.prototype||(o[h]=f.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lo=="object"&&Lo];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var _=0;_<o.length-1;_++){var C=o[_];if(!(C in f))break e;f=f[C]}o=o[o.length-1],_=f[o],h=h(_),h!=_&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}function i(o,h){o instanceof String&&(o+="");var f=0,_=!1,C={next:function(){if(!_&&f<o.length){var j=f++;return{value:h(j,o[j]),done:!1}}return _=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(o){return o||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var h=typeof o;return h=h!="object"?h:o?Array.isArray(o)?"array":h:"null",h=="array"||h=="object"&&typeof o.length=="number"}function d(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function m(o,h,f){return o.call.apply(o.bind,arguments)}function v(o,h,f){if(!o)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,_),o.apply(h,C)}}return function(){return o.apply(h,arguments)}}function g(o,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,g.apply(null,arguments)}function T(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),o.apply(this,_)}}function N(o,h){function f(){}f.prototype=h.prototype,o.aa=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Qb=function(_,C,j){for(var U=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)U[pe-2]=arguments[pe];return h.prototype[C].apply(_,U)}}function R(o){const h=o.length;if(0<h){const f=Array(h);for(let _=0;_<h;_++)f[_]=o[_];return f}return[]}function O(o,h){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(c(_)){const C=o.length||0,j=_.length||0;o.length=C+j;for(let U=0;U<j;U++)o[C+U]=_[U]}else o.push(_)}}class w{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(o){return/^[\s\xa0]*$/.test(o)}function S(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function P(o){return P[" "](o),o}P[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(o,h,f){for(const _ in o)h.call(f,o[_],_,o)}function x(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function p(o){const h={};for(const f in o)h[f]=o[f];return h}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(o,h){let f,_;for(let C=1;C<arguments.length;C++){_=arguments[C];for(f in _)o[f]=_[f];for(let j=0;j<y.length;j++)f=y[j],Object.prototype.hasOwnProperty.call(_,f)&&(o[f]=_[f])}}function I(o){var h=1;o=o.split(":");const f=[];for(;0<h&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function A(o){l.setTimeout(()=>{throw o},0)}function b(){var o=G;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class me{constructor(){this.h=this.g=null}add(h,f){const _=ue.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var ue=new w(()=>new Se,o=>o.reset());class Se{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let yt,z=!1,G=new me,K=()=>{const o=l.Promise.resolve(void 0);yt=()=>{o.then(ve)}};var ve=()=>{for(var o;o=b();){try{o.h.call(o.g)}catch(f){A(f)}var h=ue;h.j(o),100>h.h&&(h.h++,o.next=h.g,h.g=o)}z=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Re=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return o}();function Dt(o,h){if(ie.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var f=this.type=o.type,_=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget){if(D){e:{try{P(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:_n[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Dt.aa.h.call(this)}}N(Dt,ie);var _n={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),o1=0;function l1(o,h,f,_,C){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=C,this.key=++o1,this.da=this.fa=!1}function to(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function no(o){this.src=o,this.g={},this.h=0}no.prototype.add=function(o,h,f,_,C){var j=o.toString();o=this.g[j],o||(o=this.g[j]=[],this.h++);var U=Yu(o,h,_,C);return-1<U?(h=o[U],f||(h.fa=!1)):(h=new l1(h,this.src,j,!!_,C),h.fa=f,o.push(h)),h};function Qu(o,h){var f=h.type;if(f in o.g){var _=o.g[f],C=Array.prototype.indexOf.call(_,h,void 0),j;(j=0<=C)&&Array.prototype.splice.call(_,C,1),j&&(to(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function Yu(o,h,f,_){for(var C=0;C<o.length;++C){var j=o[C];if(!j.da&&j.listener==h&&j.capture==!!f&&j.ha==_)return C}return-1}var Xu="closure_lm_"+(1e6*Math.random()|0),Ju={};function ym(o,h,f,_,C){if(Array.isArray(h)){for(var j=0;j<h.length;j++)ym(o,h[j],f,_,C);return null}return f=xm(f),o&&o[xn]?o.K(h,f,d(_)?!!_.capture:!!_,C):u1(o,h,f,!1,_,C)}function u1(o,h,f,_,C,j){if(!h)throw Error("Invalid event type");var U=d(C)?!!C.capture:!!C,pe=ec(o);if(pe||(o[Xu]=pe=new no(o)),f=pe.add(h,f,_,U,j),f.proxy)return f;if(_=c1(),f.proxy=_,_.src=o,_.listener=f,o.addEventListener)Re||(C=U),C===void 0&&(C=!1),o.addEventListener(h.toString(),_,C);else if(o.attachEvent)o.attachEvent(_m(h.toString()),_);else if(o.addListener&&o.removeListener)o.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function c1(){function o(f){return h.call(o.src,o.listener,f)}const h=d1;return o}function vm(o,h,f,_,C){if(Array.isArray(h))for(var j=0;j<h.length;j++)vm(o,h[j],f,_,C);else _=d(_)?!!_.capture:!!_,f=xm(f),o&&o[xn]?(o=o.i,h=String(h).toString(),h in o.g&&(j=o.g[h],f=Yu(j,f,_,C),-1<f&&(to(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete o.g[h],o.h--)))):o&&(o=ec(o))&&(h=o.g[h.toString()],o=-1,h&&(o=Yu(h,f,_,C)),(f=-1<o?h[o]:null)&&Zu(f))}function Zu(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[xn])Qu(h.i,o);else{var f=o.type,_=o.proxy;h.removeEventListener?h.removeEventListener(f,_,o.capture):h.detachEvent?h.detachEvent(_m(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=ec(h))?(Qu(f,o),f.h==0&&(f.src=null,h[Xu]=null)):to(o)}}}function _m(o){return o in Ju?Ju[o]:Ju[o]="on"+o}function d1(o,h){if(o.da)o=!0;else{h=new Dt(h,this);var f=o.listener,_=o.ha||o.src;o.fa&&Zu(o),o=f.call(_,h)}return o}function ec(o){return o=o[Xu],o instanceof no?o:null}var tc="__closure_events_fn_"+(1e9*Math.random()>>>0);function xm(o){return typeof o=="function"?o:(o[tc]||(o[tc]=function(h){return o.handleEvent(h)}),o[tc])}function Ze(){de.call(this),this.i=new no(this),this.M=this,this.F=null}N(Ze,de),Ze.prototype[xn]=!0,Ze.prototype.removeEventListener=function(o,h,f,_){vm(this,o,h,f,_)};function ct(o,h){var f,_=o.F;if(_)for(f=[];_;_=_.F)f.push(_);if(o=o.M,_=h.type||h,typeof h=="string")h=new ie(h,o);else if(h instanceof ie)h.target=h.target||o;else{var C=h;h=new ie(_,o),k(h,C)}if(C=!0,f)for(var j=f.length-1;0<=j;j--){var U=h.g=f[j];C=ro(U,_,!0,h)&&C}if(U=h.g=o,C=ro(U,_,!0,h)&&C,C=ro(U,_,!1,h)&&C,f)for(j=0;j<f.length;j++)U=h.g=f[j],C=ro(U,_,!1,h)&&C}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var o=this.i,h;for(h in o.g){for(var f=o.g[h],_=0;_<f.length;_++)to(f[_]);delete o.g[h],o.h--}}this.F=null},Ze.prototype.K=function(o,h,f,_){return this.i.add(String(o),h,!1,f,_)},Ze.prototype.L=function(o,h,f,_){return this.i.add(String(o),h,!0,f,_)};function ro(o,h,f,_){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,j=0;j<h.length;++j){var U=h[j];if(U&&!U.da&&U.capture==f){var pe=U.listener,We=U.ha||U.src;U.fa&&Qu(o.i,U),C=pe.call(We,_)!==!1&&C}}return C&&!_.defaultPrevented}function wm(o,h,f){if(typeof o=="function")f&&(o=g(o,f));else if(o&&typeof o.handleEvent=="function")o=g(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(o,h||0)}function Em(o){o.g=wm(()=>{o.g=null,o.i&&(o.i=!1,Em(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class h1 extends de{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Em(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vi(o){de.call(this),this.h=o,this.g={}}N(vi,de);var km=[];function Tm(o){V(o.g,function(h,f){this.g.hasOwnProperty(f)&&Zu(h)},o),o.g={}}vi.prototype.N=function(){vi.aa.N.call(this),Tm(this)},vi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nc=l.JSON.stringify,f1=l.JSON.parse,m1=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function rc(){}rc.prototype.h=null;function bm(o){return o.h||(o.h=o.i())}function Im(){}var _i={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sc(){ie.call(this,"d")}N(sc,ie);function ic(){ie.call(this,"c")}N(ic,ie);var Dr={},Sm=null;function so(){return Sm=Sm||new Ze}Dr.La="serverreachability";function Nm(o){ie.call(this,Dr.La,o)}N(Nm,ie);function xi(o){const h=so();ct(h,new Nm(h))}Dr.STAT_EVENT="statevent";function Am(o,h){ie.call(this,Dr.STAT_EVENT,o),this.stat=h}N(Am,ie);function dt(o){const h=so();ct(h,new Am(h,o))}Dr.Ma="timingevent";function Cm(o,h){ie.call(this,Dr.Ma,o),this.size=h}N(Cm,ie);function wi(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},h)}function Ei(){this.g=!0}Ei.prototype.xa=function(){this.g=!1};function p1(o,h,f,_,C,j){o.info(function(){if(o.g)if(j)for(var U="",pe=j.split("&"),We=0;We<pe.length;We++){var le=pe[We].split("=");if(1<le.length){var et=le[0];le=le[1];var tt=et.split("_");U=2<=tt.length&&tt[1]=="type"?U+(et+"="+le+"&"):U+(et+"=redacted&")}}else U=null;else U=j;return"XMLHTTP REQ ("+_+") [attempt "+C+"]: "+h+`
`+f+`
`+U})}function g1(o,h,f,_,C,j,U){o.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+C+"]: "+h+`
`+f+`
`+j+" "+U})}function hs(o,h,f,_){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+v1(o,f)+(_?" "+_:"")})}function y1(o,h){o.info(function(){return"TIMEOUT: "+h})}Ei.prototype.info=function(){};function v1(o,h){if(!o.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(o=0;o<f.length;o++)if(Array.isArray(f[o])){var _=f[o];if(!(2>_.length)){var C=_[1];if(Array.isArray(C)&&!(1>C.length)){var j=C[0];if(j!="noop"&&j!="stop"&&j!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return nc(f)}catch{return h}}var io={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ac;function ao(){}N(ao,rc),ao.prototype.g=function(){return new XMLHttpRequest},ao.prototype.i=function(){return{}},ac=new ao;function $n(o,h,f,_){this.j=o,this.i=h,this.l=f,this.R=_||1,this.U=new vi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pm}function Pm(){this.i=null,this.g="",this.h=!1}var Dm={},oc={};function lc(o,h,f){o.L=1,o.v=co(wn(h)),o.m=f,o.P=!0,jm(o,null)}function jm(o,h){o.F=Date.now(),oo(o),o.A=wn(o.v);var f=o.A,_=o.R;Array.isArray(_)||(_=[String(_)]),Km(f.i,"t",_),o.C=0,f=o.j.J,o.h=new Pm,o.g=hp(o.j,f?h:null,!o.m),0<o.O&&(o.M=new h1(g(o.Y,o,o.g),o.O)),h=o.U,f=o.g,_=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(km[0]=C.toString()),C=km);for(var j=0;j<C.length;j++){var U=ym(f,C[j],_||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=o.H?p(o.H):{},o.m?(o.u||(o.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,h)):(o.u="GET",o.g.ea(o.A,o.u,null,h)),xi(),p1(o.i,o.u,o.A,o.l,o.R,o.m)}$n.prototype.ca=function(o){o=o.target;const h=this.M;h&&En(o)==3?h.j():this.Y(o)},$n.prototype.Y=function(o){try{if(o==this.g)e:{const tt=En(this.g);var h=this.g.Ba();const ps=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||tp(this.g)))){this.J||tt!=4||h==7||(h==8||0>=ps?xi(3):xi(2)),uc(this);var f=this.g.Z();this.X=f;t:if(Vm(this)){var _=tp(this.g);o="";var C=_.length,j=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),ki(this);var U="";break t}this.h.i=new l.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,o+=this.h.i.decode(_[h],{stream:!(j&&h==C-1)});_.length=0,this.h.g+=o,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,g1(this.i,this.u,this.A,this.l,this.R,tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,We=this.g;if((pe=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(pe)){var le=pe;break t}}le=null}if(f=le)hs(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cc(this,f);else{this.o=!1,this.s=3,dt(12),jr(this),ki(this);break e}}if(this.P){f=!0;let Ht;for(;!this.J&&this.C<U.length;)if(Ht=_1(this,U),Ht==oc){tt==4&&(this.s=4,dt(14),f=!1),hs(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Dm){this.s=4,dt(15),hs(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else hs(this.i,this.l,Ht,null),cc(this,Ht);if(Vm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||U.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)hs(this.i,this.l,U,"[Invalid Chunked Response]"),jr(this),ki(this);else if(0<U.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),gc(et),et.M=!0,dt(11))}}else hs(this.i,this.l,U,null),cc(this,U);tt==4&&jr(this),this.o&&!this.J&&(tt==4?lp(this.j,this):(this.o=!1,oo(this)))}else M1(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),jr(this),ki(this)}}}catch{}finally{}};function Vm(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function _1(o,h){var f=o.C,_=h.indexOf(`
`,f);return _==-1?oc:(f=Number(h.substring(f,_)),isNaN(f)?Dm:(_+=1,_+f>h.length?oc:(h=h.slice(_,_+f),o.C=_+f,h)))}$n.prototype.cancel=function(){this.J=!0,jr(this)};function oo(o){o.S=Date.now()+o.I,Mm(o,o.I)}function Mm(o,h){if(o.B!=null)throw Error("WatchDog timer not null");o.B=wi(g(o.ba,o),h)}function uc(o){o.B&&(l.clearTimeout(o.B),o.B=null)}$n.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(y1(this.i,this.A),this.L!=2&&(xi(),dt(17)),jr(this),this.s=2,ki(this)):Mm(this,this.S-o)};function ki(o){o.j.G==0||o.J||lp(o.j,o)}function jr(o){uc(o);var h=o.M;h&&typeof h.ma=="function"&&h.ma(),o.M=null,Tm(o.U),o.g&&(h=o.g,o.g=null,h.abort(),h.ma())}function cc(o,h){try{var f=o.j;if(f.G!=0&&(f.g==o||dc(f.h,o))){if(!o.K&&dc(f.h,o)&&f.G==3){try{var _=f.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var C=_;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<o.F)yo(f),po(f);else break e;pc(f),dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=wi(g(f.Za,f),6e3));if(1>=Fm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Mr(f,11)}else if((o.K||f.g==o)&&yo(f),!E(h))for(C=f.Da.g.parse(h),h=0;h<C.length;h++){let le=C[h];if(f.T=le[0],le=le[1],f.G==2)if(le[0]=="c"){f.K=le[1],f.ia=le[2];const et=le[3];et!=null&&(f.la=et,f.j.info("VER="+f.la));const tt=le[4];tt!=null&&(f.Aa=tt,f.j.info("SVER="+f.Aa));const ps=le[5];ps!=null&&typeof ps=="number"&&0<ps&&(_=1.5*ps,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Ht=o.g;if(Ht){const _o=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_o){var j=_.h;j.g||_o.indexOf("spdy")==-1&&_o.indexOf("quic")==-1&&_o.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(hc(j,j.h),j.h=null))}if(_.D){const yc=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;yc&&(_.ya=yc,_e(_.I,_.D,yc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-o.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var U=o;if(_.qa=dp(_,_.J?_.ia:null,_.W),U.K){Um(_.h,U);var pe=U,We=_.L;We&&(pe.I=We),pe.B&&(uc(pe),oo(pe)),_.g=U}else ap(_);0<f.i.length&&go(f)}else le[0]!="stop"&&le[0]!="close"||Mr(f,7);else f.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Mr(f,7):mc(f):le[0]!="noop"&&f.l&&f.l.ta(le),f.v=0)}}xi(4)}catch{}}var x1=class{constructor(o,h){this.g=o,this.map=h}};function Om(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lm(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Fm(o){return o.h?1:o.g?o.g.size:0}function dc(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function hc(o,h){o.g?o.g.add(h):o.h=h}function Um(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Om.prototype.cancel=function(){if(this.i=zm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function zm(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.D);return h}return R(o.i)}function w1(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var h=[],f=o.length,_=0;_<f;_++)h.push(o[_]);return h}h=[],f=0;for(_ in o)h[f++]=o[_];return h}function E1(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var h=[];o=o.length;for(var f=0;f<o;f++)h.push(f);return h}h=[],f=0;for(const _ in o)h[f++]=_;return h}}}function Bm(o,h){if(o.forEach&&typeof o.forEach=="function")o.forEach(h,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,h,void 0);else for(var f=E1(o),_=w1(o),C=_.length,j=0;j<C;j++)h.call(void 0,_[j],f&&f[j],o)}var $m=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k1(o,h){if(o){o=o.split("&");for(var f=0;f<o.length;f++){var _=o[f].indexOf("="),C=null;if(0<=_){var j=o[f].substring(0,_);C=o[f].substring(_+1)}else j=o[f];h(j,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Vr(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Vr){this.h=o.h,lo(this,o.j),this.o=o.o,this.g=o.g,uo(this,o.s),this.l=o.l;var h=o.i,f=new Ii;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),Hm(this,f),this.m=o.m}else o&&(h=String(o).match($m))?(this.h=!1,lo(this,h[1]||"",!0),this.o=Ti(h[2]||""),this.g=Ti(h[3]||"",!0),uo(this,h[4]),this.l=Ti(h[5]||"",!0),Hm(this,h[6]||"",!0),this.m=Ti(h[7]||"")):(this.h=!1,this.i=new Ii(null,this.h))}Vr.prototype.toString=function(){var o=[],h=this.j;h&&o.push(bi(h,qm,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(bi(h,qm,!0),"@"),o.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&o.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(bi(f,f.charAt(0)=="/"?I1:b1,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",bi(f,N1)),o.join("")};function wn(o){return new Vr(o)}function lo(o,h,f){o.j=f?Ti(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function uo(o,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);o.s=h}else o.s=null}function Hm(o,h,f){h instanceof Ii?(o.i=h,A1(o.i,o.h)):(f||(h=bi(h,S1)),o.i=new Ii(h,o.h))}function _e(o,h,f){o.i.set(h,f)}function co(o){return _e(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Ti(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function bi(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,T1),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function T1(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var qm=/[#\/\?@]/g,b1=/[#\?:]/g,I1=/[#\?]/g,S1=/[#\?@]/g,N1=/#/g;function Ii(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function Hn(o){o.g||(o.g=new Map,o.h=0,o.i&&k1(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ii.prototype,t.add=function(o,h){Hn(this),this.i=null,o=fs(this,o);var f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function Wm(o,h){Hn(o),h=fs(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Gm(o,h){return Hn(o),h=fs(o,h),o.g.has(h)}t.forEach=function(o,h){Hn(this),this.g.forEach(function(f,_){f.forEach(function(C){o.call(h,C,_,this)},this)},this)},t.na=function(){Hn(this);const o=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let _=0;_<h.length;_++){const C=o[_];for(let j=0;j<C.length;j++)f.push(h[_])}return f},t.V=function(o){Hn(this);let h=[];if(typeof o=="string")Gm(this,o)&&(h=h.concat(this.g.get(fs(this,o))));else{o=Array.from(this.g.values());for(let f=0;f<o.length;f++)h=h.concat(o[f])}return h},t.set=function(o,h){return Hn(this),this.i=null,o=fs(this,o),Gm(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=this.V(o),0<o.length?String(o[0]):h):h};function Km(o,h,f){Wm(o,h),0<f.length&&(o.i=null,o.g.set(fs(o,h),R(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var _=h[f];const j=encodeURIComponent(String(_)),U=this.V(_);for(_=0;_<U.length;_++){var C=j;U[_]!==""&&(C+="="+encodeURIComponent(String(U[_]))),o.push(C)}}return this.i=o.join("&")};function fs(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function A1(o,h){h&&!o.j&&(Hn(o),o.i=null,o.g.forEach(function(f,_){var C=_.toLowerCase();_!=C&&(Wm(this,_),Km(this,C,f))},o)),o.j=h}function C1(o,h){const f=new Ei;if(l.Image){const _=new Image;_.onload=T(qn,f,"TestLoadImage: loaded",!0,h,_),_.onerror=T(qn,f,"TestLoadImage: error",!1,h,_),_.onabort=T(qn,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=T(qn,f,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=o}else h(!1)}function R1(o,h){const f=new Ei,_=new AbortController,C=setTimeout(()=>{_.abort(),qn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:_.signal}).then(j=>{clearTimeout(C),j.ok?qn(f,"TestPingServer: ok",!0,h):qn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),qn(f,"TestPingServer: error",!1,h)})}function qn(o,h,f,_,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),_(f)}catch{}}function P1(){this.g=new m1}function D1(o,h,f){const _=f||"";try{Bm(o,function(C,j){let U=C;d(C)&&(U=nc(C)),h.push(_+j+"="+encodeURIComponent(U))})}catch(C){throw h.push(_+"type="+encodeURIComponent("_badmap")),C}}function ho(o){this.l=o.Ub||null,this.j=o.eb||!1}N(ho,rc),ho.prototype.g=function(){return new fo(this.l,this.j)},ho.prototype.i=function(o){return function(){return o}}({});function fo(o,h){Ze.call(this),this.D=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(fo,Ze),t=fo.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=h,this.readyState=1,Ni(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(h.body=o),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Si(this)),this.readyState=0},t.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Ni(this)),this.g&&(this.readyState=3,Ni(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Qm(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function Qm(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}t.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?Si(this):Ni(this),this.readyState==3&&Qm(this)}},t.Ra=function(o){this.g&&(this.response=this.responseText=o,Si(this))},t.Qa=function(o){this.g&&(this.response=o,Si(this))},t.ga=function(){this.g&&Si(this)};function Si(o){o.readyState=4,o.l=null,o.j=null,o.v=null,Ni(o)}t.setRequestHeader=function(o,h){this.u.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function Ni(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function Ym(o){let h="";return V(o,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function fc(o,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=Ym(f),typeof o=="string"?f!=null&&encodeURIComponent(String(f)):_e(o,h,f))}function Ne(o){Ze.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ne,Ze);var j1=/^https?$/i,V1=["POST","PUT"];t=Ne.prototype,t.Ha=function(o){this.J=o},t.ea=function(o,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ac.g(),this.v=this.o?bm(this.o):bm(ac),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(j){Xm(this,j);return}if(o=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var C in _)f.set(C,_[C]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const j of _.keys())f.set(j,_.get(j));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(V1,h,void 0))||_||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,U]of f)this.g.setRequestHeader(j,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ep(this),this.u=!0,this.g.send(o),this.u=!1}catch(j){Xm(this,j)}};function Xm(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.m=5,Jm(o),mo(o)}function Jm(o){o.A||(o.A=!0,ct(o,"complete"),ct(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,ct(this,"complete"),ct(this,"abort"),mo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),mo(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Zm(this):this.bb())},t.bb=function(){Zm(this)};function Zm(o){if(o.h&&typeof a<"u"&&(!o.v[1]||En(o)!=4||o.Z()!=2)){if(o.u&&En(o)==4)wm(o.Ea,0,o);else if(ct(o,"readystatechange"),En(o)==4){o.h=!1;try{const U=o.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=U===0){var C=String(o.D).match($m)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),_=!j1.test(C?C.toLowerCase():"")}f=_}if(f)ct(o,"complete"),ct(o,"success");else{o.m=6;try{var j=2<En(o)?o.g.statusText:""}catch{j=""}o.l=j+" ["+o.Z()+"]",Jm(o)}}finally{mo(o)}}}}function mo(o,h){if(o.g){ep(o);const f=o.g,_=o.v[0]?()=>{}:null;o.g=null,o.v=null,h||ct(o,"ready");try{f.onreadystatechange=_}catch{}}}function ep(o){o.I&&(l.clearTimeout(o.I),o.I=null)}t.isActive=function(){return!!this.g};function En(o){return o.g?o.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),f1(h)}};function tp(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function M1(o){const h={};o=(o.g&&2<=En(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<o.length;_++){if(E(o[_]))continue;var f=I(o[_]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=h[C]||[];h[C]=j,j.push(f)}x(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ai(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function np(o){this.Aa=0,this.i=[],this.j=new Ei,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ai("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ai("baseRetryDelayMs",5e3,o),this.cb=Ai("retryDelaySeedMs",1e4,o),this.Wa=Ai("forwardChannelMaxRetries",2,o),this.wa=Ai("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new Om(o&&o.concurrentRequestLimit),this.Da=new P1,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=np.prototype,t.la=8,t.G=1,t.connect=function(o,h,f,_){dt(0),this.W=o,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=dp(this,null,this.W),go(this)};function mc(o){if(rp(o),o.G==3){var h=o.U++,f=wn(o.I);if(_e(f,"SID",o.K),_e(f,"RID",h),_e(f,"TYPE","terminate"),Ci(o,f),h=new $n(o,o.j,h),h.L=2,h.v=co(wn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=hp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),oo(h)}cp(o)}function po(o){o.g&&(gc(o),o.g.cancel(),o.g=null)}function rp(o){po(o),o.u&&(l.clearTimeout(o.u),o.u=null),yo(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function go(o){if(!Lm(o.h)&&!o.s){o.s=!0;var h=o.Ga;yt||K(),z||(yt(),z=!0),G.add(h,o),o.B=0}}function O1(o,h){return Fm(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=h.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=wi(g(o.Ga,o,h),up(o,o.B)),o.B++,!0)}t.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new $n(this,this.j,o);let j=this.o;if(this.S&&(j?(j=p(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(C.H=j,j=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=ip(this,C,h),f=wn(this.I),_e(f,"RID",o),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Ci(this,f),j&&(this.O?h="headers="+encodeURIComponent(String(Ym(j)))+"&"+h:this.m&&fc(f,this.m,j)),hc(this.h,C),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",h),_e(f,"SID","null"),C.T=!0,lc(C,f,null)):lc(C,f,h),this.G=2}}else this.G==3&&(o?sp(this,o):this.i.length==0||Lm(this.h)||sp(this))};function sp(o,h){var f;h?f=h.l:f=o.U++;const _=wn(o.I);_e(_,"SID",o.K),_e(_,"RID",f),_e(_,"AID",o.T),Ci(o,_),o.m&&o.o&&fc(_,o.m,o.o),f=new $n(o,o.j,f,o.B+1),o.m===null&&(f.H=o.o),h&&(o.i=h.D.concat(o.i)),h=ip(o,f,1e3),f.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),hc(o.h,f),lc(f,_,h)}function Ci(o,h){o.H&&V(o.H,function(f,_){_e(h,_,f)}),o.l&&Bm({},function(f,_){_e(h,_,f)})}function ip(o,h,f){f=Math.min(o.i.length,f);var _=o.l?g(o.l.Na,o.l,o):null;e:{var C=o.i;let j=-1;for(;;){const U=["count="+f];j==-1?0<f?(j=C[0].g,U.push("ofs="+j)):j=0:U.push("ofs="+j);let pe=!0;for(let We=0;We<f;We++){let le=C[We].g;const et=C[We].map;if(le-=j,0>le)j=Math.max(0,C[We].g-100),pe=!1;else try{D1(et,U,"req"+le+"_")}catch{_&&_(et)}}if(pe){_=U.join("&");break e}}}return o=o.i.splice(0,f),h.D=o,_}function ap(o){if(!o.g&&!o.u){o.Y=1;var h=o.Fa;yt||K(),z||(yt(),z=!0),G.add(h,o),o.v=0}}function pc(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=wi(g(o.Fa,o),up(o,o.v)),o.v++,!0)}t.Fa=function(){if(this.u=null,op(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=wi(g(this.ab,this),o)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),po(this),op(this))};function gc(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function op(o){o.g=new $n(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var h=wn(o.qa);_e(h,"RID","rpc"),_e(h,"SID",o.K),_e(h,"AID",o.T),_e(h,"CI",o.F?"0":"1"),!o.F&&o.ja&&_e(h,"TO",o.ja),_e(h,"TYPE","xmlhttp"),Ci(o,h),o.m&&o.o&&fc(h,o.m,o.o),o.L&&(o.g.I=o.L);var f=o.g;o=o.ia,f.L=1,f.v=co(wn(h)),f.m=null,f.P=!0,jm(f,o)}t.Za=function(){this.C!=null&&(this.C=null,po(this),pc(this),dt(19))};function yo(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function lp(o,h){var f=null;if(o.g==h){yo(o),gc(o),o.g=null;var _=2}else if(dc(o.h,h))f=h.D,Um(o.h,h),_=1;else return;if(o.G!=0){if(h.o)if(_==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var C=o.B;_=so(),ct(_,new Cm(_,f)),go(o)}else ap(o);else if(C=h.s,C==3||C==0&&0<h.X||!(_==1&&O1(o,h)||_==2&&pc(o)))switch(f&&0<f.length&&(h=o.h,h.i=h.i.concat(f)),C){case 1:Mr(o,5);break;case 4:Mr(o,10);break;case 3:Mr(o,6);break;default:Mr(o,2)}}}function up(o,h){let f=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(f*=2),f*h}function Mr(o,h){if(o.j.info("Error code "+h),h==2){var f=g(o.fb,o),_=o.Xa;const C=!_;_=new Vr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||lo(_,"https"),co(_),C?C1(_.toString(),f):R1(_.toString(),f)}else dt(2);o.G=0,o.l&&o.l.sa(h),cp(o),rp(o)}t.fb=function(o){o?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function cp(o){if(o.G=0,o.ka=[],o.l){const h=zm(o.h);(h.length!=0||o.i.length!=0)&&(O(o.ka,h),O(o.ka,o.i),o.h.i.length=0,R(o.i),o.i.length=0),o.l.ra()}}function dp(o,h,f){var _=f instanceof Vr?wn(f):new Vr(f);if(_.g!="")h&&(_.g=h+"."+_.g),uo(_,_.s);else{var C=l.location;_=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var j=new Vr(null);_&&lo(j,_),h&&(j.g=h),C&&uo(j,C),f&&(j.l=f),_=j}return f=o.D,h=o.ya,f&&h&&_e(_,f,h),_e(_,"VER",o.la),Ci(o,_),_}function hp(o,h,f){if(h&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Ca&&!o.pa?new Ne(new ho({eb:f})):new Ne(o.pa),h.Ha(o.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function fp(){}t=fp.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vo(){}vo.prototype.g=function(o,h){return new bt(o,h)};function bt(o,h){Ze.call(this),this.g=new np(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(o?o["X-WebChannel-Client-Profile"]=h.va:o={"X-WebChannel-Client-Profile":h.va}),this.g.S=o,(o=h&&h.Sb)&&!E(o)&&(this.g.m=o),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new ms(this)}N(bt,Ze),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){mc(this.g)},bt.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.u&&(f={},f.__data__=nc(o),o=f);h.i.push(new x1(h.Ya++,o)),h.G==3&&go(h)},bt.prototype.N=function(){this.g.l=null,delete this.j,mc(this.g),delete this.g,bt.aa.N.call(this)};function mp(o){sc.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}N(mp,sc);function pp(){ic.call(this),this.status=1}N(pp,ic);function ms(o){this.g=o}N(ms,fp),ms.prototype.ua=function(){ct(this.g,"a")},ms.prototype.ta=function(o){ct(this.g,new mp(o))},ms.prototype.sa=function(o){ct(this.g,new pp)},ms.prototype.ra=function(){ct(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,yx=function(){return new vo},gx=function(){return so()},px=Dr,ih={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},io.NO_ERROR=0,io.TIMEOUT=8,io.HTTP_ERROR=6,ll=io,Rm.COMPLETE="complete",mx=Rm,Im.EventType=_i,_i.OPEN="a",_i.CLOSE="b",_i.ERROR="c",_i.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,qi=Im,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,fx=Ne}).apply(typeof Lo<"u"?Lo:typeof self<"u"?self:typeof window<"u"?window:{});const n0="@firebase/firestore",r0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hi="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new xf("@firebase/firestore");function ys(){return ns.logLevel}function $(t,...e){if(ns.logLevel<=ne.DEBUG){const n=e.map(Rf);ns.debug(`Firestore (${hi}): ${t}`,...n)}}function Fn(t,...e){if(ns.logLevel<=ne.ERROR){const n=e.map(Rf);ns.error(`Firestore (${hi}): ${t}`,...n)}}function Zs(t,...e){if(ns.logLevel<=ne.WARN){const n=e.map(Rf);ns.warn(`Firestore (${hi}): ${t}`,...n)}}function Rf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,vx(t,r,n)}function vx(t,e,n){let r=`FIRESTORE (${hi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fn(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||vx(e,s,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Bn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class c2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class d2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class h2{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Rn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Rn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Rn)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new _x(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new it(e)}}class f2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new f2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class s0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new s0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new s0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=g2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function ah(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Xc(s)===Xc(i)?re(s,i):Xc(s)?1:-1}return re(t.length,e.length)}const y2=55296,v2=57343;function Xc(t){const e=t.charCodeAt(0);return e>=y2&&e<=v2}function ei(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0="__name__";class on{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return on.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof on?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=on.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const r=on.isNumericId(e),s=on.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?on.extractNumericId(e).compare(on.extractNumericId(n)):ah(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gr.fromString(e.substring(4,e.length-2))}}class ge extends on{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const _2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends on{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return _2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===i0}static keyField(){return new Qe([i0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ge.fromString(e))}static fromName(e){return new W(ge.fromString(e).popFirst(5))}static empty(){return new W(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function x2(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function a0(t){if(!W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function o0(t){if(W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wx(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Iu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Iu(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(t,e){const n={typeString:t};return e&&(n.value=e),n}function Ka(t,e){if(!wx(t))throw new B(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=-62135596800,u0=1e6;class Z{static now(){return Z.fromMillis(Date.now())}static fromDate(e){return Z.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*u0);return new Z(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<l0)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u0}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Z._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ka(e,Z._jsonSchema))return new Z(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-l0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Z._jsonSchemaVersion="firestore/timestamp/1.0",Z._jsonSchema={type:Le("string",Z._jsonSchemaVersion),seconds:Le("number"),nanoseconds:Le("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Z(0,0))}static max(){return new X(new Z(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca=-1;function w2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Z(n+1,0):new Z(n,r));return new xr(s,W.empty(),e)}function E2(t){return new xr(t.readTime,t.key,Ca)}class xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xr(X.min(),W.empty(),Ca)}static max(){return new xr(X.max(),W.empty(),Ca)}}function k2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class b2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==T2)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{a[d]=m,++l,l===i&&r(a)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function I2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Su.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Df=-1;function Nu(t){return t==null}function Wl(t){return t===0&&1/t==-1/0}function S2(t){return typeof t=="number"&&Number.isInteger(t)&&!Wl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex="";function N2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=c0(e)),e=A2(t.get(n),e);return c0(e)}function A2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Ex:n+="";break;default:n+=i}}return n}function c0(t){return t+Ex+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Rr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function kx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fo(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fo(this.root,e,this.comparator,!0)}}class Fo{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new Nt([])}unionWith(e){let n=new ze(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Nt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ei(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Tx("Invalid base64 string: "+i):i}}(e);return new Je(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const C2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function wr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=C2.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Er(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx="server_timestamp",Ix="__type__",Sx="__previous_value__",Nx="__local_write_time__";function jf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ix])==null?void 0:r.stringValue)===bx}function Au(t){const e=t.mapValue.fields[Sx];return jf(e)?Au(e):e}function Ra(t){const e=wr(t.mapValue.fields[Nx].timestampValue);return new Z(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,n,r,s,i,a,l,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=m}}const Gl="(default)";class Pa{constructor(e,n){this.projectId=e,this.database=n||Gl}static empty(){return new Pa("","")}get isDefaultDatabase(){return this.database===Gl}isEqual(e){return e instanceof Pa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ax="__type__",Cx="__max__",Uo={mapValue:{fields:{__type__:{stringValue:Cx}}}},Rx="__vector__",Kl="value";function kr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jf(t)?4:D2(t)?9007199254740991:P2(t)?10:11:Y(28295,{value:t})}function vn(t,e){if(t===e)return!0;const n=kr(t);if(n!==kr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ra(t).isEqual(Ra(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=wr(s.timestampValue),l=wr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Er(s.bytesValue).isEqual(Er(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Pe(s.doubleValue),l=Pe(i.doubleValue);return a===l?Wl(a)===Wl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ei(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(d0(a)!==d0(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!vn(a[c],l[c])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Da(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function ti(t,e){if(t===e)return 0;const n=kr(t),r=kr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Pe(i.integerValue||i.doubleValue),c=Pe(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return f0(t.timestampValue,e.timestampValue);case 4:return f0(Ra(t),Ra(e));case 5:return ah(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Er(i),c=Er(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const m=re(l[d],c[d]);if(m!==0)return m}return re(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=re(Pe(i.latitude),Pe(a.latitude));return l!==0?l:re(Pe(i.longitude),Pe(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return m0(t.arrayValue,e.arrayValue);case 10:return function(i,a){var g,T,N,R;const l=i.fields||{},c=a.fields||{},d=(g=l[Kl])==null?void 0:g.arrayValue,m=(T=c[Kl])==null?void 0:T.arrayValue,v=re(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return v!==0?v:m0(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Uo.mapValue&&a===Uo.mapValue)return 0;if(i===Uo.mapValue)return 1;if(a===Uo.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let v=0;v<c.length&&v<m.length;++v){const g=ah(c[v],m[v]);if(g!==0)return g;const T=ti(l[c[v]],d[m[v]]);if(T!==0)return T}return re(c.length,m.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function f0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=wr(t),r=wr(e),s=re(n.seconds,r.seconds);return s!==0?s:re(n.nanos,r.nanos)}function m0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ti(n[s],r[s]);if(i)return i}return re(n.length,r.length)}function ni(t){return oh(t)}function oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Er(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=oh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${oh(n.fields[a])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function ul(t){switch(kr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(t);return e?16+ul(e):16;case 5:return 2*t.stringValue.length;case 6:return Er(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ul(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Rr(r.fields,(i,a)=>{s+=i.length+ul(a)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function p0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function lh(t){return!!t&&"integerValue"in t}function Vf(t){return!!t&&"arrayValue"in t}function g0(t){return!!t&&"nullValue"in t}function y0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cl(t){return!!t&&"mapValue"in t}function P2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Ax])==null?void 0:r.stringValue)===Rx}function aa(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Rr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(t.arrayValue.values[n]);return e}return{...t}}function D2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Cx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=aa(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());cl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];cl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Rr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(aa(this.value))}}function Px(t){const e=[];return Rr(t.fields,(n,r)=>{const s=new Qe([n]);if(cl(r)){const i=Px(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new Nt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new ot(e,0,X.min(),X.min(),X.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new ot(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ot(e,2,n,X.min(),X.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new ot(e,3,n,X.min(),X.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ot&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ot(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n){this.position=e,this.inclusive=n}}function v0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(a.referenceValue),n.key):r=ti(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function _0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function j2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{}class Oe extends Dx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new M2(e,n,r):n==="array-contains"?new F2(e,r):n==="in"?new U2(e,r):n==="not-in"?new z2(e,r):n==="array-contains-any"?new B2(e,r):new Oe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new O2(e,r):new L2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ti(n,this.value)):n!==null&&kr(this.value)===kr(n)&&this.matchesComparison(ti(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends Dx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new nn(e,n)}matches(e){return jx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function jx(t){return t.op==="and"}function Vx(t){return V2(t)&&jx(t)}function V2(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function uh(t){if(t instanceof Oe)return t.field.canonicalString()+t.op.toString()+ni(t.value);if(Vx(t))return t.filters.map(e=>uh(e)).join(",");{const e=t.filters.map(n=>uh(n)).join(",");return`${t.op}(${e})`}}function Mx(t,e){return t instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.field.isEqual(s.field)&&vn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Mx(a,s.filters[l]),!0):!1}(t,e):void Y(19439)}function Ox(t){return t instanceof Oe?function(n){return`${n.field.canonicalString()} ${n.op} ${ni(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(Ox).join(" ,")+"}"}(t):"Filter"}class M2 extends Oe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class O2 extends Oe{constructor(e,n){super(e,"in",n),this.keys=Lx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class L2 extends Oe{constructor(e,n){super(e,"not-in",n),this.keys=Lx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Lx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class F2 extends Oe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vf(n)&&Da(n.arrayValue,this.value)}}class U2 extends Oe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Da(this.value.arrayValue,n)}}class z2 extends Oe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Da(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Da(this.value.arrayValue,n)}}class B2 extends Oe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Da(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function x0(t,e=null,n=[],r=[],s=null,i=null,a=null){return new $2(t,e,n,r,s,i,a)}function Mf(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>uh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Nu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ni(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ni(r)).join(",")),e.Te=n}return e.Te}function Of(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!j2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Mx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_0(t.startAt,e.startAt)&&_0(t.endAt,e.endAt)}function ch(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function H2(t,e,n,r,s,i,a,l){return new pi(t,e,n,r,s,i,a,l)}function Lf(t){return new pi(t)}function w0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Fx(t){return t.collectionGroup!==null}function oa(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ze(Qe.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ja(i,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new ja(Qe.keyField(),r))}return e.Ie}function fn(t){const e=J(t);return e.Ee||(e.Ee=q2(e,oa(t))),e.Ee}function q2(t,e){if(t.limitType==="F")return x0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ja(s.field,i)});const n=t.endAt?new Ql(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ql(t.startAt.position,t.startAt.inclusive):null;return x0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dh(t,e){const n=t.filters.concat([e]);return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function hh(t,e,n){return new pi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cu(t,e){return Of(fn(t),fn(e))&&t.limitType===e.limitType}function Ux(t){return`${Mf(fn(t))}|lt:${t.limitType}`}function vs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Ox(s)).join(", ")}]`),Nu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ni(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ni(s)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Ru(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of oa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=v0(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,oa(r),s)||r.endAt&&!function(a,l,c){const d=v0(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,oa(r),s))}(t,e)}function W2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function zx(t){return(e,n)=>{let r=!1;for(const s of oa(t)){const i=G2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function G2(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?ti(c,d):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Rr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return kx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Ie(W.comparator);function Un(){return K2}const Bx=new Ie(W.comparator);function Wi(...t){let e=Bx;for(const n of t)e=e.insert(n.key,n);return e}function $x(t){let e=Bx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function $r(){return la()}function Hx(){return la()}function la(){return new ls(t=>t.toString(),(t,e)=>t.isEqual(e))}const Q2=new Ie(W.comparator),Y2=new ze(W.comparator);function se(...t){let e=Y2;for(const n of t)e=e.add(n);return e}const X2=new ze(re);function J2(){return X2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wl(e)?"-0":e}}function qx(t){return{integerValue:""+t}}function Z2(t,e){return S2(e)?qx(e):Ff(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(){this._=void 0}}function eN(t,e,n){return t instanceof Yl?function(s,i){const a={fields:{[Ix]:{stringValue:bx},[Nx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&jf(i)&&(i=Au(i)),i&&(a.fields[Sx]=i),{mapValue:a}}(n,e):t instanceof Va?Gx(t,e):t instanceof Ma?Kx(t,e):function(s,i){const a=Wx(s,i),l=E0(a)+E0(s.Ae);return lh(a)&&lh(s.Ae)?qx(l):Ff(s.serializer,l)}(t,e)}function tN(t,e,n){return t instanceof Va?Gx(t,e):t instanceof Ma?Kx(t,e):n}function Wx(t,e){return t instanceof Xl?function(r){return lh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Yl extends Pu{}class Va extends Pu{constructor(e){super(),this.elements=e}}function Gx(t,e){const n=Qx(e);for(const r of t.elements)n.some(s=>vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ma extends Pu{constructor(e){super(),this.elements=e}}function Kx(t,e){let n=Qx(e);for(const r of t.elements)n=n.filter(s=>!vn(s,r));return{arrayValue:{values:n}}}class Xl extends Pu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function E0(t){return Pe(t.integerValue||t.doubleValue)}function Qx(t){return Vf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function nN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Va&&s instanceof Va||r instanceof Ma&&s instanceof Ma?ei(r.elements,s.elements,vn):r instanceof Xl&&s instanceof Xl?vn(r.Ae,s.Ae):r instanceof Yl&&s instanceof Yl}(t.transform,e.transform)}class rN{constructor(e,n){this.version=e,this.transformResults=n}}class Ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function dl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Du{}function Yx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Uf(t.key,Ut.none()):new Qa(t.key,t.data,Ut.none());{const n=t.data,r=xt.empty();let s=new ze(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Pr(t.key,r,new Nt(s.toArray()),Ut.none())}}function sN(t,e,n){t instanceof Qa?function(s,i,a){const l=s.value.clone(),c=T0(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Pr?function(s,i,a){if(!dl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=T0(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(Xx(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ua(t,e,n,r){return t instanceof Qa?function(i,a,l,c){if(!dl(i.precondition,a))return l;const d=i.value.clone(),m=b0(i.fieldTransforms,c,a);return d.setAll(m),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pr?function(i,a,l,c){if(!dl(i.precondition,a))return l;const d=b0(i.fieldTransforms,c,a),m=a.data;return m.setAll(Xx(i)),m.setAll(d),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(i,a,l){return dl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function iN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Wx(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function k0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ei(r,s,(i,a)=>nN(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qa extends Du{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Pr extends Du{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Xx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function T0(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,tN(a,l,n[s]))}return r}function b0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,eN(i,a,e))}return r}class Uf extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aN extends Du{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&sN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ua(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ua(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Hx();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=Yx(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ei(this.mutations,e.mutations,(n,r)=>k0(n,r))&&ei(this.baseMutations,e.baseMutations,(n,r)=>k0(n,r))}}class zf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return Q2}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new zf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ae;function cN(t){switch(t){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function Jx(t){if(t===void 0)return Fn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Ve.OK:return M.OK;case Ve.CANCELLED:return M.CANCELLED;case Ve.UNKNOWN:return M.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return M.INTERNAL;case Ve.UNAVAILABLE:return M.UNAVAILABLE;case Ve.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Ve.NOT_FOUND:return M.NOT_FOUND;case Ve.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Ve.ABORTED:return M.ABORTED;case Ve.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Ve.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:t})}}(ae=Ve||(Ve={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=new gr([4294967295,4294967295],0);function I0(t){const e=dN().encode(t),n=new hx;return n.update(e),new Uint8Array(n.digest())}function S0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new gr([n,r],0),new gr([s,i],0)]}class Bf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gi(`Invalid padding: ${n}`);if(r<0)throw new Gi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(gr.fromNumber(r)));return s.compare(hN)===1&&(s=new gr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=I0(e),[r,s]=S0(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Bf(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=I0(e),[r,s]=S0(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Gi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ya.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new ju(X.min(),s,new Ie(re),Un(),se())}}class Ya{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ya(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Zx{constructor(e,n){this.targetId=e,this.Ce=n}}class ew{constructor(e,n,r=Je.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class N0{constructor(){this.ve=0,this.Fe=A0(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y(38017,{changeType:i})}}),new Ya(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=A0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class fN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Un(),this.Je=zo(),this.He=zo(),this.Ye=new Ie(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(ch(i))if(r===0){const a=new W(i.path);this.et(n,a,ot.newNoDocument(a,X.min()))}else ce(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Er(r).toUint8Array()}catch(c){if(c instanceof Tx)return Zs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Bf(a,s,i)}catch(c){return Zs(c instanceof Gi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&ch(l.target)){const c=new W(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,ot.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.qe())}});let r=se();this.He.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new ju(e,n,this.Ye,this.je,r);return this.je=Un(),this.Je=zo(),this.He=zo(),this.Ye=new Ie(re),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new N0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new N0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function zo(){return new Ie(W.comparator)}function A0(){return new Ie(W.comparator)}const mN={asc:"ASCENDING",desc:"DESCENDING"},pN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gN={and:"AND",or:"OR"};class yN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function fh(t,e){return t.useProto3Json||Nu(e)?e:{value:e}}function Jl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function vN(t,e){return Jl(t,e.toTimestamp())}function mn(t){return ce(!!t,49232),X.fromTimestamp(function(n){const r=wr(n);return new Z(r.seconds,r.nanos)}(t))}function $f(t,e){return mh(t,e).canonicalString()}function mh(t,e){const n=function(s){return new ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nw(t){const e=ge.fromString(t);return ce(ow(e),10190,{key:e.toString()}),e}function ph(t,e){return $f(t.databaseId,e.path)}function Jc(t,e){const n=nw(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(sw(n))}function rw(t,e){return $f(t.databaseId,e)}function _N(t){const e=nw(t);return e.length===4?ge.emptyPath():sw(e)}function gh(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sw(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function C0(t,e,n){return{name:ph(t,e),fields:n.value.mapValue.fields}}function xN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ce(m===void 0||typeof m=="string",58123),Je.fromBase64String(m||"")):(ce(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Je.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const m=d.code===void 0?M.UNKNOWN:Jx(d.code);return new B(m,d.message||"")}(a);n=new ew(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Jc(t,r.document.name),i=mn(r.document.updateTime),a=r.document.createTime?mn(r.document.createTime):X.min(),l=new xt({mapValue:{fields:r.document.fields}}),c=ot.newFoundDocument(s,i,a,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new hl(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Jc(t,r.document),i=r.readTime?mn(r.readTime):X.min(),a=ot.newNoDocument(s,i),l=r.removedTargetIds||[];n=new hl([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Jc(t,r.document),i=r.removedTargetIds||[];n=new hl([],i,s,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new uN(s,i),l=r.targetId;n=new Zx(l,a)}}return n}function wN(t,e){let n;if(e instanceof Qa)n={update:C0(t,e.key,e.value)};else if(e instanceof Uf)n={delete:ph(t,e.key)};else if(e instanceof Pr)n={update:C0(t,e.key,e.data),updateMask:CN(e.fieldMask)};else{if(!(e instanceof aN))return Y(16599,{Vt:e.type});n={verify:ph(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Yl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Va)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ma)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Xl)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:vN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y(27497)}(t,e.precondition)),n}function EN(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?mn(s.updateTime):mn(i);return a.isEqual(X.min())&&(a=mn(i)),new rN(a,s.transformResults||[])}(n,e))):[]}function kN(t,e){return{documents:[rw(t,e.path)]}}function TN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rw(t,s);const i=function(d){if(d.length!==0)return aw(nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:_s(g.field),direction:SN(g.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=fh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function bN(t){let e=_N(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(v){const g=iw(v);return g instanceof nn&&Vx(g)?g.getFilters():[g]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(g=>function(N){return new ja(xs(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(v){let g;return g=typeof v=="object"?v.value:v,Nu(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(v){const g=!!v.before,T=v.values||[];return new Ql(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const g=!v.before,T=v.values||[];return new Ql(T,g)}(n.endAt)),H2(e,s,a,i,l,"F",c,d)}function IN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=xs(n.unaryFilter.field);return Oe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=xs(n.unaryFilter.field);return Oe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xs(n.unaryFilter.field);return Oe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xs(n.unaryFilter.field);return Oe.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Oe.create(xs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>iw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function SN(t){return mN[t]}function NN(t){return pN[t]}function AN(t){return gN[t]}function _s(t){return{fieldPath:t.canonicalString()}}function xs(t){return Qe.fromServerFormat(t.fieldPath)}function aw(t){return t instanceof Oe?function(n){if(n.op==="=="){if(y0(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NAN"}};if(g0(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(y0(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NAN"}};if(g0(n.value))return{unaryFilter:{field:_s(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:_s(n.field),op:NN(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>aw(s));return r.length===1?r[0]:{compositeFilter:{op:AN(n.op),filters:r}}}(t):Y(54877,{filter:t})}function CN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ow(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,r,s,i=X.min(),a=X.min(),l=Je.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.yt=e}}function PN(t){const e=bN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(){this.Cn=new jN}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(xr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(xr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class jN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lw=41943040;class vt{static withCacheSize(e){return new vt(e,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vt.DEFAULT_COLLECTION_PERCENTILE=10,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vt.DEFAULT=new vt(lw,vt.DEFAULT_COLLECTION_PERCENTILE,vt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vt.DISABLED=new vt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ri(0)}static cr(){return new ri(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P0="LruGarbageCollector",VN=1048576;function D0([t,e],[n,r]){const s=re(t,n);return s===0?re(e,r):s}class MN{constructor(e){this.Ir=e,this.buffer=new ze(D0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();D0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ON{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(P0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){mi(n)?$(P0,"Ignoring IndexedDB error during garbage collection: ",n):await fi(n)}await this.Vr(3e5)})}}class LN{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Su.ce);const r=new MN(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(R0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,a,l,c,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,a=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(i=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),ys()<=ne.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${v} documents in `+(d-c)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:v})))}}function FN(t,e){return new LN(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(){this.changes=new ls(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ot.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ua(r.mutation,s,Nt.empty(),Z.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=$r();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=Wi();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=$r();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Un();const a=la(),l=function(){return la()}();return n.forEach((c,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof Pr)?i=i.insert(d.key,d):m!==void 0?(a.set(d.key,m.mutation.getFieldMask()),ua(m.mutation,d,m.mutation.getFieldMask(),Z.now())):a.set(d.key,Nt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>a.set(d,m)),n.forEach((d,m)=>l.set(d,new zN(m,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=la();let s=new Ie((a,l)=>a-l),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=r.get(c)||Nt.empty();m=l.applyToLocalView(d,m),r.set(c,m);const v=(s.get(l.batchId)||se()).add(c);s=s.insert(l.batchId,v)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,m=c.value,v=Hx();m.forEach(g=>{if(!i.has(g)){const T=Yx(n.get(g),r.get(g));T!==null&&v.set(g,T),i=i.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,v))}return L.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return W.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Fx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve($r());let l=Ca,c=i;return a.next(d=>L.forEach(d,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,se())).next(m=>({batchId:l,changes:$x(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Wi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=Wi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,c=>{const d=function(v,g){return new pi(g,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((v,g)=>{a=a.insert(v,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const m=d.getKey();a.get(m)===null&&(a=a.insert(m,ot.newInvalidDocument(m)))});let l=Wi();return a.forEach((c,d)=>{const m=i.get(c);m!==void 0&&ua(m.mutation,d,Nt.empty(),Z.now()),Ru(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:PN(s.bundledQuery),readTime:mn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HN{constructor(){this.overlays=new Ie(W.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=$r();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=$r(),i=n.length+1,a=new W(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ie((d,m)=>d-m);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=$r(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=$r(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new lN(n,r));let i=this.qr.get(n);i===void 0&&(i=se(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this.Qr=new ze(Be.$r),this.Ur=new ze(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Be(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new ge([])),r=new Be(n,e),s=new Be(n,e+1),i=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),i.push(a.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new ge([])),r=new Be(n,e),s=new Be(n,e+1);let i=se();return this.Ur.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new Be(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Be.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new oN(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(a)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Df:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(re);return n.forEach(s=>{const i=new Be(s,0),a=new Be(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const a=new Be(new W(i),0);let l=new ze(re);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},a),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Be(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.ri=e,this.docs=function(){return new Ie(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():ot.newInvalidDocument(n))}getEntries(e,n){let r=Un();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ot.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Un();const a=n.path,l=new W(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||k2(E2(m),r)<=0||(s.has(m.key)||Ru(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KN(this)}getSize(e){return L.resolve(this.size)}}class KN extends UN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.persistence=e,this.si=new ls(n=>Mf(n),Of),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new Hf,this.targetCount=0,this.ai=ri.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new ri(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Su(0),this.li=!1,this.li=!0,this.hi=new qN,this.referenceDelegate=e(this),this.Pi=new QN(this),this.indexManager=new DN,this.remoteDocumentCache=function(s){return new GN(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new RN(n),this.Ii=new $N(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new HN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new WN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new YN(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class YN extends b2{constructor(e){super(),this.currentSequenceNumber=e}}class qf{constructor(e){this.persistence=e,this.Ri=new Hf,this.Vi=null}static mi(e){return new qf(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=W.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Zl{constructor(e,n){this.persistence=e,this.pi=new ls(r=>N2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=FN(this,n)}static mi(e,n){return new Zl(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,i.removeEntry(a,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ul(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Wf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return AT()?8:I2(ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new XN;return this.Ss(e,n,a).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(ys()<=ne.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",vs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(ys()<=ne.DEBUG&&$("QueryEngine","Query:",vs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(ys()<=ne.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",vs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):L.resolve())}ys(e,n){if(w0(n))return L.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=hh(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=se(...i);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,a,c.readTime)?this.ys(e,hh(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return w0(n)||s.isEqual(X.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?L.resolve(null):(ys()<=ne.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),vs(n)),this.vs(e,a,n,w2(s,Ca)).next(l=>l))})}Ds(e,n){let r=new ze(zx(e));return n.forEach((s,i)=>{Ru(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return ys()<=ne.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",vs(n)),this.ps.getDocumentsMatchingQuery(e,n,xr.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="LocalStore",ZN=3e8;class eA{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ie(re),this.xs=new ls(i=>Mf(i),Of),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function tA(t,e,n,r){return new eA(t,e,n,r)}async function cw(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=se();for(const d of s){a.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:a,addedBatchIds:l}))})})}function nA(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,m){const v=d.batch,g=v.keys();let T=L.resolve();return g.forEach(N=>{T=T.next(()=>m.getEntry(c,N)).next(R=>{const O=d.docVersions.get(N);ce(O!==null,48541),R.version.compareTo(O)<0&&(v.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,v))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=se();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function dw(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function rA(t,e){const n=J(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,v)=>{const g=s.get(v);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,v)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Je.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),s=s.insert(v,T),function(R,O,w){return R.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=ZN?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,T,m)&&l.push(n.Pi.updateTargetData(i,T))});let c=Un(),d=se();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(sA(i,a,e.documentUpdates).next(m=>{c=m.ks,d=m.qs})),!r.isEqual(X.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(v=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return L.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function sA(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Un();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):$(Gf,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:a,qs:s}})}function iA(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Df),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aA(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new sr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function yh(t,e,n){const r=J(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!mi(a))throw a;$(Gf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function j0(t,e,n){const r=J(t);let s=X.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,m){const v=J(c),g=v.xs.get(m);return g!==void 0?L.resolve(v.Ms.get(g)):v.Pi.getTargetData(d,m)}(r,a,fn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:X.min(),n?i:se())).next(l=>(oA(r,W2(e),l),{documents:l,Qs:i})))}function oA(t,e,n){let r=t.Os.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class V0{constructor(){this.activeTargetIds=J2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class lA{constructor(){this.Mo=new V0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new V0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M0="ConnectivityMonitor";class O0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(M0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(M0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo=null;function vh(){return Bo===null?Bo=function(){return 268435456+Math.round(2147483648*Math.random())}():Bo++,"0x"+Bo.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zc="RestConnection",cA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class dA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Gl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const a=vh(),l=this.zo(e,n.toUriEncodedString());$(Zc,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),m=ui(d);return this.Jo(e,l,c,r,m).then(v=>($(Zc,`Received RPC '${e}' ${a}: `,v),v),v=>{throw Zs(Zc,`RPC '${e}' ${a} failed with error: `,v,"url: ",l,"request:",r),v})}Ho(e,n,r,s,i,a){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=cA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class fA extends dA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const a=vh();return new Promise((l,c)=>{const d=new fx;d.setWithCredentials(!0),d.listenOnce(mx.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ll.NO_ERROR:const v=d.getResponseJson();$(st,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(v)),l(v);break;case ll.TIMEOUT:$(st,`RPC '${e}' ${a} timed out`),c(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case ll.HTTP_ERROR:const g=d.getStatus();if($(st,`RPC '${e}' ${a} failed with status:`,g,"response text:",d.getResponseText()),g>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T==null?void 0:T.error;if(N&&N.status&&N.message){const R=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(N.status);c(new B(R,N.message))}else c(new B(M.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new B(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{$(st,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(s);$(st,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=vh(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=yx(),l=gx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");$(st,`Creating RPC '${e}' stream ${s}: ${m}`,c);const v=a.createWebChannel(m,c);this.I_(v);let g=!1,T=!1;const N=new hA({Yo:O=>{T?$(st,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(g||($(st,`Opening RPC '${e}' stream ${s} transport.`),v.open(),g=!0),$(st,`RPC '${e}' stream ${s} sending:`,O),v.send(O))},Zo:()=>v.close()}),R=(O,w,E)=>{O.listen(w,S=>{try{E(S)}catch(P){setTimeout(()=>{throw P},0)}})};return R(v,qi.EventType.OPEN,()=>{T||($(st,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),R(v,qi.EventType.CLOSE,()=>{T||(T=!0,$(st,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(v))}),R(v,qi.EventType.ERROR,O=>{T||(T=!0,Zs(st,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),N.a_(new B(M.UNAVAILABLE,"The operation could not be completed")))}),R(v,qi.EventType.MESSAGE,O=>{var w;if(!T){const E=O.data[0];ce(!!E,16349);const S=E,P=(S==null?void 0:S.error)||((w=S[0])==null?void 0:w.error);if(P){$(st,`RPC '${e}' stream ${s} received error:`,P);const D=P.status;let V=function(y){const k=Ve[y];if(k!==void 0)return Jx(k)}(D),x=P.message;V===void 0&&(V=M.INTERNAL,x="Unknown error status: "+D+" with message "+P.message),T=!0,N.a_(new B(V,x)),v.close()}else $(st,`RPC '${e}' stream ${s} received:`,E),N.u_(E)}}),R(l,px.STAT_EVENT,O=>{O.stat===ih.PROXY?$(st,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===ih.NOPROXY&&$(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function ed(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(t){return new yN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="PersistentStream";class fw{constructor(e,n,r,s,i,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new hw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Fn(n.toString()),Fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(L0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(L0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mA extends fw{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=xN(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?X.min():a.readTime?mn(a.readTime):X.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=gh(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=ch(c)?{documents:kN(i,c)}:{query:TN(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=tw(i,a.resumeToken);const d=fh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(X.min())>0){l.readTime=Jl(i,a.snapshotVersion.toTimestamp());const d=fh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=IN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=gh(this.serializer),n.removeTarget=e,this.q_(n)}}class pA extends fw{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=EN(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=gh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{}class yA extends gA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Go(e,mh(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(M.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,mh(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new B(M.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class vA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fn(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="RemoteStore";class _A{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{us(this)&&($(rs,"Restarting streams for network reachability change."),await async function(c){const d=J(c);d.Ea.add(4),await Xa(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Mu(d)}(this))})}),this.Ra=new vA(r,s)}}async function Mu(t){if(us(t))for(const e of t.da)await e(!0)}async function Xa(t){for(const e of t.da)await e(!1)}function mw(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xf(n)?Yf(n):gi(n).O_()&&Qf(n,e))}function Kf(t,e){const n=J(t),r=gi(n);n.Ia.delete(e),r.O_()&&pw(n,e),n.Ia.size===0&&(r.O_()?r.L_():us(n)&&n.Ra.set("Unknown"))}function Qf(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gi(t).Y_(e)}function pw(t,e){t.Va.Ue(e),gi(t).Z_(e)}function Yf(t){t.Va=new fN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),gi(t).start(),t.Ra.ua()}function Xf(t){return us(t)&&!gi(t).x_()&&t.Ia.size>0}function us(t){return J(t).Ea.size===0}function gw(t){t.Va=void 0}async function xA(t){t.Ra.set("Online")}async function wA(t){t.Ia.forEach((e,n)=>{Qf(t,e)})}async function EA(t,e){gw(t),Xf(t)?(t.Ra.ha(e),Yf(t)):t.Ra.set("Unknown")}async function kA(t,e,n){if(t.Ra.set("Online"),e instanceof ew&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){$(rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await eu(t,r)}else if(e instanceof hl?t.Va.Ze(e):e instanceof Zx?t.Va.st(e):t.Va.tt(e),!n.isEqual(X.min()))try{const r=await dw(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(Je.EMPTY_BYTE_STRING,m.snapshotVersion)),pw(i,c);const v=new sr(m.target,c,d,m.sequenceNumber);Qf(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(rs,"Failed to raise snapshot:",r),await eu(t,r)}}async function eu(t,e,n){if(!mi(e))throw e;t.Ea.add(1),await Xa(t),t.Ra.set("Offline"),n||(n=()=>dw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(rs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Mu(t)})}function yw(t,e){return e().catch(n=>eu(t,n,e))}async function Ou(t){const e=J(t),n=Tr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Df;for(;TA(e);)try{const s=await iA(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,bA(e,s)}catch(s){await eu(e,s)}vw(e)&&_w(e)}function TA(t){return us(t)&&t.Ta.length<10}function bA(t,e){t.Ta.push(e);const n=Tr(t);n.O_()&&n.X_&&n.ea(e.mutations)}function vw(t){return us(t)&&!Tr(t).x_()&&t.Ta.length>0}function _w(t){Tr(t).start()}async function IA(t){Tr(t).ra()}async function SA(t){const e=Tr(t);for(const n of t.Ta)e.ea(n.mutations)}async function NA(t,e,n){const r=t.Ta.shift(),s=zf.from(r,e,n);await yw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ou(t)}async function AA(t,e){e&&Tr(t).X_&&await async function(r,s){if(function(a){return cN(a)&&a!==M.ABORTED}(s.code)){const i=r.Ta.shift();Tr(r).B_(),await yw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ou(r)}}(t,e),vw(t)&&_w(t)}async function F0(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),$(rs,"RemoteStore received new credentials");const r=us(n);n.Ea.add(3),await Xa(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Mu(n)}async function CA(t,e){const n=J(t);e?(n.Ea.delete(2),await Mu(n)):e||(n.Ea.add(2),await Xa(n),n.Ra.set("Unknown"))}function gi(t){return t.ma||(t.ma=function(n,r,s){const i=J(n);return i.sa(),new mA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:xA.bind(null,t),t_:wA.bind(null,t),r_:EA.bind(null,t),H_:kA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Xf(t)?Yf(t):t.Ra.set("Unknown")):(await t.ma.stop(),gw(t))})),t.ma}function Tr(t){return t.fa||(t.fa=function(n,r,s){const i=J(n);return i.sa(),new pA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:IA.bind(null,t),r_:AA.bind(null,t),ta:SA.bind(null,t),na:NA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Ou(t)):(await t.fa.stop(),t.Ta.length>0&&($(rs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new Jf(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Zf(t,e){if(Fn("AsyncQueue",`${e}: ${t}`),mi(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{static emptySet(e){return new $s(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Wi(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof $s)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new $s;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(){this.ga=new Ie(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class si{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new si(e,n,$s.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class PA{constructor(){this.queries=z0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=z0(),i.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function z0(){return new ls(t=>Ux(t),Cu)}async function xw(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new RA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Zf(a,`Initialization of query '${vs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&em(n)}async function ww(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(e);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function DA(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&em(n)}function jA(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function em(t){t.Ca.forEach(e=>{e.next()})}var _h,B0;(B0=_h||(_h={})).Ma="default",B0.Cache="cache";class Ew{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new si(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_h.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.key=e}}class Tw{constructor(e){this.key=e}}class VA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=zx(e),this.tu=new $s(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new U0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,v)=>{const g=s.get(m),T=Ru(this.query,v)?v:null,N=!!g&&this.mutatedKeys.has(g.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let O=!1;g&&T?g.data.isEqual(T.data)?N!==R&&(r.track({type:3,doc:T}),O=!0):this.su(g,T)||(r.track({type:2,doc:T}),O=!0,(c&&this.eu(T,c)>0||d&&this.eu(T,d)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),O=!0):g&&!T&&(r.track({type:1,doc:g}),O=!0,(c||d)&&(l=!0)),O&&(T?(a=a.add(T),i=R?i.add(m):i.delete(m)):(a=a.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,v)=>function(T,N){const R=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:O})}};return R(T)-R(N)}(m.type,v.type)||this.eu(m.doc,v.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,a.length!==0||d?{snapshot:new si(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new U0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Tw(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new kw(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return si.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const tm="SyncEngine";class MA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class OA{constructor(e){this.key=e,this.hu=!1}}class LA{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ls(l=>Ux(l),Cu),this.Iu=new Map,this.Eu=new Set,this.du=new Ie(W.comparator),this.Au=new Map,this.Ru=new Hf,this.Vu={},this.mu=new Map,this.fu=ri.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function FA(t,e,n=!0){const r=Cw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await bw(r,e,n,!0),s}async function UA(t,e){const n=Cw(t);await bw(n,e,!0,!1)}async function bw(t,e,n,r){const s=await aA(t.localStore,fn(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await zA(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&mw(t.remoteStore,s),l}async function zA(t,e,n,r,s){t.pu=(v,g,T)=>async function(R,O,w,E){let S=O.view.ru(w);S.Cs&&(S=await j0(R.localStore,O.query,!1).then(({documents:x})=>O.view.ru(x,S)));const P=E&&E.targetChanges.get(O.targetId),D=E&&E.targetMismatches.get(O.targetId)!=null,V=O.view.applyChanges(S,R.isPrimaryClient,P,D);return H0(R,O.targetId,V.au),V.snapshot}(t,v,g,T);const i=await j0(t.localStore,e,!0),a=new VA(e,i.Qs),l=a.ru(i.documents),c=Ya.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);H0(t,n,d.au);const m=new MA(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function BA(t,e,n){const r=J(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Cu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await yh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Kf(r.remoteStore,s.targetId),xh(r,s.targetId)}).catch(fi)):(xh(r,s.targetId),await yh(r.localStore,s.targetId,!0))}async function $A(t,e){const n=J(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Kf(n.remoteStore,r.targetId))}async function HA(t,e,n){const r=XA(t);try{const s=await function(a,l){const c=J(a),d=Z.now(),m=l.reduce((T,N)=>T.add(N.key),se());let v,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let N=Un(),R=se();return c.Ns.getEntries(T,m).next(O=>{N=O,N.forEach((w,E)=>{E.isValidDocument()||(R=R.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,N)).next(O=>{v=O;const w=[];for(const E of l){const S=iN(E,v.get(E.key).overlayedDocument);S!=null&&w.push(new Pr(E.key,S,Px(S.value.mapValue),Ut.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,w,l)}).next(O=>{g=O;const w=O.applyToLocalDocumentSet(v,R);return c.documentOverlayCache.saveOverlays(T,O.batchId,w)})}).then(()=>({batchId:g.batchId,changes:$x(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.Vu[a.currentUser.toKey()];d||(d=new Ie(re)),d=d.insert(l,c),a.Vu[a.currentUser.toKey()]=d}(r,s.batchId,n),await Ja(r,s.changes),await Ou(r.remoteStore)}catch(s){const i=Zf(s,"Failed to persist write");n.reject(i)}}async function Iw(t,e){const n=J(t);try{const r=await rA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ce(a.hu,14607):s.removedDocuments.size>0&&(ce(a.hu,42227),a.hu=!1))}),await Ja(n,r,e)}catch(r){await fi(r)}}function $0(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=J(a);c.onlineState=l;let d=!1;c.queries.forEach((m,v)=>{for(const g of v.Sa)g.va(l)&&(d=!0)}),d&&em(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function qA(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Ie(W.comparator);a=a.insert(i,ot.newNoDocument(i,X.min()));const l=se().add(i),c=new ju(X.min(),new Map,new Ie(re),a,l);await Iw(r,c),r.du=r.du.remove(i),r.Au.delete(e),nm(r)}else await yh(r.localStore,e,!1).then(()=>xh(r,e,n)).catch(fi)}async function WA(t,e){const n=J(t),r=e.batch.batchId;try{const s=await nA(n.localStore,e);Nw(n,r,null),Sw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ja(n,s)}catch(s){await fi(s)}}async function GA(t,e,n){const r=J(t);try{const s=await function(a,l){const c=J(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,l).next(v=>(ce(v!==null,37113),m=v.keys(),c.mutationQueue.removeMutationBatch(d,v))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(r.localStore,e);Nw(r,e,n),Sw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ja(r,s)}catch(s){await fi(s)}}function Sw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Nw(t,e,n){const r=J(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function xh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||Aw(t,r)})}function Aw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Kf(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),nm(t))}function H0(t,e,n){for(const r of n)r instanceof kw?(t.Ru.addReference(r.key,e),KA(t,r)):r instanceof Tw?($(tm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||Aw(t,r.key)):Y(19791,{wu:r})}function KA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(tm,"New document in limbo: "+n),t.Eu.add(r),nm(t))}function nm(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(ge.fromString(e)),r=t.fu.next();t.Au.set(r,new OA(n)),t.du=t.du.insert(n,r),mw(t.remoteStore,new sr(fn(Lf(n.path)),r,"TargetPurposeLimboResolution",Su.ce))}}async function Ja(t,e,n){const r=J(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const v=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(d){s.push(d);const v=Wf.As(c.targetId,d);i.push(v)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,d){const m=J(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>L.forEach(d,g=>L.forEach(g.Es,T=>m.persistence.referenceDelegate.addReference(v,g.targetId,T)).next(()=>L.forEach(g.ds,T=>m.persistence.referenceDelegate.removeReference(v,g.targetId,T)))))}catch(v){if(!mi(v))throw v;$(Gf,"Failed to update sequence numbers: "+v)}for(const v of d){const g=v.targetId;if(!v.fromCache){const T=m.Ms.get(g),N=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(N);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function QA(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){$(tm,"User change. New user:",e.toKey());const r=await cw(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new B(M.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ja(n,r.Ls)}}function YA(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let s=se();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Cw(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Iw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qA.bind(null,e),e.Pu.H_=DA.bind(null,e.eventManager),e.Pu.yu=jA.bind(null,e.eventManager),e}function XA(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GA.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return tA(this.persistence,new JN,e.initialUser,this.serializer)}Cu(e){return new uw(qf.mi,this.serializer)}Du(e){return new lA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class JA extends tu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof Zl,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ON(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?vt.withCacheSize(this.cacheSizeBytes):vt.DEFAULT;return new uw(r=>Zl.mi(r,n),this.serializer)}}class wh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=QA.bind(null,this.syncEngine),await CA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new PA}()}createDatastore(e){const n=Vu(e.databaseInfo.databaseId),r=function(i){return new fA(i)}(e.databaseInfo);return function(i,a,l,c){return new yA(i,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new _A(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>$0(this.syncEngine,n,0),function(){return O0.v()?new O0:new uA}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,m){const v=new LA(s,i,a,l,c,d);return m&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);$(rs,"RemoteStore shutting down."),i.Ea.add(5),await Xa(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}wh.provider={build:()=>new wh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br="FirestoreClient";class ZA{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=Pf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{$(br,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>($(br,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Zf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function td(t,e){t.asyncQueue.verifyOperationInProgress(),$(br,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function q0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eC(t);$(br,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>F0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>F0(e.remoteStore,s)),t._onlineComponents=e}async function eC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(br,"Using user provided OfflineComponentProvider");try{await td(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Zs("Error using user provided cache. Falling back to memory cache: "+n),await td(t,new tu)}}else $(br,"Using default OfflineComponentProvider"),await td(t,new JA(void 0));return t._offlineComponents}async function Pw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(br,"Using user provided OnlineComponentProvider"),await q0(t,t._uninitializedComponentsProvider._online)):($(br,"Using default OnlineComponentProvider"),await q0(t,new wh))),t._onlineComponents}function tC(t){return Pw(t).then(e=>e.syncEngine)}async function Dw(t){const e=await Pw(t),n=e.eventManager;return n.onListen=FA.bind(null,e.syncEngine),n.onUnlisten=BA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=UA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$A.bind(null,e.syncEngine),n}function nC(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const m=new Rw({next:g=>{m.Nu(),a.enqueueAndForget(()=>ww(i,v));const T=g.docs.has(l);!T&&g.fromCache?d.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),v=new Ew(Lf(l.path),m,{includeMetadataChanges:!0,qa:!0});return xw(i,v)}(await Dw(t),t.asyncQueue,e,n,r)),r.promise}function rC(t,e,n={}){const r=new Rn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,d){const m=new Rw({next:g=>{m.Nu(),a.enqueueAndForget(()=>ww(i,v)),g.fromCache&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),v=new Ew(l,m,{includeMetadataChanges:!0,qa:!0});return xw(i,v)}(await Dw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="firestore.googleapis.com",G0=!0;class K0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Vw,this.ssl=G0}else this.host=e.host,this.ssl=e.ssl??G0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<VN)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}x2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Lu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new K0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new K0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new c2;switch(r.type){case"firstParty":return new m2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=W0.get(n);r&&($("ComponentProvider","Removing Datastore"),W0.delete(n),r.terminate())}(this),Promise.resolve()}}function sC(t,e,n,r={}){var d;t=tn(t,Lu);const s=ui(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(T_(`https://${l}`),b_("Firestore",!0)),i.host!==Vw&&i.host!==l&&Zs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Jr(c,a)&&(t._setSettings(c),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=it.MOCK_USER;else{m=xT(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new it(g)}t._authCredentials=new d2(new _x(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class je{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new je(this.firestore,e,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Ka(n,je._jsonSchema))return new je(e,r||null,new W(ge.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Le("string",je._jsonSchemaVersion),referencePath:Le("string")};class yr extends cs{constructor(e,n,r){super(e,n,Lf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new je(this.firestore,null,new W(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function ii(t,e,...n){if(t=qe(t),xx("collection","path",e),t instanceof Lu){const r=ge.fromString(e,...n);return o0(r),new yr(t,null,r)}{if(!(t instanceof je||t instanceof yr))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return o0(r),new yr(t.firestore,null,r)}}function Jt(t,e,...n){if(t=qe(t),arguments.length===1&&(e=Pf.newId()),xx("doc","path",e),t instanceof Lu){const r=ge.fromString(e,...n);return a0(r),new je(t,null,new W(r))}{if(!(t instanceof je||t instanceof yr))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return a0(r),new je(t.firestore,t instanceof yr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="AsyncQueue";class Y0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hw(this,"async_queue_retry"),this._c=()=>{const r=ed();r&&$(Q0,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=ed();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=ed();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Rn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mi(e))throw e;$(Q0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fn("INTERNAL UNHANDLED ERROR: ",X0(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Jf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:X0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function X0(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ds extends Lu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Y0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Y0(e),this._firestoreClient=void 0,await e}}}function iC(t,e){const n=typeof t=="object"?t:A_(),r=typeof t=="string"?t:Gl,s=Ef(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=vT("firestore");i&&sC(s,...i)}return s}function rm(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||aC(t),t._firestoreClient}function aC(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,m){return new R2(l,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,jw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new ZA(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(Je.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ka(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:Le("string",Ot._jsonSchemaVersion),bytes:Le("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(Ka(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:Le("string",pn._jsonSchemaVersion),latitude:Le("number"),longitude:Le("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ka(e,gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gn(e.vectorValues);throw new B(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gn._jsonSchemaVersion="firestore/vectorValue/1.0",gn._jsonSchema={type:Le("string",gn._jsonSchemaVersion),vectorValues:Le("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=/^__.*__$/;class lC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Qa(e,this.data,n,this.fieldTransforms)}}class Mw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Pr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Ow(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class im{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new im({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nu(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ow(this.Ac)&&oC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class uC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Vu(e)}Cc(e,n,r,s=!1){return new im({Ac:e,methodName:n,Dc:r,path:Qe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Uu(t){const e=t._freezeSettings(),n=Vu(t._databaseId);return new uC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Lw(t,e,n,r,s,i={}){const a=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);am("Data must be an object, but it was:",a,r);const l=Fw(r,a);let c,d;if(i.merge)c=new Nt(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const m=[];for(const v of i.mergeFields){const g=Eh(e,v,n);if(!a.contains(g))throw new B(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);zw(m,g)||m.push(g)}c=new Nt(m),d=a.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,d=a.fieldTransforms;return new lC(new xt(l),c,d)}class zu extends sm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zu}}function cC(t,e,n,r){const s=t.Cc(1,e,n);am("Data must be an object, but it was:",s,r);const i=[],a=xt.empty();Rr(r,(c,d)=>{const m=om(e,c,n);d=qe(d);const v=s.yc(m);if(d instanceof zu)i.push(m);else{const g=Za(d,v);g!=null&&(i.push(m),a.set(m,g))}});const l=new Nt(i);return new Mw(a,l,s.fieldTransforms)}function dC(t,e,n,r,s,i){const a=t.Cc(1,e,n),l=[Eh(e,r,n)],c=[s];if(i.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Eh(e,i[g])),c.push(i[g+1]);const d=[],m=xt.empty();for(let g=l.length-1;g>=0;--g)if(!zw(d,l[g])){const T=l[g];let N=c[g];N=qe(N);const R=a.yc(T);if(N instanceof zu)d.push(T);else{const O=Za(N,R);O!=null&&(d.push(T),m.set(T,O))}}const v=new Nt(d);return new Mw(m,v,a.fieldTransforms)}function hC(t,e,n,r=!1){return Za(n,t.Cc(r?4:3,e))}function Za(t,e){if(Uw(t=qe(t)))return am("Unsupported field value:",e,t),Fw(t,e);if(t instanceof sm)return function(r,s){if(!Ow(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Za(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Z2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Z.fromDate(r);return{timestampValue:Jl(s.serializer,i)}}if(r instanceof Z){const i=new Z(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Jl(s.serializer,i)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:tw(s.serializer,r._byteString)};if(r instanceof je){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:$f(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gn)return function(a,l){return{mapValue:{fields:{[Ax]:{stringValue:Rx},[Kl]:{arrayValue:{values:a.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Ff(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Iu(r)}`)}(t,e)}function Fw(t,e){const n={};return kx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rr(t,(r,s)=>{const i=Za(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Uw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Z||t instanceof pn||t instanceof Ot||t instanceof je||t instanceof sm||t instanceof gn)}function am(t,e,n){if(!Uw(n)||!wx(n)){const r=Iu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Eh(t,e,n){if((e=qe(e))instanceof Fu)return e._internalPath;if(typeof e=="string")return om(t,e);throw nu("Field path arguments must be of type string or ",t,!1,void 0,n)}const fC=new RegExp("[~\\*/\\[\\]]");function om(t,e,n){if(e.search(fC)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fu(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function nu(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new B(M.INVALID_ARGUMENT,l+t+c)}function zw(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new mC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class mC extends Bw{data(){return super.data()}}function Bu(t,e){return typeof e=="string"?om(t,e):e instanceof Fu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class lm{}class $w extends lm{}function um(t,e,...n){let r=[];e instanceof lm&&r.push(e),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof dm).length,l=i.filter(c=>c instanceof $u).length;if(a>1||a>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class $u extends $w{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new $u(e,n,r)}_apply(e){const n=this._parse(e);return Hw(e._query,n),new cs(e.firestore,e.converter,dh(e._query,n))}_parse(e){const n=Uu(e.firestore);return function(i,a,l,c,d,m,v){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){Z0(v,m);const N=[];for(const R of v)N.push(J0(c,i,R));g={arrayValue:{values:N}}}else g=J0(c,i,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||Z0(v,m),g=hC(l,a,v,m==="in"||m==="not-in");return Oe.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cm(t,e,n){const r=e,s=Bu("where",t);return $u._create(s,r,n)}class dm extends lm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new dm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)Hw(a,c),a=dh(a,c)}(e._query,n),new cs(e.firestore,e.converter,dh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hm extends $w{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hm(e,n)}_apply(e){const n=function(s,i,a){if(s.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(i,a)}(e._query,this._field,this._direction);return new cs(e.firestore,e.converter,function(s,i){const a=s.explicitOrderBy.concat([i]);return new pi(s.path,s.collectionGroup,a,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ru(t,e="asc"){const n=e,r=Bu("orderBy",t);return hm._create(r,n)}function J0(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fx(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!W.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return p0(t,new W(r))}if(n instanceof je)return p0(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Iu(n)}.`)}function Z0(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Hw(t,e){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class gC{convertValue(e,n="none"){switch(kr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Er(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Rr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Kl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Pe(a.doubleValue));return new gn(n)}convertGeoPoint(e){return new pn(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Au(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ra(e));default:return null}}convertTimestamp(e){const n=wr(e);return new Z(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);ce(ow(r),9688,{name:e});const s=new Pa(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Ki{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends Bw{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Bu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Wr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Wr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wr._jsonSchema={type:Le("string",Wr._jsonSchemaVersion),bundleSource:Le("string","DocumentSnapshot"),bundleName:Le("string"),bundle:Le("string")};class fl extends Wr{data(e={}){return super.data(e)}}class Hs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ki(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new fl(this._firestore,this._userDataWriter,r.key,r,new Ki(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new fl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new fl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ki(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),m=a.indexOf(l.doc.key)),{type:yC(l.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Hs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Pf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function yC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){t=tn(t,je);const e=tn(t.firestore,ds);return nC(rm(e),t._key).then(n=>_C(e,t,n))}Hs._jsonSchemaVersion="firestore/querySnapshot/1.0",Hs._jsonSchema={type:Le("string",Hs._jsonSchemaVersion),bundleSource:Le("string","QuerySnapshot"),bundleName:Le("string"),bundle:Le("string")};class Gw extends gC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new je(this.firestore,null,n)}}function fm(t){t=tn(t,cs);const e=tn(t.firestore,ds),n=rm(e),r=new Gw(e);return pC(t._query),rC(n,t._query).then(s=>new Hs(e,r,t,s))}function Kw(t,e,n){t=tn(t,je);const r=tn(t.firestore,ds),s=qw(t.converter,e);return Hu(r,[Lw(Uu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ut.none())])}function eo(t,e,n,...r){t=tn(t,je);const s=tn(t.firestore,ds),i=Uu(s);let a;return a=typeof(e=qe(e))=="string"||e instanceof Fu?dC(i,"updateDoc",t._key,e,n,r):cC(i,"updateDoc",t._key,e),Hu(s,[a.toMutation(t._key,Ut.exists(!0))])}function vC(t){return Hu(tn(t.firestore,ds),[new Uf(t._key,Ut.none())])}function mm(t,e){const n=tn(t.firestore,ds),r=Jt(t),s=qw(t.converter,e);return Hu(n,[Lw(Uu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ut.exists(!1))]).then(()=>r)}function Hu(t,e){return function(r,s){const i=new Rn;return r.asyncQueue.enqueueAndForget(async()=>HA(await tC(r),s,i)),i.promise}(rm(t),e)}function _C(t,e,n){const r=n.docs.get(e._key),s=new Gw(t);return new Wr(t,s,e._key,r,new Ki(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){hi=s})(ci),Js(new Zr("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new ds(new h2(r.getProvider("auth-internal")),new p2(a,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pa(d.options.projectId,m)}(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),pr(n0,r0,e),pr(n0,r0,"esm2020")})();const xC={apiKey:"AIzaSyAwuGiCbhncNHERF9vOV1wV5QiA3RXdgPk",authDomain:"mesi-takip-web-v1.firebaseapp.com",projectId:"mesi-takip-web-v1",storageBucket:"mesi-takip-web-v1.firebasestorage.app",messagingSenderId:"1061767802586",appId:"1:1061767802586:web:edefb08963448c70b2bfe3",measurementId:"G-75T6X9CPSP"},qu=N_(xC),mt=a2(qu),Ce=iC(qu),pm=qu;typeof window<"u"&&(window.firebase=qu,window.firebaseAuth=mt,window.firebaseDb=Ce,window.auth=mt,window.db=Ce,console.log("🔥 Firebase bound to window object"),console.log("window.firebase:",window.firebase),console.log("window.auth:",window.auth),console.log("window.db:",window.db));const Qw={registerUser:async(t,e,n,r)=>{try{const s=JSON.parse(localStorage.getItem("users")||"[]");if(s.find(l=>l.email===t))return{success:!1,error:"Bu email adresi zaten kullanılıyor"};const a={uid:Date.now().toString(),email:t,password:btoa(e),name:n,startDate:r,employeeType:"normal"};return s.push(a),localStorage.setItem("users",JSON.stringify(s)),{success:!0,user:{uid:a.uid,email:a.email,displayName:a.name}}}catch{return{success:!1,error:"Kayıt sırasında hata oluştu"}}},loginUser:async(t,e)=>{try{const r=JSON.parse(localStorage.getItem("users")||"[]").find(s=>s.email===t&&s.password===btoa(e));return r?{success:!0,user:{uid:r.uid,email:r.email,displayName:r.name}}:{success:!1,error:"Email veya şifre hatalı"}}catch{return{success:!1,error:"Giriş sırasında hata oluştu"}}},logoutUser:async()=>(localStorage.removeItem("currentUser"),{success:!0}),onAuthStateChange:t=>{const e=localStorage.getItem("currentUser");return t(e?JSON.parse(e):null),()=>{}},getCurrentUser:()=>{const t=localStorage.getItem("currentUser");return t?JSON.parse(t):null}},wC=async(t,e,n,r)=>{try{console.log("=== FIREBASE REGISTRATION ATTEMPT ==="),console.log("Email:",t),console.log("Password length:",e.length),console.log("Auth object:",mt),console.log("Firebase app:",mt.app);const s=await HI(mt,t,e);return console.log("✅ Firebase registration successful:",s.user),console.log("User UID:",s.user.uid),console.log("User Email:",s.user.email),console.log("=== END FIREBASE REGISTRATION ==="),{success:!0,user:s.user}}catch(s){return console.error("❌ Firebase registration error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s.code==="auth/network-request-failed"||s.message.includes("ERR_CONNECTION_RESET")?(console.log("🔄 Using localStorage fallback for registration"),n&&r?await Qw.registerUser(t,e,n,r):{success:!1,error:"Firebase bağlantısı kurulamadı. Lütfen internet bağlantınızı kontrol edin."}):{success:!1,error:s.message}}},EC=async(t,e)=>{try{console.log("=== FIREBASE LOGIN ATTEMPT ==="),console.log("Email:",t),console.log("Auth object:",mt);const n=await qI(mt,t,e);return console.log("✅ Firebase login successful:",n.user),console.log("User UID:",n.user.uid),console.log("=== END FIREBASE LOGIN ==="),{success:!0,user:n.user}}catch(n){return console.error("❌ Firebase login error:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),n.code==="auth/network-request-failed"||n.message.includes("ERR_CONNECTION_RESET")?(console.log("🔄 Using localStorage fallback for login"),await Qw.loginUser(t,e)):{success:!1,error:n.message}}},kC=async()=>{try{return await QI(mt),{success:!0}}catch(t){return{success:!1,error:t.message}}},TC=t=>KI(mt,t),ey={async createProfile(t){try{const e=Jt(Ce,"userProfiles",t.uid);return await Kw(e,{...t,createdAt:Z.now(),updatedAt:Z.now()}),!0}catch(e){return console.error("Error creating user profile:",e),!1}},async getProfile(t){try{const e=Jt(Ce,"userProfiles",t),n=await Ww(e);return n.exists()?n.data():null}catch(e){return console.error("Error getting user profile:",e),null}},async updateProfile(t,e){try{const n=Jt(Ce,"userProfiles",t);return await eo(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating user profile:",n),!1}}},bC={theme:"light",language:"tr",notifications:{email:!0,push:!0,overtime:!0,leave:!0,salary:!0},workingHours:{daily:8,weekly:40,monthly:160},overtimeRate:{normal:1.5,weekend:2,holiday:2.5}},IC={async createSettings(t){try{const e=Jt(Ce,"userSettings",t);return await Kw(e,{uid:t,...bC,createdAt:Z.now(),updatedAt:Z.now()}),!0}catch(e){return console.error("Error creating user settings:",e),!1}},async getSettings(t){try{const e=Jt(Ce,"userSettings",t),n=await Ww(e);return n.exists()?n.data():await this.createSettings(t)?await this.getSettings(t):null}catch(e){return console.error("Error getting user settings:",e),null}},async updateSettings(t,e){try{const n=Jt(Ce,"userSettings",t);return await eo(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating user settings:",n),!1}}},Yw=q.createContext(void 0),$t=()=>{const t=q.useContext(Yw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},SC=({children:t})=>{const[e,n]=q.useState(null),[r,s]=q.useState(!0);q.useEffect(()=>{const d=TC(async m=>{var v;if(m){const g=await ey.getProfile(m.uid);if(g){const T={id:g.uid,name:g.name,email:g.email,startDate:g.startDate,employeeType:g.employeeType};n(T)}else{const T={id:m.uid,name:m.displayName||((v=m.email)==null?void 0:v.split("@")[0])||"Kullanıcı",email:m.email||"",startDate:new Date().toISOString().split("T")[0],employeeType:"normal"};n(T)}}else n(null);s(!1)});return()=>d()},[]);const i=async(d,m)=>{s(!0);try{return await EC(d,m)}catch(v){return console.error("Login error:",v),{success:!1,error:"Giriş sırasında bir hata oluştu"}}finally{s(!1)}},a=async(d,m,v,g)=>{s(!0);try{if(v.length<6)return{success:!1,error:"Şifre en az 6 karakter olmalıdır"};const T=await wC(m,v,d,g);if(T.success&&T.user)try{await ey.createProfile({uid:T.user.uid,name:d,email:m,startDate:g,employeeType:"normal"})||console.error("Failed to create user profile"),await IC.createSettings(T.user.uid)||console.error("Failed to create user settings")}catch{console.log("Firebase services not available, using localStorage only")}return T}catch(T){return console.error("Register error:",T),{success:!1,error:"Kayıt sırasında bir hata oluştu"}}finally{s(!1)}},l=async()=>{try{await kC(),n(null)}catch(d){console.error("Logout error:",d)}},c=async d=>{if(!e)return;const m={...e,...d};n(m)};return u.jsx(Yw.Provider,{value:{user:e,login:i,register:a,logout:l,isLoading:r,updateUser:c},children:t})},NC=[{date:"2024-01-01",name:"Yılbaşı",isRecurring:!0},{date:"2024-04-09",name:"Ramazan Bayramı Arifesi",isRecurring:!1},{date:"2024-04-10",name:"Ramazan Bayramı 1. Gün",isRecurring:!1},{date:"2024-04-11",name:"Ramazan Bayramı 2. Gün",isRecurring:!1},{date:"2024-04-12",name:"Ramazan Bayramı 3. Gün",isRecurring:!1},{date:"2024-04-23",name:"Ulusal Egemenlik ve Çocuk Bayramı",isRecurring:!0},{date:"2024-05-01",name:"Emek ve Dayanışma Günü",isRecurring:!0},{date:"2024-05-19",name:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",isRecurring:!0},{date:"2024-06-15",name:"Kurban Bayramı Arifesi",isRecurring:!1},{date:"2024-06-16",name:"Kurban Bayramı 1. Gün",isRecurring:!1},{date:"2024-06-17",name:"Kurban Bayramı 2. Gün",isRecurring:!1},{date:"2024-06-18",name:"Kurban Bayramı 3. Gün",isRecurring:!1},{date:"2024-06-19",name:"Kurban Bayramı 4. Gün",isRecurring:!1},{date:"2024-07-15",name:"Demokrasi ve Milli Birlik Günü",isRecurring:!0},{date:"2024-08-30",name:"Zafer Bayramı",isRecurring:!0},{date:"2024-10-29",name:"Cumhuriyet Bayramı",isRecurring:!0},{date:"2025-01-01",name:"Yılbaşı",isRecurring:!0},{date:"2025-03-29",name:"Ramazan Bayramı Arifesi",isRecurring:!1},{date:"2025-03-30",name:"Ramazan Bayramı 1. Gün",isRecurring:!1},{date:"2025-03-31",name:"Ramazan Bayramı 2. Gün",isRecurring:!1},{date:"2025-04-01",name:"Ramazan Bayramı 3. Gün",isRecurring:!1},{date:"2025-04-23",name:"Ulusal Egemenlik ve Çocuk Bayramı",isRecurring:!0},{date:"2025-05-01",name:"Emek ve Dayanışma Günü",isRecurring:!0},{date:"2025-05-19",name:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",isRecurring:!0},{date:"2025-06-06",name:"Kurban Bayramı Arifesi",isRecurring:!1},{date:"2025-06-07",name:"Kurban Bayramı 1. Gün",isRecurring:!1},{date:"2025-06-08",name:"Kurban Bayramı 2. Gün",isRecurring:!1},{date:"2025-06-09",name:"Kurban Bayramı 3. Gün",isRecurring:!1},{date:"2025-06-10",name:"Kurban Bayramı 4. Gün",isRecurring:!1},{date:"2025-07-15",name:"Demokrasi ve Milli Birlik Günü",isRecurring:!0},{date:"2025-08-30",name:"Zafer Bayramı",isRecurring:!0},{date:"2025-10-29",name:"Cumhuriyet Bayramı",isRecurring:!0},{date:"2026-01-01",name:"Yılbaşı",isRecurring:!0},{date:"2026-03-19",name:"Ramazan Bayramı Arifesi",isRecurring:!1},{date:"2026-03-20",name:"Ramazan Bayramı 1. Gün",isRecurring:!1},{date:"2026-03-21",name:"Ramazan Bayramı 2. Gün",isRecurring:!1},{date:"2026-03-22",name:"Ramazan Bayramı 3. Gün",isRecurring:!1},{date:"2026-04-23",name:"Ulusal Egemenlik ve Çocuk Bayramı",isRecurring:!0},{date:"2026-05-01",name:"Emek ve Dayanışma Günü",isRecurring:!0},{date:"2026-05-19",name:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",isRecurring:!0},{date:"2026-05-27",name:"Kurban Bayramı Arifesi",isRecurring:!1},{date:"2026-05-28",name:"Kurban Bayramı 1. Gün",isRecurring:!1},{date:"2026-05-29",name:"Kurban Bayramı 2. Gün",isRecurring:!1},{date:"2026-05-30",name:"Kurban Bayramı 3. Gün",isRecurring:!1},{date:"2026-05-31",name:"Kurban Bayramı 4. Gün",isRecurring:!1},{date:"2026-07-15",name:"Demokrasi ve Milli Birlik Günü",isRecurring:!0},{date:"2026-08-30",name:"Zafer Bayramı",isRecurring:!0},{date:"2026-10-29",name:"Cumhuriyet Bayramı",isRecurring:!0}],nd={async getAll(t){try{const e=um(ii(Ce,"overtimes"),cm("userId","==",t),ru("date","desc"));return(await fm(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting overtimes:",e),[]}},async add(t){try{return(await mm(ii(Ce,"overtimes"),{...t,createdAt:Z.now(),updatedAt:Z.now()})).id}catch(e){return console.error("Error adding overtime:",e),null}},async update(t,e){try{const n=Jt(Ce,"overtimes",t);return await eo(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating overtime:",n),!1}}},rd={async getAll(t){try{const e=um(ii(Ce,"leaves"),cm("userId","==",t),ru("startDate","desc"));return(await fm(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting leaves:",e),[]}},async add(t){try{return(await mm(ii(Ce,"leaves"),{...t,createdAt:Z.now(),updatedAt:Z.now()})).id}catch(e){return console.error("Error adding leave:",e),null}},async update(t,e){try{const n=Jt(Ce,"leaves",t);return await eo(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating leave:",n),!1}}},$o={async getAll(t){try{const e=um(ii(Ce,"salaries"),cm("userId","==",t),ru("year","desc"),ru("month","desc"));return(await fm(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting salaries:",e),[]}},async add(t){try{return(await mm(ii(Ce,"salaries"),{...t,createdAt:Z.now(),updatedAt:Z.now()})).id}catch(e){return console.error("Error adding salary:",e),null}},async update(t,e){try{const n=Jt(Ce,"salaries",t);return await eo(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating salary:",n),!1}},async delete(t){try{return await vC(Jt(Ce,"salaries",t)),!0}catch(e){return console.error("Error deleting salary:",e),!1}}},Xw=q.createContext(void 0),ss=()=>{const t=q.useContext(Xw);if(t===void 0)throw new Error("useData must be used within a DataProvider");return t},AC=({children:t})=>{const[e,n]=q.useState([]),[r,s]=q.useState([]),[i,a]=q.useState([]),[l,c]=q.useState([]),{user:d}=$t();q.useEffect(()=>{d!=null&&d.id&&m()},[d==null?void 0:d.id]);const m=async()=>{if(d!=null&&d.id)try{const x=await nd.getAll(d.id);s(x);const p=await rd.getAll(d.id);a(p);const y=await $o.getAll(d.id);n(y);const k=localStorage.getItem("holidays");if(k)c(JSON.parse(k));else{const I=NC.map(A=>({...A,id:Date.now().toString()+Math.random().toString(36).slice(2)}));c(I),localStorage.setItem("holidays",JSON.stringify(I))}}catch(x){console.error("Error loading data:",x)}};q.useEffect(()=>{localStorage.setItem("holidays",JSON.stringify(l))},[l]);const v=async x=>{if(d!=null&&d.id)try{const p={...x,userId:d.id},y=await $o.add(p);if(y){const k={...x,id:y,createdAt:new Date().toISOString().split("T")[0]};n(I=>[...I,k])}}catch(p){console.error("Error adding salary:",p)}},g=async(x,p)=>{try{await $o.update(x,p)&&n(k=>k.map(I=>I.id===x?{...I,...p}:I))}catch(y){console.error("Error updating salary:",y)}},T=async x=>{try{await $o.delete(x)&&n(y=>y.filter(k=>k.id!==x))}catch(p){console.error("Error deleting salary:",p)}},N=async x=>{if(d!=null&&d.id)try{const p={...x,userId:d.id},y=await nd.add(p);if(y){const k={...x,id:y};s(I=>[...I,k])}}catch(p){console.error("Error adding overtime:",p)}},R=async(x,p)=>{try{await nd.update(x,p)&&s(k=>k.map(I=>I.id===x?{...I,...p}:I))}catch(y){console.error("Error updating overtime:",y)}},O=x=>{s(p=>p.filter(y=>y.id!==x))},w=async x=>{if(d!=null&&d.id)try{const p={...x,userId:d.id},y=await rd.add(p);if(y){const k={...x,id:y};a(I=>[...I,k])}}catch(p){console.error("Error adding leave:",p)}},E=async(x,p)=>{try{await rd.update(x,p)&&a(k=>k.map(I=>I.id===x?{...I,...p}:I))}catch(y){console.error("Error updating leave:",y)}},S=x=>{a(p=>p.filter(y=>y.id!==x))},P=x=>{const p={...x,id:Date.now().toString()};c(y=>[...y,p])},D=(x,p)=>{c(y=>y.map(k=>k.id===x?{...k,...p}:k))},V=x=>{c(p=>p.filter(y=>y.id!==x))};return u.jsx(Xw.Provider,{value:{salaries:e,addSalary:v,updateSalary:g,deleteSalary:T,overtimes:r,addOvertime:N,updateOvertime:R,deleteOvertime:O,leaves:i,addLeave:w,updateLeave:E,deleteLeave:S,holidays:l,addHoliday:P,updateHoliday:D,deleteHoliday:V},children:t})},CC=({message:t,visible:e})=>e?u.jsx("div",{className:"fixed left-4 bottom-4 z-50 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in-out transition-all",children:t}):null,Jw=q.createContext(void 0),RC=()=>{const t=q.useContext(Jw);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},PC=({children:t})=>{const[e,n]=q.useState({message:"",visible:!1}),r=q.useCallback(s=>{n({message:s,visible:!0}),setTimeout(()=>n({message:"",visible:!1}),2500)},[]);return u.jsxs(Jw.Provider,{value:{showToast:r},children:[t,u.jsx(CC,{message:e.message,visible:e.visible})]})},Zw=q.createContext(void 0),gm=()=>{const t=q.useContext(Zw);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t},DC=({children:t})=>{const[e,n]=q.useState(!1),r=()=>{n(!e)};return u.jsx(Zw.Provider,{value:{isCollapsed:e,setIsCollapsed:n,toggleSidebar:r},children:t})},ty={profile:{name:"",email:"",phone:"",department:"Yazılım Geliştirme",position:"Senior Developer",startDate:"",employeeId:"EMP001"},notifications:{salaryReminder:!0,overtimeApproval:!0,leaveStatus:!0,holidayReminder:!0,emailNotifications:!0,pushNotifications:!1},salary:{defaultNetSalary:"5000.00",defaultHourlyRate:"150.00",currency:"TRY",workingHoursPerDay:"8",workingDaysPerWeek:"5",annualLeaveEntitlement:"14",besContribution:"0"},appearance:{theme:"light",language:"tr",dateFormat:"DD/MM/YYYY",numberFormat:"tr-TR"}},e1=q.createContext(void 0),yi=()=>{const t=q.useContext(e1);if(t===void 0)throw new Error("useSettings must be used within a SettingsProvider");return t},jC=({children:t})=>{const[e,n]=q.useState(ty);q.useEffect(()=>{const l=localStorage.getItem("userSettings");if(l)try{const c=JSON.parse(l);n({...ty,...c})}catch(c){console.error("Ayarlar yüklenirken hata oluştu:",c)}},[]);const r=l=>{try{localStorage.setItem("userSettings",JSON.stringify(l))}catch(c){console.error("Ayarlar kaydedilirken hata oluştu:",c)}},s=()=>{const{theme:l}=e.appearance,c=document.documentElement;l==="dark"||l==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?(c.classList.add("dark"),c.classList.remove("light")):(c.classList.add("light"),c.classList.remove("dark"))};q.useEffect(()=>{if(s(),e.appearance.theme==="auto"){const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>s();return l.addEventListener("change",c),()=>l.removeEventListener("change",c)}},[e.appearance.theme]);const i=(l,c)=>{const d={...e,[l]:{...e[l],...c}};n(d),r(d)},a=l=>{i("appearance",l)};return u.jsx(e1.Provider,{value:{settings:e,updateSettings:i,updateAppearance:a,applyTheme:s},children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var VC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},m)=>q.createElement("svg",{ref:m,...VC,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${MC(t)}`,l].join(" "),...d},[...e.map(([v,g])=>q.createElement(v,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wu=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n1=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r1=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s1=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i1=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=fe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gu=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iu=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ry=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),KC=({onSwitchToRegister:t})=>{const[e,n]=q.useState(""),[r,s]=q.useState(""),[i,a]=q.useState(!1),[l,c]=q.useState(""),{login:d,isLoading:m}=$t(),v=async g=>{if(g.preventDefault(),c(""),!e||!r){c("Lütfen tüm alanları doldurun.");return}const T=await d(e,r);T.success||c(T.error||"Giriş başarısız. Email veya şifre hatalı.")};return u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Giriş Yap"}),u.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Hesabınıza erişim sağlayın"})]}),l&&u.jsx("div",{className:"mb-4 text-red-700 dark:text-red-400 text-base bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-800 p-3 rounded-lg font-semibold text-center",children:l}),u.jsxs("form",{onSubmit:v,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(a1,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"email",type:"email",value:e,onChange:g=>n(g.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"ornek@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(kh,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"password",type:i?"text":"password",value:r,onChange:g=>s(g.target.value),className:"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Şifrenizi girin",required:!0}),u.jsx("button",{type:"button",onClick:()=>a(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:i?u.jsx(s1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):u.jsx(i1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),u.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Giriş yapılıyor...":"Giriş Yap"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Hesabınız yok mu?"," ",u.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors",children:"Kayıt Ol"})]})})]})},QC=({onSwitchToLogin:t})=>{const[e,n]=q.useState({name:"",email:"",password:"",confirmPassword:"",startDate:""}),[r,s]=q.useState(!1),[i,a]=q.useState(""),{register:l,isLoading:c}=$t(),d=v=>{n({...e,[v.target.name]:v.target.value})},m=async v=>{if(v.preventDefault(),a(""),!e.name||!e.email||!e.password||!e.confirmPassword||!e.startDate){a("Lütfen tüm alanları doldurun.");return}if(e.name.length<2){a("Ad soyad en az 2 karakter olmalıdır.");return}if(!e.email.includes("@")){a("Geçerli bir email adresi girin.");return}if(e.password!==e.confirmPassword){a("Şifreler eşleşmiyor.");return}if(e.password.length<6){a("Şifre en az 6 karakter olmalıdır.");return}const g=await l(e.name,e.email,e.password,e.startDate);g.success||a(g.error||"Kayıt başarısız. Bu email adresi zaten kullanılıyor olabilir.")};return u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Kayıt Ol"}),u.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Yeni hesap oluşturun"})]}),u.jsxs("form",{onSubmit:m,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ad Soyad"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(iu,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"name",name:"name",type:"text",value:e.name,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Adınız ve soyadınız",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(a1,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"email",name:"email",type:"email",value:e.email,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"ornek@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İşe Başlama Tarihi"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(rn,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"startDate",name:"startDate",type:"date",value:e.startDate,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(kh,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"password",name:"password",type:r?"text":"password",value:e.password,onChange:d,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"En az 6 karakter",required:!0}),u.jsx("button",{type:"button",onClick:()=>s(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r?u.jsx(s1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):u.jsx(i1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Şifre Tekrar"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(kh,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Şifrenizi tekrar girin",required:!0})]})]}),i&&u.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:i}),u.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Kayıt oluşturuluyor...":"Kayıt Ol"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Zaten hesabınız var mı?"," ",u.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors",children:"Giriş Yap"})]})})]})},YC=()=>{const{user:t,logout:e}=$t(),{isCollapsed:n}=gm();return u.jsx("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-30",children:u.jsxs("div",{className:"flex justify-between items-center h-16 px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("div",{className:"flex-shrink-0",children:u.jsx("h1",{className:`text-xl font-bold text-gray-900 dark:text-white transition-all duration-300 ${n?"md:ml-16":"md:ml-64"}`,children:"Maaş & Çalışma Takibi"})})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:u.jsx(t1,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:u.jsx(iu,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"hidden md:block",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.name}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t==null?void 0:t.email})]})]}),u.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Çıkış Yap",children:u.jsx(BC,{className:"h-5 w-5"})})]})]})]})})},XC=({activeTab:t,onTabChange:e})=>{const{isCollapsed:n,toggleSidebar:r}=gm(),[s,i]=q.useState(!1),[a,l]=q.useState(window.innerWidth);q.useEffect(()=>{const m=()=>{l(window.innerWidth),window.innerWidth>=768&&i(!1)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const c=[{id:"dashboard",label:"Anasayfa",icon:zC},{id:"salary",label:"Maaş Yönetimi",icon:Pn},{id:"overtime",label:"Fazla Mesai",icon:yn},{id:"calendar",label:"Takvim & Tatiller",icon:rn},{id:"leaves",label:"İzin Yönetimi",icon:UC},{id:"calculators",label:"Tazminat Hesapları",icon:Wu},{id:"reports",label:"Raporlar",icon:LC},{id:"settings",label:"Ayarlar",icon:qC}],d=()=>{i(!1)};return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>i(!s),children:s?u.jsx(ry,{className:"h-6 w-6"}):u.jsx($C,{className:"h-6 w-6"})}),u.jsxs("div",{className:`hidden md:block bg-white dark:bg-gray-900 shadow-lg h-full fixed top-0 left-0 transition-all duration-300 ease-in-out z-40 ${n?"w-16":"w-64"}`,children:[u.jsx("button",{onClick:r,className:"absolute -right-3 top-6 bg-white dark:bg-gray-800 rounded-full p-1 shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors z-50",children:n?u.jsx(r1,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}):u.jsx(n1,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),u.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-gray-200 dark:border-gray-700",children:[!n&&u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"₺"})}),u.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mesai Takip"})]}),n&&u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"₺"})})]}),u.jsx("nav",{className:"mt-4 px-2",children:c.map(m=>{const v=m.icon,g=t===m.id;return u.jsxs("button",{onClick:()=>e(m.id),className:`w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 mb-1 group ${g?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-r-2 border-blue-700 dark:border-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,title:n?m.label:void 0,children:[u.jsx(v,{className:`h-5 w-5 ${n?"mx-auto":"mr-3"}`}),!n&&u.jsx("span",{className:"truncate",children:m.label}),n&&u.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white dark:text-gray-200 text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:m.label})]},m.id)})})]}),s&&u.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:d}),u.jsxs("div",{className:`md:hidden fixed top-0 left-0 h-full bg-white dark:bg-gray-900 shadow-lg z-50 transition-transform duration-300 ease-in-out ${s?"translate-x-0":"-translate-x-full"}`,style:{width:"280px"},children:[u.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"₺"})}),u.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mesai Takip"})]}),u.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:u.jsx(ry,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),u.jsx("nav",{className:"mt-4 px-4",children:c.map(m=>{const v=m.icon,g=t===m.id;return u.jsxs("button",{onClick:()=>{e(m.id),d()},className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors mb-1 ${g?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-r-2 border-blue-700 dark:border-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,children:[u.jsx(v,{className:"mr-3 h-5 w-5"}),u.jsx("span",{children:m.label})]},m.id)})})]})]})},qo=({title:t,value:e,change:n,changeType:r="neutral",icon:s,iconColor:i})=>{const a={positive:"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/20",negative:"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20",neutral:"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800"};return u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),n&&u.jsx("p",{className:`text-xs font-medium px-2 py-1 rounded-full inline-block mt-2 ${a[r]}`,children:n})]}),u.jsx("div",{className:`p-3 rounded-lg ${i}`,children:u.jsx(s,{className:"h-6 w-6 text-white"})})]})})},JC=(t,e=0)=>{const n=t*.15,r=t*.00759,s=t*.14,i=t*.01,a=n+r+s+i+e;return Math.max(0,t-a)},ZC=(t,e,n)=>{const r={normal:1.5,weekend:2,holiday:2};return t*e*r[n]},eR=(t,e,n=new Date().toISOString())=>{const r=new Date(e),s=new Date(n),i=Math.floor((s.getTime()-r.getTime())/(1e3*60*60*24)),a=i/365.25,l=t*a,c=l*.00759,d=l-c;return{grossAmount:l,stampTax:c,netAmount:d,workingDays:i}},tR=t=>{if(t.length!==4)throw new Error("Son 4 ayın maaş bilgisi gereklidir");const e=t.reduce((i,a)=>i+a,0)/4,n=e*.6,r=JC(n),s=n-r;return{grossAmount:n,stampTax:s,netAmount:r,averageSalary:e}},ee=t=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2}).format(t),Th=t=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"long",day:"numeric"}).format(new Date(t)),sy=()=>{const{settings:t}=yi(),{user:e}=$t(),{salaries:n,overtimes:r,leaves:s,holidays:i}=ss(),a=y=>["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"].indexOf(y),l=n.filter(y=>y.userId===(e==null?void 0:e.id)),c=r.filter(y=>y.userId===(e==null?void 0:e.id)),d=s.filter(y=>y.userId===(e==null?void 0:e.id)),m=new Date,v=i.filter(y=>new Date(y.date)>m).sort((y,k)=>new Date(y.date).getTime()-new Date(k.date).getTime()).slice(0,3),T=(()=>{const y=new Date,k=y.getMonth(),I=y.getFullYear(),A=c.filter(ie=>{const Re=new Date(ie.date);return Re.getMonth()===k&&Re.getFullYear()===I}),b=A.reduce((ie,Re)=>ie+Re.totalPayment,0),ue=d.filter(ie=>{const Re=new Date(ie.startDate),Dt=new Date(ie.endDate);return Re.getMonth()===k&&Re.getFullYear()===I||Dt.getMonth()===k&&Dt.getFullYear()===I}).filter(ie=>ie.leaveType==="unpaid"&&ie.status==="approved").reduce((ie,Re)=>ie+Re.daysUsed,0),Se=parseFloat(t.salary.defaultNetSalary)||5e3,yt=Se/30,z=ue*yt,G=parseFloat(t.salary.besContribution)||0,K=Se-z+b,ve=K>5e4?.35:K>3e4?.3:K>15e3?.25:.2,de=K/(1-ve);return{baseSalary:Se,overtimePay:b,besContribution:G,grossSalary:de,netSalary:K,overtimeHours:A.reduce((ie,Re)=>ie+Re.hours,0),unpaidLeaveDays:ue,unpaidLeaveDeduction:z}})(),N=l[l.length-1],R=c.reduce((y,k)=>y+k.hours,0),O=c.reduce((y,k)=>y+k.totalPayment,0),w=d.filter(y=>y.status==="approved").reduce((y,k)=>y+k.daysUsed,0),P=(()=>{if(!(e!=null&&e.startDate))return 0;const y=new Date(e.startDate),I=new Date().getFullYear()-y.getFullYear();if(I<1)return 0;const A=parseInt(t.salary.annualLeaveEntitlement)||14;return I*A})()-w,D=()=>{const y=new Date,k=y.getMonth(),I=y.getFullYear(),A=l.find(G=>{const K=new Date(G.year,a(G.month),1);return K.getMonth()===k&&K.getFullYear()===I}),b=k===0?11:k-1,me=k===0?I-1:I,ue=l.find(G=>{const K=new Date(G.year,a(G.month),1);return K.getMonth()===b&&K.getFullYear()===me});if(!A||!ue)return{change:"Veri yok",changeType:"neutral"};const Se=A.netSalary,yt=ue.netSalary,z=(Se-yt)/yt*100;return{change:`${z>=0?"+":""}${z.toFixed(1)}% geçen aya göre`,changeType:z>=0?"positive":"negative"}},V=()=>{const y=new Date().getFullYear(),k=l.filter(ue=>ue.year===y),I=l.filter(ue=>ue.year===y-1);if(k.length===0||I.length===0)return{change:"Veri yok",changeType:"neutral"};const A=k.reduce((ue,Se)=>ue+Se.netSalary,0),b=I.reduce((ue,Se)=>ue+Se.netSalary,0),me=(A-b)/b*100;return{change:`${me>=0?"+":""}${me.toFixed(1)}% geçen yıla göre`,changeType:me>=0?"positive":"negative"}},x=D(),p=V();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Anasayfa"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Maaş ve çalışma durumunuzun özeti"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Son güncellenme"}),u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date().toLocaleDateString("tr-TR")})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-700 dark:to-blue-800 rounded-xl shadow-sm p-6 text-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Pn,{className:"h-8 w-8 text-blue-200 mr-3"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold",children:"Bu Ay Tahmini Maaş"}),u.jsx("p",{className:"text-blue-100",children:"Güncel ay için tahmini geliriniz"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-3xl font-bold",children:ee(T.netSalary)}),u.jsx("p",{className:"text-blue-200 text-sm",children:"Net Maaş"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mt-6",children:[u.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-blue-200 text-sm",children:"Taban Maaş"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.baseSalary)})]}),u.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-green-200 text-sm",children:"Fazla Mesai"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.overtimePay)}),u.jsxs("p",{className:"text-green-200 text-xs",children:[T.overtimeHours," saat"]})]}),T.unpaidLeaveDays>0&&u.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-red-200 text-sm",children:"Ücretsiz İzin"}),u.jsxs("p",{className:"text-xl font-semibold",children:["-",ee(T.unpaidLeaveDeduction)]}),u.jsxs("p",{className:"text-red-200 text-xs",children:[T.unpaidLeaveDays," gün"]})]}),u.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-purple-200 text-sm",children:"BES Katkısı"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.besContribution)})]}),u.jsxs("div",{className:"bg-orange-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-orange-200 text-sm",children:"Brüt Maaş"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.grossSalary)})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(qo,{title:"Bu Ayın Maaşı",value:ee((N==null?void 0:N.netSalary)||T.netSalary),change:x.change,changeType:x.changeType,icon:Pn,iconColor:"bg-blue-600"}),u.jsx(qo,{title:"Toplam Fazla Mesai",value:`${R} saat`,change:ee(O),changeType:"positive",icon:yn,iconColor:"bg-green-600"}),u.jsx(qo,{title:"Kullanılan İzin",value:`${w} gün`,change:`${P} gün kaldı`,changeType:"neutral",icon:rn,iconColor:"bg-orange-600"}),u.jsx(qo,{title:"Yıllık Toplam",value:ee(l.reduce((y,k)=>y+k.netSalary,0)),change:p.change,changeType:p.changeType,icon:su,iconColor:"bg-purple-600"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Son Maaş Ödemeleri"}),u.jsx("div",{className:"space-y-3",children:l.length>0?l.slice(-3).reverse().map(y=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[y.month," ",y.year]}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Net: ",ee(y.netSalary)]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400",children:ee(y.netSalary)}),y.bonus>0&&u.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["+",ee(y.bonus)," ikramiye"]})]})]},y.id)):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Pn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz maaş verisi girilmemiş"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Maaş yönetimi bölümünden maaş verilerinizi girebilirsiniz"})]})})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Son Fazla Mesailer"}),u.jsx("div",{className:"space-y-3",children:c.length>0?c.slice(-3).reverse().map(y=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(y.date).toLocaleDateString("tr-TR")}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.hours," saat - ",y.overtimeType==="normal"?"Normal":y.overtimeType==="weekend"?"Hafta Sonu":"Tatil"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400",children:ee(y.totalPayment)}),u.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ee(y.hourlyRate),"/saat"]})]})]},y.id)):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(yn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz fazla mesai kaydı yok"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Fazla mesai bölümünden mesai kayıtlarınızı girebilirsiniz"})]})})]})]}),u.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 dark:from-green-700 dark:to-green-800 rounded-xl shadow-sm p-6 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Yaklaşan Tatiller"}),v.length>0?u.jsx("div",{className:"space-y-2",children:v.map((y,k)=>u.jsxs("p",{className:"text-green-100",children:[k===0?"Bir sonraki tatil: ":`${k+1}. `,u.jsxs("span",{className:"font-medium",children:[new Date(y.date).toLocaleDateString("tr-TR")," - ",y.name]})]},y.id))}):u.jsx("p",{className:"text-green-100",children:u.jsx("span",{className:"font-medium",children:"Henüz tatil eklenmemiş"})})]}),u.jsx(rn,{className:"h-12 w-12 text-green-200"})]})})]})},nR=()=>{const{salaries:t,leaves:e,addSalary:n,deleteSalary:r}=ss(),{user:s}=$t(),{settings:i}=yi(),[a,l]=q.useState(!1),[c,d]=q.useState(!1);q.useState(null);const[m,v]=q.useState("24457"),[g,T]=q.useState(i.salary.besContribution||"500"),[N,R]=q.useState({month:"Ocak",year:2025,netSalary:"",bonus:"",besDeduction:i.salary.besContribution||"500"}),O=t.filter(E=>E.userId===(s==null?void 0:s.id)),w=()=>{const E=parseFloat(m),S=parseFloat(g),P=new Date,D=P.getMonth(),V=P.getFullYear(),y=e.filter(b=>b.userId===(s==null?void 0:s.id)).filter(b=>{const me=new Date(b.startDate),ue=new Date(b.endDate);return me.getMonth()===D&&me.getFullYear()===V||ue.getMonth()===D&&ue.getFullYear()===V}).filter(b=>b.leaveType==="unpaid"&&b.status==="approved").reduce((b,me)=>b+me.daysUsed,0),k=E/30,I=y*k,A=E-I;return{gross:(A+S)/.75,net:A,unpaidLeaveDays:y,unpaidLeaveDeduction:I}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Maaş Yönetimi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Maaş bilgilerinizi yönetin ve hesaplayın"})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("button",{onClick:()=>d(!c),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[u.jsx(Wu,{className:"h-4 w-4 mr-2"}),"Brüt/Net Hesapla"]}),u.jsxs("button",{onClick:()=>l(!a),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Maaş Ekle"]})]})]}),c&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Net/Brüt Maaş Hesaplayıcı"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Net Maaş (₺)"}),u.jsx("input",{type:"number",value:m,onChange:E=>v(E.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"24457"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"BES Kesintisi (₺)"}),u.jsx("input",{type:"number",value:g,onChange:E=>T(E.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:i.salary.besContribution||"500"})]}),u.jsx("div",{className:"flex items-end",children:u.jsxs("div",{className:"w-full p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[u.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Brüt Maaş"}),u.jsx("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:ee(w().gross)})]})})]}),w().unpaidLeaveDays>0&&u.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Ücretsiz İzin Kesintisi"}),u.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[w().unpaidLeaveDays," gün ücretsiz izin = -",ee(w().unpaidLeaveDeduction)]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Düzeltilmiş Net Maaş"}),u.jsx("p",{className:"text-lg font-bold text-red-800 dark:text-red-200",children:ee(w().net)})]})]})})]}),a&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni Maaş Bilgisi Ekle"}),u.jsxs("form",{onSubmit:E=>{if(E.preventDefault(),!s)return;const S=parseFloat(N.netSalary),P=parseFloat(N.besDeduction),D=(S+P)/.75,V={userId:s.id,month:N.month,year:N.year,netSalary:S,grossSalary:D,bonus:parseFloat(N.bonus)||0,besDeduction:P};n(V),l(!1),R({month:"Ocak",year:2025,netSalary:"",bonus:"",besDeduction:i.salary.besContribution||"500"})},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ay"}),u.jsxs("select",{value:N.month,onChange:E=>R({...N,month:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"Ocak",children:"Ocak"}),u.jsx("option",{value:"Şubat",children:"Şubat"}),u.jsx("option",{value:"Mart",children:"Mart"}),u.jsx("option",{value:"Nisan",children:"Nisan"}),u.jsx("option",{value:"Mayıs",children:"Mayıs"}),u.jsx("option",{value:"Haziran",children:"Haziran"}),u.jsx("option",{value:"Temmuz",children:"Temmuz"}),u.jsx("option",{value:"Ağustos",children:"Ağustos"}),u.jsx("option",{value:"Eylül",children:"Eylül"}),u.jsx("option",{value:"Ekim",children:"Ekim"}),u.jsx("option",{value:"Kasım",children:"Kasım"}),u.jsx("option",{value:"Aralık",children:"Aralık"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yıl"}),u.jsx("input",{type:"number",value:N.year,onChange:E=>R({...N,year:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",min:"2020",max:"2030"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Net Maaş (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:N.netSalary,onChange:E=>R({...N,netSalary:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"24457",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İkramiye (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:N.bonus,onChange:E=>R({...N,bonus:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"BES Kesintisi (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:N.besDeduction,onChange:E=>R({...N,besDeduction:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:i.salary.besContribution||"500"})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kaydet"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Maaş Geçmişi"}),u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Pn,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",ee(O.reduce((E,S)=>E+S.netSalary,0))]})]})})]}),O.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Dönem"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Net Maaş"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Brüt Maaş"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"İkramiye"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"BES"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"İşlemler"})]})}),u.jsx("tbody",{children:O.map(E=>u.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[u.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-white",children:[E.month," ",E.year]}),u.jsx("td",{className:"py-3 px-4 font-semibold text-green-600 dark:text-green-400",children:ee(E.netSalary)}),u.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:ee(E.grossSalary)}),u.jsx("td",{className:"py-3 px-4 text-blue-600 dark:text-blue-400",children:E.bonus>0?ee(E.bonus):"-"}),u.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:ee(E.besDeduction)}),u.jsx("td",{className:"py-3 px-4",children:u.jsx("button",{onClick:()=>r(E.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(Ku,{className:"h-4 w-4"})})})]},E.id))})]})}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Pn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz maaş verisi girilmemiş"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "Maaş Ekle" butonunu kullanarak maaş verilerinizi girebilirsiniz'})]})]})]})},rR=()=>{const{overtimes:t,addOvertime:e,deleteOvertime:n}=ss(),{user:r}=$t(),{settings:s}=yi(),[i,a]=q.useState(!1);q.useState(null);const[l,c]=q.useState({date:"",hours:"",overtimeType:"normal",hourlyRate:s.salary.defaultHourlyRate||"150.00"}),d=t.filter(T=>T.userId===(r==null?void 0:r.id)),m=T=>{if(T.preventDefault(),!r)return;const N=ZC(parseFloat(l.hours),parseFloat(l.hourlyRate),l.overtimeType),R={userId:r.id,date:l.date,hours:parseFloat(l.hours),overtimeType:l.overtimeType,hourlyRate:parseFloat(l.hourlyRate),totalPayment:N};e(R),a(!1),c({date:"",hours:"",overtimeType:"normal",hourlyRate:s.salary.defaultHourlyRate||"150.00"})},v=T=>({normal:"Normal Gün",weekend:"Hafta Sonu",holiday:"Resmi Tatil"})[T],g=T=>({normal:"1.5x",weekend:"2.0x",holiday:"2.0x"})[T];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Fazla Mesai Takibi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fazla mesai saatlerinizi kaydedin ve takip edin"})]}),u.jsxs("button",{onClick:()=>a(!i),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Mesai Ekle"]})]}),i&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni Fazla Mesai Ekle"}),u.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tarih"}),u.jsx("input",{type:"date",value:l.date,onChange:T=>c({...l,date:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Saat"}),u.jsx("input",{type:"number",step:"0.5",value:l.hours,onChange:T=>c({...l,hours:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"8.0",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mesai Türü"}),u.jsxs("select",{value:l.overtimeType,onChange:T=>c({...l,overtimeType:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"normal",children:"Normal Gün (1.5x)"}),u.jsx("option",{value:"weekend",children:"Hafta Sonu (2.0x)"}),u.jsx("option",{value:"holiday",children:"Resmi Tatil (2.0x)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Saatlik Ücret"}),u.jsx("input",{type:"number",step:"0.01",value:l.hourlyRate,onChange:T=>c({...l,hourlyRate:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:s.salary.defaultHourlyRate||"133.33"})]}),u.jsxs("div",{className:"md:col-span-4 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kaydet"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Fazla Mesai Geçmişi"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(yn,{className:"h-5 w-5 text-blue-600"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",d.reduce((T,N)=>T+N.hours,0)," saat"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(rn,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",d.reduce((T,N)=>T+N.totalPayment,0).toLocaleString("tr-TR")," ₺"]})]})]})]}),d.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Tarih"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Saat"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Tür"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Saatlik Ücret"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Toplam"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"İşlemler"})]})}),u.jsx("tbody",{children:d.map(T=>u.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[u.jsx("td",{className:"py-3 px-4",children:u.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(T.date).toLocaleDateString("tr-TR")})}),u.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-white",children:[T.hours," saat"]}),u.jsx("td",{className:"py-3 px-4",children:u.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${T.overtimeType==="normal"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":T.overtimeType==="weekend"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[v(T.overtimeType)," (",g(T.overtimeType),")"]})}),u.jsxs("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:[T.hourlyRate.toLocaleString("tr-TR")," ₺/saat"]}),u.jsxs("td",{className:"py-3 px-4 font-semibold text-green-600 dark:text-green-400",children:[T.totalPayment.toLocaleString("tr-TR")," ₺"]}),u.jsx("td",{className:"py-3 px-4",children:u.jsx("button",{onClick:()=>n(T.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(Ku,{className:"h-4 w-4"})})})]},T.id))})]})}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(yn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz fazla mesai kaydı yok"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "Mesai Ekle" butonunu kullanarak fazla mesai kaydı oluşturabilirsiniz'})]})]})]})},sR=()=>{const{holidays:t,addHoliday:e,deleteHoliday:n}=ss(),{overtimes:r,leaves:s}=ss(),{user:i}=$t(),[a,l]=q.useState(new Date),[c,d]=q.useState(!1);q.useState(null);const[m,v]=q.useState({date:"",name:"",isRecurring:!1}),g=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],T=["Pzt","Sal","Çar","Per","Cum","Cmt","Paz"],N=p=>{const y=p.getFullYear(),k=p.getMonth(),I=new Date(y,k,1),b=new Date(y,k+1,0).getDate(),me=(I.getDay()+6)%7,ue=[];for(let Se=0;Se<me;Se++)ue.push(null);for(let Se=1;Se<=b;Se++)ue.push(new Date(y,k,Se));return ue},R=p=>{if(!p)return!1;const y=p.toISOString().split("T")[0];return t.some(k=>k.date===y)},O=p=>{if(!p)return"";const y=p.toISOString().split("T")[0],k=t.find(I=>I.date===y);return(k==null?void 0:k.name)||""},w=p=>{if(!p)return!1;const y=p.getDay();return y===0||y===6},E=p=>{l(y=>{const k=new Date(y);return p==="prev"?k.setMonth(y.getMonth()-1):k.setMonth(y.getMonth()+1),k})},S=p=>{p.preventDefault(),e(m),d(!1),v({date:"",name:"",isRecurring:!1})},P=r.filter(p=>p.userId===(i==null?void 0:i.id)),D=s.filter(p=>p.userId===(i==null?void 0:i.id)),V=p=>{if(!p)return{holiday:null,leave:null,overtime:null};const y=p.toISOString().split("T")[0],k=t.find(b=>b.date===y),I=D.find(b=>{const me=new Date(b.startDate),ue=new Date(b.endDate);return p>=me&&p<=ue}),A=P.find(b=>b.date===y);return{holiday:k,leave:I,overtime:A}},x=N(a);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Takvim & Tatiller"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Resmi tatilleri görüntüleyin ve yönetin"})]}),u.jsxs("button",{onClick:()=>d(!c),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Gu,{className:"h-4 w-4 mr-2"}),"Tatil Ekle"]})]}),c&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni Tatil Ekle"}),u.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tarih"}),u.jsx("input",{type:"date",value:m.date,onChange:p=>v({...m,date:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tatil Adı"}),u.jsx("input",{type:"text",value:m.name,onChange:p=>v({...m,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Örn: Kurban Bayramı",required:!0})]}),u.jsx("div",{className:"flex items-end",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:m.isRecurring,onChange:p=>v({...m,isRecurring:p.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Her yıl tekrar et"})]})}),u.jsxs("div",{className:"md:col-span-3 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kaydet"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("button",{onClick:()=>E("prev"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:u.jsx(n1,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),u.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[g[a.getMonth()]," ",a.getFullYear()]}),u.jsx("button",{onClick:()=>E("next"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:u.jsx(r1,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),u.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:T.map(p=>u.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:p},p))}),u.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((p,y)=>{const k=V(p);return u.jsx("div",{className:`min-h-[80px] p-2 border border-gray-100 dark:border-gray-600 rounded-lg ${p?"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600":"bg-gray-50 dark:bg-gray-800"} ${R(p)?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":""} ${w(p)&&!R(p)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,children:p&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`text-sm font-medium ${R(p)?"text-red-700 dark:text-red-400":w(p)?"text-blue-700 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:p.getDate()}),R(p)&&u.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1 leading-tight",children:O(p)}),u.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[k.holiday&&u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mx-auto",title:k.holiday.name}),k.leave&&u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mx-auto",title:"İzin"}),k.overtime&&u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mx-auto",title:"Mesai"})]})]})},y)})}),u.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-6 text-sm",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-4 h-4 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resmi Tatil"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-4 h-4 bg-blue-100 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Hafta Sonu"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-4 h-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Çalışma Günü"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Mesai Günü"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx(rn,{className:"h-6 w-6 text-blue-600 mr-3"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tatiller"})]}),t.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(p=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:p.name}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Th(p.date)})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[p.isRecurring&&u.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400 px-2 py-1 rounded-full",children:"Yıllık"}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${new Date(p.date)>new Date?"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400":"bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-300"}`,children:new Date(p.date)>new Date?"Yaklaşan":"Geçmiş"}),u.jsx("button",{onClick:()=>n(p.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(Ku,{className:"h-4 w-4"})})]})]},p.id))}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(rn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz tatil eklenmemiş"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "Tatil Ekle" butonunu kullanarak tatil ekleyebilirsiniz'})]})]})]})},iR=()=>{const{leaves:t,addLeave:e,deleteLeave:n}=ss(),{user:r}=$t(),{settings:s}=yi(),[i,a]=q.useState(!1);q.useState(null);const[l,c]=q.useState({startDate:"",endDate:"",reason:"",leaveType:"annual"}),d=t.filter(D=>D.userId===(r==null?void 0:r.id)),m=(D,V)=>{if(!D||!V)return 0;const x=new Date(D),p=new Date(V),y=Math.abs(p.getTime()-x.getTime());return Math.ceil(y/(1e3*60*60*24))+1},g=(()=>{if(!(r!=null&&r.startDate))return 0;const D=new Date(r.startDate),V=new Date,x=V.getFullYear()-D.getFullYear();if(V.getMonth()-D.getMonth(),x<1)return 0;const p=parseInt(s.salary.annualLeaveEntitlement)||14;return x*p})(),T=d.filter(D=>(D.leaveType||"annual")==="annual").reduce((D,V)=>D+V.daysUsed,0),N=g-T,R=D=>{if(D.preventDefault(),!r)return;const V=m(l.startDate,l.endDate),x={userId:r.id,startDate:l.startDate,endDate:l.endDate,daysUsed:V,status:"approved",reason:l.reason,leaveType:l.leaveType};e(x),a(!1),c({startDate:"",endDate:"",reason:"",leaveType:"annual"})},O=D=>{switch(D){case"approved":return u.jsx(ny,{className:"h-5 w-5 text-green-600"});case"rejected":return u.jsx(GC,{className:"h-5 w-5 text-red-600"});default:return u.jsx(yn,{className:"h-5 w-5 text-yellow-600"})}},w=D=>{switch(D){case"approved":return"Onaylandı";case"rejected":return"Reddedildi";default:return"Beklemede"}},E=D=>{switch(D){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},S=D=>{switch(D){case"paid":return"Ücretli İzin";case"unpaid":return"Ücretsiz İzin";case"annual":return"Yıllık İzin";case"maternity":return"Doğum İzni";case"bereavement":return"Ölüm İzni";case"administrative":return"İdari İzin";default:return"Diğer"}},P=D=>{switch(D){case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"unpaid":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"annual":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"maternity":return"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400";case"bereavement":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";case"administrative":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"İzin Yönetimi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"İzin taleplerinizi yönetin ve takip edin"})]}),u.jsxs("button",{onClick:()=>a(!i),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Gu,{className:"h-4 w-4 mr-2"}),"İzin Talebi"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(rn,{className:"h-8 w-8 text-blue-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Toplam İzin Hakkı"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g," gün"]})]})]})}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(ny,{className:"h-8 w-8 text-green-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Kullanılan İzin"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[T," gün"]})]})]})}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(yn,{className:"h-8 w-8 text-orange-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Kalan İzin"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[N," gün"]})]})]})})]}),g===0&&u.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(yn,{className:"h-5 w-5 text-yellow-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Yıllık İzin Hakkı"}),u.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:u.jsx("p",{children:"Henüz 1 yıllık çalışma sürenizi tamamlamadığınız için yıllık izin hakkınız bulunmamaktadır. İşe başlama tarihinizden itibaren 1 yıl geçtikten sonra yıllık izin talep edebilirsiniz."})})]})]})}),i&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni İzin Talebi"}),u.jsxs("form",{onSubmit:R,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Başlangıç Tarihi"}),u.jsx("input",{type:"date",value:l.startDate,onChange:D=>c({...l,startDate:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bitiş Tarihi"}),u.jsx("input",{type:"date",value:l.endDate,onChange:D=>c({...l,endDate:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İzin Türü"}),u.jsxs("select",{value:l.leaveType,onChange:D=>c({...l,leaveType:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0,children:[u.jsx("option",{value:"paid",children:"Ücretli İzin (Para Kesmez)"}),u.jsx("option",{value:"unpaid",children:"Ücretsiz İzin (Para Keser)"}),g>0&&u.jsx("option",{value:"annual",children:"Yıllık İzin (Para Kesmez)"}),u.jsx("option",{value:"maternity",children:"Doğum İzni (Para Kesmez)"}),u.jsx("option",{value:"bereavement",children:"Ölüm İzni (Para Kesmez)"}),u.jsx("option",{value:"administrative",children:"İdari İzin (Para Kesmez)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İzin Nedeni"}),u.jsx("textarea",{value:l.reason,onChange:D=>c({...l,reason:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",rows:3,placeholder:"İzin nedeninizi açıklayın...",required:!0})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Talep Et"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"İzin Geçmişi"}),d.length>0?u.jsx("div",{className:"space-y-4",children:d.map(D=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[O(D.status),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S(D.leaveType||"annual")}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Th(D.startDate)," - ",Th(D.endDate)," (",D.daysUsed," gün)"]}),D.reason&&u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:D.reason})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P(D.leaveType||"annual")}`,children:S(D.leaveType||"annual")}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${E(D.status)}`,children:w(D.status)}),u.jsx("button",{onClick:()=>n(D.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(Ku,{className:"h-4 w-4"})})]})]},D.id))}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(rn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz izin talebi bulunmuyor"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "İzin Talebi" butonunu kullanarak izin talep edebilirsiniz'})]})]})]})},aR=()=>{const{salaries:t,overtimes:e,leaves:n}=ss(),{user:r}=$t();yi();const[s,i]=q.useState("2025"),[a,l]=q.useState("salary"),c=t.filter(w=>w.userId===(r==null?void 0:r.id)),d=e.filter(w=>w.userId===(r==null?void 0:r.id)),m=n.filter(w=>w.userId===(r==null?void 0:r.id)),v=()=>{const w=c.filter(A=>A.year.toString()===s),E=w.reduce((A,b)=>A+b.grossSalary,0),S=w.reduce((A,b)=>A+b.netSalary,0),P=w.reduce((A,b)=>A+b.bonus,0),V=m.filter(A=>new Date(A.startDate).getFullYear().toString()===s&&A.leaveType==="unpaid"&&A.status==="approved").reduce((A,b)=>A+b.daysUsed,0),x=S/(w.length*30)||0,p=V*x,y=S-p,k=E/w.length||0,I=y/w.length||0;return{totalGross:E,totalNet:y,totalBonus:P,avgGross:k,avgNet:I,monthCount:w.length,totalUnpaidLeaveDays:V,totalUnpaidLeaveDeduction:p}},g=()=>{const w=d.reduce((V,x)=>V+x.hours,0),E=d.reduce((V,x)=>V+x.totalPayment,0),S=d.filter(V=>V.overtimeType==="normal").reduce((V,x)=>V+x.hours,0),P=d.filter(V=>V.overtimeType==="weekend").reduce((V,x)=>V+x.hours,0),D=d.filter(V=>V.overtimeType==="holiday").reduce((V,x)=>V+x.hours,0);return{totalHours:w,totalPayment:E,normalHours:S,weekendHours:P,holidayHours:D,avgHourlyRate:E/w||0}},T=v(),N=g(),R=(()=>{const w=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];return w.map(E=>{const S=c.filter(x=>x.month===E&&x.year.toString()===s),P=d.filter(x=>{const p=new Date(x.date);return p.getMonth()===w.indexOf(E)&&p.getFullYear().toString()===s}),D=S.reduce((x,p)=>x+p.netSalary,0),V=P.reduce((x,p)=>x+p.totalPayment,0);return{month:E,salary:D,overtime:V,total:D+V}}).filter(E=>E.total>0)})(),O=w=>{console.log(`Exporting ${w} report for ${s}`),alert(`${w} raporu Excel formatında indiriliyor...`)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Raporlar ve Analiz"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gelir ve çalışma verilerinizi analiz edin"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"2024",children:"2024"}),u.jsx("option",{value:"2025",children:"2025"}),u.jsx("option",{value:"2026",children:"2026"})]}),u.jsxs("button",{onClick:()=>O(a),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[u.jsx(FC,{className:"h-4 w-4 mr-2"}),"Dışa Aktar"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsxs("button",{onClick:()=>l("salary"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="salary"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[u.jsx(Pn,{className:"h-4 w-4 mr-2 inline"}),"Maaş Raporu"]}),u.jsxs("button",{onClick:()=>l("overtime"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${a==="overtime"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[u.jsx(yn,{className:"h-4 w-4 mr-2 inline"}),"Fazla Mesai Raporu"]})]}),a==="salary"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Yıllık Toplam"}),u.jsx(Pn,{className:"h-6 w-6 text-blue-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(T.totalNet)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Net Gelir"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ortalama Aylık"}),u.jsx(su,{className:"h-6 w-6 text-green-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(T.avgNet)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Net Ortalama"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Toplam İkramiye"}),u.jsx(rn,{className:"h-6 w-6 text-purple-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(T.totalBonus)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Yıllık İkramiye"})]}),T.totalUnpaidLeaveDays>0&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-red-800 dark:text-red-200",children:"Ücretsiz İzin"}),u.jsx(rn,{className:"h-6 w-6 text-red-600"})]}),u.jsxs("p",{className:"text-3xl font-bold text-red-800 dark:text-red-200",children:["-",ee(T.totalUnpaidLeaveDeduction)]}),u.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[T.totalUnpaidLeaveDays," gün kesinti"]})]})]}),a==="overtime"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Toplam Saat"}),u.jsx(yn,{className:"h-6 w-6 text-blue-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:N.totalHours}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Fazla Mesai Saati"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Toplam Kazanç"}),u.jsx(Pn,{className:"h-6 w-6 text-green-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(N.totalPayment)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Fazla Mesai Ücreti"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ortalama Saatlik"}),u.jsx(su,{className:"h-6 w-6 text-purple-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(N.avgHourlyRate)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Saatlik Ücret"})]})]})]}),R.length>0&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Aylık Gelir Trendi"}),u.jsx("div",{className:"space-y-3",children:R.map((w,E)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 text-sm font-medium text-gray-900 dark:text-white",children:w.month}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Maaş: ",ee(w.salary)]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Fazla Mesai: ",ee(w.overtime)]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ee(w.total)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam"})]})]},E))})]})]})},oR=()=>{const{user:t,updateUser:e}=$t(),{showToast:n}=RC(),{settings:r,updateSettings:s,updateAppearance:i}=yi(),[a,l]=q.useState("profile"),c=async w=>{w==="profile"?(await e({name:r.profile.name,email:r.profile.email,startDate:r.profile.startDate}),n("Profil ayarları kaydedildi!")):n(w==="notifications"?"Bildirim ayarları kaydedildi!":w==="salary"?"Maaş ayarları kaydedildi!":w==="appearance"?"Görünüm ayarları kaydedildi!":`${w} ayarları kaydedildi!`)},d=(w,E)=>{i({[w]:E})},m=[{id:"profile",label:"Profil Bilgileri",icon:iu},{id:"notifications",label:"Bildirimler",icon:t1},{id:"salary",label:"Maaş Ayarları",icon:Wu},{id:"appearance",label:"Görünüm",icon:HC},{id:"security",label:"Güvenlik",icon:WC}],v=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center",children:u.jsx(iu,{className:"h-10 w-10 text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.profile.name}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.profile.position}),u.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-1",children:"Profil fotoğrafını değiştir"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ad Soyad"}),u.jsx("input",{type:"text",value:r.profile.name,onChange:w=>s("profile",{name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-posta"}),u.jsx("input",{type:"email",value:r.profile.email,onChange:w=>s("profile",{email:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefon"}),u.jsx("input",{type:"tel",value:r.profile.phone,onChange:w=>s("profile",{phone:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"+90 555 123 45 67"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Departman"}),u.jsxs("select",{value:r.profile.department,onChange:w=>s("profile",{department:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{children:"Yazılım Geliştirme"}),u.jsx("option",{children:"İnsan Kaynakları"}),u.jsx("option",{children:"Pazarlama"}),u.jsx("option",{children:"Satış"}),u.jsx("option",{children:"Muhasebe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pozisyon"}),u.jsx("input",{type:"text",value:r.profile.position,onChange:w=>s("profile",{position:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İşe Başlama Tarihi"}),u.jsx("input",{type:"date",value:r.profile.startDate,onChange:w=>s("profile",{startDate:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("profile"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]}),g=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Bildirim Tercihleri"}),u.jsx("div",{className:"space-y-4",children:Object.entries(r.notifications).map(([w,E])=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[w==="salaryReminder"&&"Maaş Günü Hatırlatıcısı",w==="overtimeApproval"&&"Fazla Mesai Onayları",w==="leaveStatus"&&"İzin Durumu Güncellemeleri",w==="holidayReminder"&&"Tatil Hatırlatıcıları",w==="emailNotifications"&&"E-posta Bildirimleri",w==="pushNotifications"&&"Push Bildirimleri"]}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w==="salaryReminder"&&"Maaş ödeme günü yaklaştığında bildirim al",w==="overtimeApproval"&&"Fazla mesai onaylandığında bildirim al",w==="leaveStatus"&&"İzin talebinizin durumu değiştiğinde bildirim al",w==="holidayReminder"&&"Yaklaşan resmi tatiller için bildirim al",w==="emailNotifications"&&"Tüm bildirimleri e-posta ile al",w==="pushNotifications"&&"Tarayıcı push bildirimleri"]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:E,onChange:S=>s("notifications",{[w]:S.target.checked}),className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},w))})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("notifications"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]}),T=()=>{const w=(P,D,V)=>{const x=parseFloat(P)||0,p=parseFloat(D)||8,y=parseFloat(V)||5;if(x===0||p===0||y===0)return"0";const k=p*30;return(x/k).toFixed(2)},E=P=>{const D=w(P,r.salary.workingHoursPerDay,r.salary.workingDaysPerWeek);s("salary",{defaultNetSalary:P,defaultHourlyRate:D})},S=(P,D)=>{const V={[P]:D},x=w(r.salary.defaultNetSalary,P==="workingHoursPerDay"?D:r.salary.workingHoursPerDay,P==="workingDaysPerWeek"?D:r.salary.workingDaysPerWeek);V.defaultHourlyRate=x,s("salary",V)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Maaş ve Çalışma Ayarları"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Varsayılan Net Maaş (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:r.salary.defaultNetSalary,onChange:P=>E(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"5000.00"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Bu değer değiştiğinde saatlik ücret otomatik hesaplanır"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hesaplanan Saatlik Ücret (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:r.salary.defaultHourlyRate,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white cursor-not-allowed"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Otomatik hesaplanır"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Para Birimi"}),u.jsxs("select",{value:r.salary.currency,onChange:P=>s("salary",{currency:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"TRY",children:"Türk Lirası (₺)"}),u.jsx("option",{value:"USD",children:"Amerikan Doları ($)"}),u.jsx("option",{value:"EUR",children:"Euro (€)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Günlük Çalışma Saati"}),u.jsx("input",{type:"number",value:r.salary.workingHoursPerDay,onChange:P=>S("workingHoursPerDay",P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Haftalık Çalışma Günü"}),u.jsx("input",{type:"number",value:r.salary.workingDaysPerWeek,onChange:P=>S("workingDaysPerWeek",P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yıllık İzin Hakkı (Gün)"}),u.jsx("input",{type:"number",value:r.salary.annualLeaveEntitlement,onChange:P=>s("salary",{annualLeaveEntitlement:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"BES Katkısı (₺)"}),u.jsx("input",{type:"number",value:r.salary.besContribution,onChange:P=>s("salary",{besContribution:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("salary"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]})},N=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Görünüm ve Dil Ayarları"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tema"}),u.jsxs("select",{value:r.appearance.theme,onChange:w=>d("theme",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"light",children:"Açık Tema"}),u.jsx("option",{value:"dark",children:"Koyu Tema"}),u.jsx("option",{value:"auto",children:"Sistem Ayarı"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dil"}),u.jsxs("select",{value:r.appearance.language,onChange:w=>d("language",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"tr",children:"Türkçe"}),u.jsx("option",{value:"en",children:"English"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tarih Formatı"}),u.jsxs("select",{value:r.appearance.dateFormat,onChange:w=>d("dateFormat",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),u.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),u.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sayı Formatı"}),u.jsxs("select",{value:r.appearance.numberFormat,onChange:w=>d("numberFormat",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"tr-TR",children:"Türkiye (1.234,56)"}),u.jsx("option",{value:"en-US",children:"ABD (1,234.56)"})]})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("appearance"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Ho,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]}),R=()=>u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Güvenlik Ayarları"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Şifre Değiştir"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Hesabınızın güvenliği için düzenli olarak şifrenizi değiştirin."}),u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Şifre Değiştir"})]}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"İki Faktörlü Kimlik Doğrulama"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Hesabınıza ek güvenlik katmanı ekleyin."}),u.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Etkinleştir"})]}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Aktif Oturumlar"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Hesabınıza bağlı aktif oturumları görüntüleyin ve yönetin."}),u.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Oturumları Görüntüle"})]}),u.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[u.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-2",children:"Hesabı Sil"}),u.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Hesabınızı kalıcı olarak silmek istiyorsanız bu işlemi kullanın. Bu işlem geri alınamaz."}),u.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Hesabı Sil"})]})]})]})}),O=()=>{switch(a){case"profile":return v();case"notifications":return g();case"salary":return T();case"appearance":return N();case"security":return R();default:return v()}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ayarlar"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Hesap ve uygulama ayarlarınızı yönetin"})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u.jsx("div",{className:"lg:w-1/4",children:u.jsx("nav",{className:"space-y-1",children:m.map(w=>{const E=w.icon;return u.jsxs("button",{onClick:()=>l(w.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${a===w.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-r-2 border-blue-700 dark:border-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,children:[u.jsx(E,{className:"mr-3 h-5 w-5"}),w.label]},w.id)})})}),u.jsx("div",{className:"lg:w-3/4",children:u.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:O()})})]})]})},lR=()=>{const[t,e]=q.useState({grossSalary:"30000",startDate:"2023-01-15",endDate:new Date().toISOString().split("T")[0]}),[n,r]=q.useState({march:"30000",april:"30000",may:"30000",june:"30000"}),[s,i]=q.useState(null),[a,l]=q.useState(null),c=()=>{const m=eR(parseFloat(t.grossSalary),t.startDate,t.endDate);i(m)},d=()=>{const m=[parseFloat(n.march),parseFloat(n.april),parseFloat(n.may),parseFloat(n.june)],v=tR(m);l(v)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tazminat Hesaplayıcıları"}),u.jsx("p",{className:"text-gray-600",children:"Kıdem ve işsizlik maaşı hesaplamalarınızı yapın"})]}),u.jsx(Wu,{className:"h-8 w-8 text-blue-600"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx(su,{className:"h-6 w-6 text-green-600 mr-3"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kıdem Tazminatı Hesaplayıcı"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Son Brüt Maaş (₺)"}),u.jsx("input",{type:"number",value:t.grossSalary,onChange:m=>e({...t,grossSalary:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İşe Başlama Tarihi"}),u.jsx("input",{type:"date",value:t.startDate,onChange:m=>e({...t,startDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İşten Ayrılma Tarihi"}),u.jsx("input",{type:"date",value:t.endDate,onChange:m=>e({...t,endDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),u.jsx("button",{onClick:c,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Kıdem Tazminatını Hesapla"}),s&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[u.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:"Hesaplama Sonucu"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Çalışma Süresi:"}),u.jsxs("span",{className:"font-medium text-green-800",children:[Math.floor(s.workingDays/365.25)," yıl ",Math.floor(s.workingDays%365.25/30)," ay"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Brüt Kıdem Tazminatı:"}),u.jsx("span",{className:"font-medium text-green-800",children:ee(s.grossAmount)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Damga Vergisi:"}),u.jsxs("span",{className:"font-medium text-red-600",children:["-",ee(s.stampTax)]})]}),u.jsx("hr",{className:"border-green-300"}),u.jsxs("div",{className:"flex justify-between text-lg",children:[u.jsx("span",{className:"font-semibold text-green-800",children:"Net Kıdem Tazminatı:"}),u.jsx("span",{className:"font-bold text-green-800",children:ee(s.netAmount)})]})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx(OC,{className:"h-6 w-6 text-blue-600 mr-3"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"İşsizlik Maaşı Hesaplayıcı"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4",children:u.jsx("p",{className:"text-sm text-blue-700",children:"Son 4 ayın brüt maaş bilgilerini giriniz. İşsizlik maaşı bu ayların ortalamasının %60'ı olarak hesaplanır."})}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mart 2025 (₺)"}),u.jsx("input",{type:"number",value:n.march,onChange:m=>r({...n,march:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nisan 2025 (₺)"}),u.jsx("input",{type:"number",value:n.april,onChange:m=>r({...n,april:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mayıs 2025 (₺)"}),u.jsx("input",{type:"number",value:n.may,onChange:m=>r({...n,may:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haziran 2025 (₺)"}),u.jsx("input",{type:"number",value:n.june,onChange:m=>r({...n,june:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]})]}),u.jsx("button",{onClick:d,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"İşsizlik Maaşını Hesapla"}),a&&u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[u.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Hesaplama Sonucu"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"4 Aylık Ortalama:"}),u.jsx("span",{className:"font-medium text-blue-800",children:ee(a.averageSalary)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"İşsizlik Maaşı (%60):"}),u.jsx("span",{className:"font-medium text-blue-800",children:ee(a.grossAmount)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Vergiler ve Kesintiler:"}),u.jsxs("span",{className:"font-medium text-red-600",children:["-",ee(a.stampTax)]})]}),u.jsx("hr",{className:"border-blue-300"}),u.jsxs("div",{className:"flex justify-between text-lg",children:[u.jsx("span",{className:"font-semibold text-blue-800",children:"Net İşsizlik Maaşı:"}),u.jsx("span",{className:"font-bold text-blue-800",children:ee(a.netAmount)})]})]}),u.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded border border-yellow-200",children:u.jsxs("p",{className:"text-xs text-yellow-800",children:[u.jsx("strong",{children:"Not:"})," Bu hesaplama tahminidir. Gerçek işsizlik maaşı İŞKUR tarafından belirlenen kriterlere göre değişebilir."]})})]})]})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Önemli Bilgiler"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Kıdem Tazminatı"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:"• En az 1 yıl çalışma şartı"}),u.jsx("li",{children:"• Damga vergisi %0.759 oranında"}),u.jsx("li",{children:"• Fesih sebebine göre değişir"}),u.jsx("li",{children:"• 2025 yılı tavanı güncellenecek"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"İşsizlik Maaşı"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:"• Son 4 ayın ortalamasının %60'ı"}),u.jsx("li",{children:"• En az 600 gün prim ödeme şartı"}),u.jsx("li",{children:"• Süre: 180-300 gün arası"}),u.jsx("li",{children:"• Alt ve üst limit uygulanır"})]})]})]})]})]})};console.log("=== FIREBASE CONNECTION TEST ===");console.log("Firebase app initialized:",pm);console.log("Firebase auth service:",mt);console.log("Firebase firestore service:",Ce);console.log("Window.firebase available:",window.firebase);console.log("Window.firebaseAuth available:",window.firebaseAuth);console.log("Window.firebaseDb available:",window.firebaseDb);console.log("Window.auth available:",window.auth);console.log("Window.db available:",window.db);const uR=async()=>{try{console.log("🧪 Testing Firebase connection...");const t=await mt.signInAnonymously();console.log("✅ Firebase connection test successful:",t),await mt.signOut(),console.log("✅ Firebase signout test successful")}catch(t){console.error("❌ Firebase connection test failed:",t)}};uR();console.log("🔍 Global scope test:");console.log("typeof window.firebase:",typeof window.firebase);console.log("typeof window.auth:",typeof window.auth);console.log("typeof window.db:",typeof window.db);console.log("=== END FIREBASE TEST ===");const cR=()=>{const[t,e]=q.useState(!0);return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("span",{className:"text-white text-2xl font-bold",children:"₺"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Maaş ve Çalışma Takibi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Maaşınızı, fazla mesainizi ve izinlerinizi kolayca yönetin"})]}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:t?u.jsx(KC,{onSwitchToRegister:()=>e(!1)}):u.jsx(QC,{onSwitchToLogin:()=>e(!0)})})]})})},dR=()=>{const{user:t,isLoading:e}=$t(),{isCollapsed:n}=gm(),[r,s]=q.useState("dashboard");if(e)return u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t)return u.jsx(cR,{});const i=()=>{switch(r){case"dashboard":return u.jsx(sy,{});case"salary":return u.jsx(nR,{});case"overtime":return u.jsx(rR,{});case"calendar":return u.jsx(sR,{});case"leaves":return u.jsx(iR,{});case"reports":return u.jsx(aR,{});case"settings":return u.jsx(oR,{});case"calculators":return u.jsx(lR,{});default:return u.jsx(sy,{})}};return u.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[u.jsx(YC,{}),u.jsxs("div",{className:"flex pt-16",children:[u.jsx(XC,{activeTab:r,onTabChange:s}),u.jsx("main",{className:`flex-1 p-6 transition-all duration-300 ease-in-out ${n?"md:ml-16":"md:ml-64"}`,children:i()})]})]})},hR=()=>u.jsx(jC,{children:u.jsx(DC,{children:u.jsx(dR,{})})});function fR(){return u.jsx(PC,{children:u.jsx(SC,{children:u.jsx(AC,{children:u.jsx(hR,{})})})})}window.firebase=pm;window.firebaseAuth=mt;window.firebaseDb=Ce;window.auth=mt;window.db=Ce;console.log("🚀 Firebase initialized globally:",pm);console.log("🚀 Firebase auth available:",mt);console.log("🚀 Firebase db available:",Ce);console.log("🚀 Window.firebase:",window.firebase);console.log("🚀 Window.auth:",window.auth);console.log("🚀 Window.db:",window.db);y_(document.getElementById("root")).render(u.jsx(q.StrictMode,{children:u.jsx(fR,{})}));
