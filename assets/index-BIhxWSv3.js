(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var dy={exports:{}},du={},hy={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $o=Symbol.for("react.element"),H1=Symbol.for("react.portal"),q1=Symbol.for("react.fragment"),W1=Symbol.for("react.strict_mode"),G1=Symbol.for("react.profiler"),K1=Symbol.for("react.provider"),Q1=Symbol.for("react.context"),Y1=Symbol.for("react.forward_ref"),X1=Symbol.for("react.suspense"),J1=Symbol.for("react.memo"),Z1=Symbol.for("react.lazy"),Ep=Symbol.iterator;function eE(t){return t===null||typeof t!="object"?null:(t=Ep&&t[Ep]||t["@@iterator"],typeof t=="function"?t:null)}var fy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},my=Object.assign,py={};function ui(t,e,n){this.props=t,this.context=e,this.refs=py,this.updater=n||fy}ui.prototype.isReactComponent={};ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gy(){}gy.prototype=ui.prototype;function Ph(t,e,n){this.props=t,this.context=e,this.refs=py,this.updater=n||fy}var Dh=Ph.prototype=new gy;Dh.constructor=Ph;my(Dh,ui.prototype);Dh.isPureReactComponent=!0;var kp=Array.isArray,yy=Object.prototype.hasOwnProperty,jh={current:null},vy={key:!0,ref:!0,__self:!0,__source:!0};function _y(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)yy.call(e,r)&&!vy.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:$o,type:t,key:i,ref:o,props:s,_owner:jh.current}}function tE(t,e){return{$$typeof:$o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vh(t){return typeof t=="object"&&t!==null&&t.$$typeof===$o}function nE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Tp=/\/+/g;function Tc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?nE(""+t.key):e.toString(36)}function Xa(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $o:case H1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Tc(o,0):r,kp(s)?(n="",t!=null&&(n=t.replace(Tp,"$&/")+"/"),Xa(s,e,n,"",function(d){return d})):s!=null&&(Vh(s)&&(s=tE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Tp,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",kp(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Tc(i,l);o+=Xa(i,e,n,c,s)}else if(c=eE(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Tc(i,l++),o+=Xa(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ba(t,e,n){if(t==null)return t;var r=[],s=0;return Xa(t,r,"","",function(i){return e.call(n,i,s++)}),r}function rE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mt={current:null},Ja={transition:null},sE={ReactCurrentDispatcher:mt,ReactCurrentBatchConfig:Ja,ReactCurrentOwner:jh};function xy(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:ba,forEach:function(t,e,n){ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ba(t,function(){e++}),e},toArray:function(t){return ba(t,function(e){return e})||[]},only:function(t){if(!Vh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=ui;te.Fragment=q1;te.Profiler=G1;te.PureComponent=Ph;te.StrictMode=W1;te.Suspense=X1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sE;te.act=xy;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=my({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)yy.call(e,c)&&!vy.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:$o,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:Q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:K1,_context:t},t.Consumer=t};te.createElement=_y;te.createFactory=function(t){var e=_y.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:Y1,render:t}};te.isValidElement=Vh;te.lazy=function(t){return{$$typeof:Z1,_payload:{_status:-1,_result:t},_init:rE}};te.memo=function(t,e){return{$$typeof:J1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Ja.transition;Ja.transition={};try{t()}finally{Ja.transition=e}};te.unstable_act=xy;te.useCallback=function(t,e){return mt.current.useCallback(t,e)};te.useContext=function(t){return mt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return mt.current.useDeferredValue(t)};te.useEffect=function(t,e){return mt.current.useEffect(t,e)};te.useId=function(){return mt.current.useId()};te.useImperativeHandle=function(t,e,n){return mt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return mt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return mt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return mt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return mt.current.useReducer(t,e,n)};te.useRef=function(t){return mt.current.useRef(t)};te.useState=function(t){return mt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return mt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return mt.current.useTransition()};te.version="18.3.1";hy.exports=te;var q=hy.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iE=q,oE=Symbol.for("react.element"),aE=Symbol.for("react.fragment"),lE=Object.prototype.hasOwnProperty,uE=iE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cE={key:!0,ref:!0,__self:!0,__source:!0};function wy(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)lE.call(e,r)&&!cE.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:oE,type:t,key:i,ref:o,props:s,_owner:uE.current}}du.Fragment=aE;du.jsx=wy;du.jsxs=wy;dy.exports=du;var u=dy.exports,Ey={exports:{}},Rt={},ky={exports:{}},Ty={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,G){var K=z.length;z.push(G);e:for(;0<K;){var ve=K-1>>>1,de=z[ve];if(0<s(de,G))z[ve]=G,z[K]=de,K=ve;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var G=z[0],K=z.pop();if(K!==G){z[0]=K;e:for(var ve=0,de=z.length,ie=de>>>1;ve<ie;){var Ce=2*(ve+1)-1,Dt=z[Ce],_n=Ce+1,xn=z[_n];if(0>s(Dt,K))_n<de&&0>s(xn,Dt)?(z[ve]=xn,z[_n]=K,ve=_n):(z[ve]=Dt,z[Ce]=K,ve=Ce);else if(_n<de&&0>s(xn,K))z[ve]=xn,z[_n]=K,ve=_n;else break e}}return G}function s(z,G){var K=z.sortIndex-G.sortIndex;return K!==0?K:z.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,v=null,g=3,T=!1,N=!1,R=!1,O=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=z)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function P(z){if(R=!1,S(z),!N)if(n(c)!==null)N=!0,Se(D);else{var G=n(d);G!==null&&gt(P,G.startTime-z)}}function D(z,G){N=!1,R&&(R=!1,w(p),p=-1),T=!0;var K=g;try{for(S(G),v=n(c);v!==null&&(!(v.expirationTime>G)||z&&!I());){var ve=v.callback;if(typeof ve=="function"){v.callback=null,g=v.priorityLevel;var de=ve(v.expirationTime<=G);G=t.unstable_now(),typeof de=="function"?v.callback=de:v===n(c)&&r(c),S(G)}else r(c);v=n(c)}if(v!==null)var ie=!0;else{var Ce=n(d);Ce!==null&&gt(P,Ce.startTime-G),ie=!1}return ie}finally{v=null,g=K,T=!1}}var V=!1,x=null,p=-1,y=5,k=-1;function I(){return!(t.unstable_now()-k<y)}function A(){if(x!==null){var z=t.unstable_now();k=z;var G=!0;try{G=x(!0,z)}finally{G?b():(V=!1,x=null)}}else V=!1}var b;if(typeof E=="function")b=function(){E(A)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ue=me.port2;me.port1.onmessage=A,b=function(){ue.postMessage(null)}}else b=function(){O(A,0)};function Se(z){x=z,V||(V=!0,b())}function gt(z,G){p=O(function(){z(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){N||T||(N=!0,Se(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var K=g;g=G;try{return z()}finally{g=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,G){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=g;g=z;try{return G()}finally{g=K}},t.unstable_scheduleCallback=function(z,G,K){var ve=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ve+K:ve):K=ve,z){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=K+de,z={id:m++,callback:G,priorityLevel:z,startTime:K,expirationTime:de,sortIndex:-1},K>ve?(z.sortIndex=K,e(d,z),n(c)===null&&z===n(d)&&(R?(w(p),p=-1):R=!0,gt(P,K-ve))):(z.sortIndex=de,e(c,z),N||T||(N=!0,Se(D))),z},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(z){var G=g;return function(){var K=g;g=G;try{return z.apply(this,arguments)}finally{g=K}}}})(Ty);ky.exports=Ty;var dE=ky.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hE=q,Ct=dE;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var by=new Set,mo={};function ls(t,e){Ks(t,e),Ks(t+"Capture",e)}function Ks(t,e){for(mo[t]=e,t=0;t<e.length;t++)by.add(e[t])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=Object.prototype.hasOwnProperty,fE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bp={},Ip={};function mE(t){return cd.call(Ip,t)?!0:cd.call(bp,t)?!1:fE.test(t)?Ip[t]=!0:(bp[t]=!0,!1)}function pE(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function gE(t,e,n,r){if(e===null||typeof e>"u"||pE(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Xe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Xe[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Xe[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Xe[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Xe[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Xe[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Xe[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Xe[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Xe[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Xe[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mh=/[\-:]([a-z])/g;function Oh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mh,Oh);Xe[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mh,Oh);Xe[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mh,Oh);Xe[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Xe[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Xe.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Xe[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Lh(t,e,n,r){var s=Xe.hasOwnProperty(e)?Xe[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(gE(e,n,s,r)&&(n=null),r||s===null?mE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Bn=hE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ia=Symbol.for("react.element"),Ts=Symbol.for("react.portal"),bs=Symbol.for("react.fragment"),Fh=Symbol.for("react.strict_mode"),dd=Symbol.for("react.profiler"),Iy=Symbol.for("react.provider"),Sy=Symbol.for("react.context"),Uh=Symbol.for("react.forward_ref"),hd=Symbol.for("react.suspense"),fd=Symbol.for("react.suspense_list"),zh=Symbol.for("react.memo"),Qn=Symbol.for("react.lazy"),Ny=Symbol.for("react.offscreen"),Sp=Symbol.iterator;function ji(t){return t===null||typeof t!="object"?null:(t=Sp&&t[Sp]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,bc;function Bi(t){if(bc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bc=e&&e[1]||""}return`
`+bc+t}var Ic=!1;function Sc(t,e){if(!t||Ic)return"";Ic=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ic=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bi(t):""}function yE(t){switch(t.tag){case 5:return Bi(t.type);case 16:return Bi("Lazy");case 13:return Bi("Suspense");case 19:return Bi("SuspenseList");case 0:case 2:case 15:return t=Sc(t.type,!1),t;case 11:return t=Sc(t.type.render,!1),t;case 1:return t=Sc(t.type,!0),t;default:return""}}function md(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bs:return"Fragment";case Ts:return"Portal";case dd:return"Profiler";case Fh:return"StrictMode";case hd:return"Suspense";case fd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sy:return(t.displayName||"Context")+".Consumer";case Iy:return(t._context.displayName||"Context")+".Provider";case Uh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case zh:return e=t.displayName||null,e!==null?e:md(t.type)||"Memo";case Qn:e=t._payload,t=t._init;try{return md(t(e))}catch{}}return null}function vE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return md(e);case 8:return e===Fh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ay(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _E(t){var e=Ay(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sa(t){t._valueTracker||(t._valueTracker=_E(t))}function Cy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ay(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pd(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Np(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=xr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ry(t,e){e=e.checked,e!=null&&Lh(t,"checked",e,!1)}function gd(t,e){Ry(t,e);var n=xr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&yd(t,e.type,xr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ap(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yd(t,e,n){(e!=="number"||_l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $i=Array.isArray;function Os(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+xr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Cp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if($i(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xr(n)}}function Py(t,e){var n=xr(e.value),r=xr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Rp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _d(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Na,jy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Na=Na||document.createElement("div"),Na.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Na.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xE=["Webkit","ms","Moz","O"];Object.keys(Ji).forEach(function(t){xE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ji[e]=Ji[t]})});function Vy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ji.hasOwnProperty(t)&&Ji[t]?(""+e).trim():e+"px"}function My(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Vy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var wE=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function xd(t,e){if(e){if(wE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function wd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=null;function Bh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kd=null,Ls=null,Fs=null;function Pp(t){if(t=Wo(t)){if(typeof kd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=gu(e),kd(t.stateNode,t.type,e))}}function Oy(t){Ls?Fs?Fs.push(t):Fs=[t]:Ls=t}function Ly(){if(Ls){var t=Ls,e=Fs;if(Fs=Ls=null,Pp(t),e)for(t=0;t<e.length;t++)Pp(e[t])}}function Fy(t,e){return t(e)}function Uy(){}var Nc=!1;function zy(t,e,n){if(Nc)return t(e,n);Nc=!0;try{return Fy(t,e,n)}finally{Nc=!1,(Ls!==null||Fs!==null)&&(Uy(),Ly())}}function go(t,e){var n=t.stateNode;if(n===null)return null;var r=gu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Td=!1;if(jn)try{var Vi={};Object.defineProperty(Vi,"passive",{get:function(){Td=!0}}),window.addEventListener("test",Vi,Vi),window.removeEventListener("test",Vi,Vi)}catch{Td=!1}function EE(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(m){this.onError(m)}}var Zi=!1,xl=null,wl=!1,bd=null,kE={onError:function(t){Zi=!0,xl=t}};function TE(t,e,n,r,s,i,o,l,c){Zi=!1,xl=null,EE.apply(kE,arguments)}function bE(t,e,n,r,s,i,o,l,c){if(TE.apply(this,arguments),Zi){if(Zi){var d=xl;Zi=!1,xl=null}else throw Error(F(198));wl||(wl=!0,bd=d)}}function us(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function By(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dp(t){if(us(t)!==t)throw Error(F(188))}function IE(t){var e=t.alternate;if(!e){if(e=us(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Dp(s),t;if(i===r)return Dp(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function $y(t){return t=IE(t),t!==null?Hy(t):null}function Hy(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Hy(t);if(e!==null)return e;t=t.sibling}return null}var qy=Ct.unstable_scheduleCallback,jp=Ct.unstable_cancelCallback,SE=Ct.unstable_shouldYield,NE=Ct.unstable_requestPaint,Pe=Ct.unstable_now,AE=Ct.unstable_getCurrentPriorityLevel,$h=Ct.unstable_ImmediatePriority,Wy=Ct.unstable_UserBlockingPriority,El=Ct.unstable_NormalPriority,CE=Ct.unstable_LowPriority,Gy=Ct.unstable_IdlePriority,hu=null,un=null;function RE(t){if(un&&typeof un.onCommitFiberRoot=="function")try{un.onCommitFiberRoot(hu,t,void 0,(t.current.flags&128)===128)}catch{}}var Yt=Math.clz32?Math.clz32:jE,PE=Math.log,DE=Math.LN2;function jE(t){return t>>>=0,t===0?32:31-(PE(t)/DE|0)|0}var Aa=64,Ca=4194304;function Hi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Hi(l):(i&=o,i!==0&&(r=Hi(i)))}else o=n&~s,o!==0?r=Hi(o):i!==0&&(r=Hi(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yt(e),s=1<<n,r|=t[n],e&=~s;return r}function VE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ME(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yt(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=VE(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Id(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ky(){var t=Aa;return Aa<<=1,!(Aa&4194240)&&(Aa=64),t}function Ac(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yt(e),t[e]=n}function OE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yt(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Hh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yt(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var he=0;function Qy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yy,qh,Xy,Jy,Zy,Sd=!1,Ra=[],ar=null,lr=null,ur=null,yo=new Map,vo=new Map,Xn=[],LE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vp(t,e){switch(t){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function Mi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Wo(e),e!==null&&qh(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function FE(t,e,n,r,s){switch(e){case"focusin":return ar=Mi(ar,t,e,n,r,s),!0;case"dragenter":return lr=Mi(lr,t,e,n,r,s),!0;case"mouseover":return ur=Mi(ur,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return yo.set(i,Mi(yo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vo.set(i,Mi(vo.get(i)||null,t,e,n,r,s)),!0}return!1}function ev(t){var e=Br(t.target);if(e!==null){var n=us(e);if(n!==null){if(e=n.tag,e===13){if(e=By(n),e!==null){t.blockedOn=e,Zy(t.priority,function(){Xy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Za(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ed=r,n.target.dispatchEvent(r),Ed=null}else return e=Wo(n),e!==null&&qh(e),t.blockedOn=n,!1;e.shift()}return!0}function Mp(t,e,n){Za(t)&&n.delete(e)}function UE(){Sd=!1,ar!==null&&Za(ar)&&(ar=null),lr!==null&&Za(lr)&&(lr=null),ur!==null&&Za(ur)&&(ur=null),yo.forEach(Mp),vo.forEach(Mp)}function Oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Sd||(Sd=!0,Ct.unstable_scheduleCallback(Ct.unstable_NormalPriority,UE)))}function _o(t){function e(s){return Oi(s,t)}if(0<Ra.length){Oi(Ra[0],t);for(var n=1;n<Ra.length;n++){var r=Ra[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ar!==null&&Oi(ar,t),lr!==null&&Oi(lr,t),ur!==null&&Oi(ur,t),yo.forEach(e),vo.forEach(e),n=0;n<Xn.length;n++)r=Xn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xn.length&&(n=Xn[0],n.blockedOn===null);)ev(n),n.blockedOn===null&&Xn.shift()}var Us=Bn.ReactCurrentBatchConfig,Tl=!0;function zE(t,e,n,r){var s=he,i=Us.transition;Us.transition=null;try{he=1,Wh(t,e,n,r)}finally{he=s,Us.transition=i}}function BE(t,e,n,r){var s=he,i=Us.transition;Us.transition=null;try{he=4,Wh(t,e,n,r)}finally{he=s,Us.transition=i}}function Wh(t,e,n,r){if(Tl){var s=Nd(t,e,n,r);if(s===null)Fc(t,e,r,bl,n),Vp(t,r);else if(FE(s,t,e,n,r))r.stopPropagation();else if(Vp(t,r),e&4&&-1<LE.indexOf(t)){for(;s!==null;){var i=Wo(s);if(i!==null&&Yy(i),i=Nd(t,e,n,r),i===null&&Fc(t,e,r,bl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fc(t,e,r,null,n)}}var bl=null;function Nd(t,e,n,r){if(bl=null,t=Bh(r),t=Br(t),t!==null)if(e=us(t),e===null)t=null;else if(n=e.tag,n===13){if(t=By(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bl=t,null}function tv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AE()){case $h:return 1;case Wy:return 4;case El:case CE:return 16;case Gy:return 536870912;default:return 16}default:return 16}}var rr=null,Gh=null,el=null;function nv(){if(el)return el;var t,e=Gh,n=e.length,r,s="value"in rr?rr.value:rr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return el=s.slice(t,1<r?1-r:void 0)}function tl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Pa(){return!0}function Op(){return!1}function Pt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Pa:Op,this.isPropagationStopped=Op,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Pa)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Pa)},persist:function(){},isPersistent:Pa}),e}var ci={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kh=Pt(ci),qo=be({},ci,{view:0,detail:0}),$E=Pt(qo),Cc,Rc,Li,fu=be({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Li&&(Li&&t.type==="mousemove"?(Cc=t.screenX-Li.screenX,Rc=t.screenY-Li.screenY):Rc=Cc=0,Li=t),Cc)},movementY:function(t){return"movementY"in t?t.movementY:Rc}}),Lp=Pt(fu),HE=be({},fu,{dataTransfer:0}),qE=Pt(HE),WE=be({},qo,{relatedTarget:0}),Pc=Pt(WE),GE=be({},ci,{animationName:0,elapsedTime:0,pseudoElement:0}),KE=Pt(GE),QE=be({},ci,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YE=Pt(QE),XE=be({},ci,{data:0}),Fp=Pt(XE),JE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ZE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ek={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ek[t])?!!e[t]:!1}function Qh(){return tk}var nk=be({},qo,{key:function(t){if(t.key){var e=JE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=tl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ZE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qh,charCode:function(t){return t.type==="keypress"?tl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?tl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rk=Pt(nk),sk=be({},fu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Up=Pt(sk),ik=be({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qh}),ok=Pt(ik),ak=be({},ci,{propertyName:0,elapsedTime:0,pseudoElement:0}),lk=Pt(ak),uk=be({},fu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ck=Pt(uk),dk=[9,13,27,32],Yh=jn&&"CompositionEvent"in window,eo=null;jn&&"documentMode"in document&&(eo=document.documentMode);var hk=jn&&"TextEvent"in window&&!eo,rv=jn&&(!Yh||eo&&8<eo&&11>=eo),zp=" ",Bp=!1;function sv(t,e){switch(t){case"keyup":return dk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Is=!1;function fk(t,e){switch(t){case"compositionend":return iv(e);case"keypress":return e.which!==32?null:(Bp=!0,zp);case"textInput":return t=e.data,t===zp&&Bp?null:t;default:return null}}function mk(t,e){if(Is)return t==="compositionend"||!Yh&&sv(t,e)?(t=nv(),el=Gh=rr=null,Is=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rv&&e.locale!=="ko"?null:e.data;default:return null}}var pk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pk[t.type]:e==="textarea"}function ov(t,e,n,r){Oy(r),e=Il(e,"onChange"),0<e.length&&(n=new Kh("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var to=null,xo=null;function gk(t){yv(t,0)}function mu(t){var e=As(t);if(Cy(e))return t}function yk(t,e){if(t==="change")return e}var av=!1;if(jn){var Dc;if(jn){var jc="oninput"in document;if(!jc){var Hp=document.createElement("div");Hp.setAttribute("oninput","return;"),jc=typeof Hp.oninput=="function"}Dc=jc}else Dc=!1;av=Dc&&(!document.documentMode||9<document.documentMode)}function qp(){to&&(to.detachEvent("onpropertychange",lv),xo=to=null)}function lv(t){if(t.propertyName==="value"&&mu(xo)){var e=[];ov(e,xo,t,Bh(t)),zy(gk,e)}}function vk(t,e,n){t==="focusin"?(qp(),to=e,xo=n,to.attachEvent("onpropertychange",lv)):t==="focusout"&&qp()}function _k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(xo)}function xk(t,e){if(t==="click")return mu(e)}function wk(t,e){if(t==="input"||t==="change")return mu(e)}function Ek(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Zt=typeof Object.is=="function"?Object.is:Ek;function wo(t,e){if(Zt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!cd.call(e,s)||!Zt(t[s],e[s]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gp(t,e){var n=Wp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Wp(n)}}function uv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?uv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cv(){for(var t=window,e=_l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_l(t.document)}return e}function Xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kk(t){var e=cv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&uv(n.ownerDocument.documentElement,n)){if(r!==null&&Xh(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Gp(n,i);var o=Gp(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Tk=jn&&"documentMode"in document&&11>=document.documentMode,Ss=null,Ad=null,no=null,Cd=!1;function Kp(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cd||Ss==null||Ss!==_l(r)||(r=Ss,"selectionStart"in r&&Xh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),no&&wo(no,r)||(no=r,r=Il(Ad,"onSelect"),0<r.length&&(e=new Kh("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ss)))}function Da(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ns={animationend:Da("Animation","AnimationEnd"),animationiteration:Da("Animation","AnimationIteration"),animationstart:Da("Animation","AnimationStart"),transitionend:Da("Transition","TransitionEnd")},Vc={},dv={};jn&&(dv=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function pu(t){if(Vc[t])return Vc[t];if(!Ns[t])return t;var e=Ns[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dv)return Vc[t]=e[n];return t}var hv=pu("animationend"),fv=pu("animationiteration"),mv=pu("animationstart"),pv=pu("transitionend"),gv=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(t,e){gv.set(t,e),ls(e,[t])}for(var Mc=0;Mc<Qp.length;Mc++){var Oc=Qp[Mc],bk=Oc.toLowerCase(),Ik=Oc[0].toUpperCase()+Oc.slice(1);Nr(bk,"on"+Ik)}Nr(hv,"onAnimationEnd");Nr(fv,"onAnimationIteration");Nr(mv,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(pv,"onTransitionEnd");Ks("onMouseEnter",["mouseout","mouseover"]);Ks("onMouseLeave",["mouseout","mouseover"]);Ks("onPointerEnter",["pointerout","pointerover"]);Ks("onPointerLeave",["pointerout","pointerover"]);ls("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ls("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ls("onBeforeInput",["compositionend","keypress","textInput","paste"]);ls("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ls("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Sk=new Set("cancel close invalid load scroll toggle".split(" ").concat(qi));function Yp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,bE(r,e,void 0,t),t.currentTarget=null}function yv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Yp(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Yp(s,l,d),i=c}}}if(wl)throw t=bd,wl=!1,bd=null,t}function xe(t,e){var n=e[Vd];n===void 0&&(n=e[Vd]=new Set);var r=t+"__bubble";n.has(r)||(vv(e,t,2,!1),n.add(r))}function Lc(t,e,n){var r=0;e&&(r|=4),vv(n,t,r,e)}var ja="_reactListening"+Math.random().toString(36).slice(2);function Eo(t){if(!t[ja]){t[ja]=!0,by.forEach(function(n){n!=="selectionchange"&&(Sk.has(n)||Lc(n,!1,t),Lc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ja]||(e[ja]=!0,Lc("selectionchange",!1,e))}}function vv(t,e,n,r){switch(tv(e)){case 1:var s=zE;break;case 4:s=BE;break;default:s=Wh}n=s.bind(null,e,n,t),s=void 0,!Td||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Br(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}zy(function(){var d=i,m=Bh(n),v=[];e:{var g=gv.get(t);if(g!==void 0){var T=Kh,N=t;switch(t){case"keypress":if(tl(n)===0)break e;case"keydown":case"keyup":T=rk;break;case"focusin":N="focus",T=Pc;break;case"focusout":N="blur",T=Pc;break;case"beforeblur":case"afterblur":T=Pc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Lp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=qE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=ok;break;case hv:case fv:case mv:T=KE;break;case pv:T=lk;break;case"scroll":T=$E;break;case"wheel":T=ck;break;case"copy":case"cut":case"paste":T=YE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Up}var R=(e&4)!==0,O=!R&&t==="scroll",w=R?g!==null?g+"Capture":null:g;R=[];for(var E=d,S;E!==null;){S=E;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,w!==null&&(P=go(E,w),P!=null&&R.push(ko(E,P,S)))),O)break;E=E.return}0<R.length&&(g=new T(g,N,null,n,m),v.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",g&&n!==Ed&&(N=n.relatedTarget||n.fromElement)&&(Br(N)||N[Vn]))break e;if((T||g)&&(g=m.window===m?m:(g=m.ownerDocument)?g.defaultView||g.parentWindow:window,T?(N=n.relatedTarget||n.toElement,T=d,N=N?Br(N):null,N!==null&&(O=us(N),N!==O||N.tag!==5&&N.tag!==6)&&(N=null)):(T=null,N=d),T!==N)){if(R=Lp,P="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(R=Up,P="onPointerLeave",w="onPointerEnter",E="pointer"),O=T==null?g:As(T),S=N==null?g:As(N),g=new R(P,E+"leave",T,n,m),g.target=O,g.relatedTarget=S,P=null,Br(m)===d&&(R=new R(w,E+"enter",N,n,m),R.target=S,R.relatedTarget=O,P=R),O=P,T&&N)t:{for(R=T,w=N,E=0,S=R;S;S=_s(S))E++;for(S=0,P=w;P;P=_s(P))S++;for(;0<E-S;)R=_s(R),E--;for(;0<S-E;)w=_s(w),S--;for(;E--;){if(R===w||w!==null&&R===w.alternate)break t;R=_s(R),w=_s(w)}R=null}else R=null;T!==null&&Xp(v,g,T,R,!1),N!==null&&O!==null&&Xp(v,O,N,R,!0)}}e:{if(g=d?As(d):window,T=g.nodeName&&g.nodeName.toLowerCase(),T==="select"||T==="input"&&g.type==="file")var D=yk;else if($p(g))if(av)D=wk;else{D=_k;var V=vk}else(T=g.nodeName)&&T.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(D=xk);if(D&&(D=D(t,d))){ov(v,D,n,m);break e}V&&V(t,g,d),t==="focusout"&&(V=g._wrapperState)&&V.controlled&&g.type==="number"&&yd(g,"number",g.value)}switch(V=d?As(d):window,t){case"focusin":($p(V)||V.contentEditable==="true")&&(Ss=V,Ad=d,no=null);break;case"focusout":no=Ad=Ss=null;break;case"mousedown":Cd=!0;break;case"contextmenu":case"mouseup":case"dragend":Cd=!1,Kp(v,n,m);break;case"selectionchange":if(Tk)break;case"keydown":case"keyup":Kp(v,n,m)}var x;if(Yh)e:{switch(t){case"compositionstart":var p="onCompositionStart";break e;case"compositionend":p="onCompositionEnd";break e;case"compositionupdate":p="onCompositionUpdate";break e}p=void 0}else Is?sv(t,n)&&(p="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(p="onCompositionStart");p&&(rv&&n.locale!=="ko"&&(Is||p!=="onCompositionStart"?p==="onCompositionEnd"&&Is&&(x=nv()):(rr=m,Gh="value"in rr?rr.value:rr.textContent,Is=!0)),V=Il(d,p),0<V.length&&(p=new Fp(p,t,null,n,m),v.push({event:p,listeners:V}),x?p.data=x:(x=iv(n),x!==null&&(p.data=x)))),(x=hk?fk(t,n):mk(t,n))&&(d=Il(d,"onBeforeInput"),0<d.length&&(m=new Fp("onBeforeInput","beforeinput",null,n,m),v.push({event:m,listeners:d}),m.data=x))}yv(v,e)})}function ko(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Il(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=go(t,n),i!=null&&r.unshift(ko(t,i,s)),i=go(t,e),i!=null&&r.push(ko(t,i,s))),t=t.return}return r}function _s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Xp(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=go(n,i),c!=null&&o.unshift(ko(n,c,l))):s||(c=go(n,i),c!=null&&o.push(ko(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Nk=/\r\n?/g,Ak=/\u0000|\uFFFD/g;function Jp(t){return(typeof t=="string"?t:""+t).replace(Nk,`
`).replace(Ak,"")}function Va(t,e,n){if(e=Jp(e),Jp(t)!==e&&n)throw Error(F(425))}function Sl(){}var Rd=null,Pd=null;function Dd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var jd=typeof setTimeout=="function"?setTimeout:void 0,Ck=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,Rk=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(t){return Zp.resolve(null).then(t).catch(Pk)}:jd;function Pk(t){setTimeout(function(){throw t})}function Uc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_o(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_o(e)}function cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function eg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var di=Math.random().toString(36).slice(2),ln="__reactFiber$"+di,To="__reactProps$"+di,Vn="__reactContainer$"+di,Vd="__reactEvents$"+di,Dk="__reactListeners$"+di,jk="__reactHandles$"+di;function Br(t){var e=t[ln];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Vn]||n[ln]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=eg(t);t!==null;){if(n=t[ln])return n;t=eg(t)}return e}t=n,n=t.parentNode}return null}function Wo(t){return t=t[ln]||t[Vn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function As(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function gu(t){return t[To]||null}var Md=[],Cs=-1;function Ar(t){return{current:t}}function we(t){0>Cs||(t.current=Md[Cs],Md[Cs]=null,Cs--)}function ye(t,e){Cs++,Md[Cs]=t.current,t.current=e}var wr={},lt=Ar(wr),wt=Ar(!1),Qr=wr;function Qs(t,e){var n=t.type.contextTypes;if(!n)return wr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Et(t){return t=t.childContextTypes,t!=null}function Nl(){we(wt),we(lt)}function tg(t,e,n){if(lt.current!==wr)throw Error(F(168));ye(lt,e),ye(wt,n)}function _v(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,vE(t)||"Unknown",s));return be({},n,r)}function Al(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wr,Qr=lt.current,ye(lt,t),ye(wt,wt.current),!0}function ng(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=_v(t,e,Qr),r.__reactInternalMemoizedMergedChildContext=t,we(wt),we(lt),ye(lt,t)):we(wt),ye(wt,n)}var Tn=null,yu=!1,zc=!1;function xv(t){Tn===null?Tn=[t]:Tn.push(t)}function Vk(t){yu=!0,xv(t)}function Cr(){if(!zc&&Tn!==null){zc=!0;var t=0,e=he;try{var n=Tn;for(he=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Tn=null,yu=!1}catch(s){throw Tn!==null&&(Tn=Tn.slice(t+1)),qy($h,Cr),s}finally{he=e,zc=!1}}return null}var Rs=[],Ps=0,Cl=null,Rl=0,jt=[],Vt=0,Yr=null,bn=1,In="";function Fr(t,e){Rs[Ps++]=Rl,Rs[Ps++]=Cl,Cl=t,Rl=e}function wv(t,e,n){jt[Vt++]=bn,jt[Vt++]=In,jt[Vt++]=Yr,Yr=t;var r=bn;t=In;var s=32-Yt(r)-1;r&=~(1<<s),n+=1;var i=32-Yt(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,bn=1<<32-Yt(e)+s|n<<s|r,In=i+t}else bn=1<<i|n<<s|r,In=t}function Jh(t){t.return!==null&&(Fr(t,1),wv(t,1,0))}function Zh(t){for(;t===Cl;)Cl=Rs[--Ps],Rs[Ps]=null,Rl=Rs[--Ps],Rs[Ps]=null;for(;t===Yr;)Yr=jt[--Vt],jt[Vt]=null,In=jt[--Vt],jt[Vt]=null,bn=jt[--Vt],jt[Vt]=null}var Nt=null,It=null,Ee=!1,Kt=null;function Ev(t,e){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function rg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nt=t,It=cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nt=t,It=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Yr!==null?{id:bn,overflow:In}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Nt=t,It=null,!0):!1;default:return!1}}function Od(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ld(t){if(Ee){var e=It;if(e){var n=e;if(!rg(t,e)){if(Od(t))throw Error(F(418));e=cr(n.nextSibling);var r=Nt;e&&rg(t,e)?Ev(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Nt=t)}}else{if(Od(t))throw Error(F(418));t.flags=t.flags&-4097|2,Ee=!1,Nt=t}}}function sg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nt=t}function Ma(t){if(t!==Nt)return!1;if(!Ee)return sg(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dd(t.type,t.memoizedProps)),e&&(e=It)){if(Od(t))throw kv(),Error(F(418));for(;e;)Ev(t,e),e=cr(e.nextSibling)}if(sg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){It=cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}It=null}}else It=Nt?cr(t.stateNode.nextSibling):null;return!0}function kv(){for(var t=It;t;)t=cr(t.nextSibling)}function Ys(){It=Nt=null,Ee=!1}function ef(t){Kt===null?Kt=[t]:Kt.push(t)}var Mk=Bn.ReactCurrentBatchConfig;function Fi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Oa(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ig(t){var e=t._init;return e(t._payload)}function Tv(t){function e(w,E){if(t){var S=w.deletions;S===null?(w.deletions=[E],w.flags|=16):S.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(w,E){return w=mr(w,E),w.index=0,w.sibling=null,w}function i(w,E,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<E?(w.flags|=2,E):S):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,E,S,P){return E===null||E.tag!==6?(E=Kc(S,w.mode,P),E.return=w,E):(E=s(E,S),E.return=w,E)}function c(w,E,S,P){var D=S.type;return D===bs?m(w,E,S.props.children,P,S.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qn&&ig(D)===E.type)?(P=s(E,S.props),P.ref=Fi(w,E,S),P.return=w,P):(P=ll(S.type,S.key,S.props,null,w.mode,P),P.ref=Fi(w,E,S),P.return=w,P)}function d(w,E,S,P){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Qc(S,w.mode,P),E.return=w,E):(E=s(E,S.children||[]),E.return=w,E)}function m(w,E,S,P,D){return E===null||E.tag!==7?(E=Gr(S,w.mode,P,D),E.return=w,E):(E=s(E,S),E.return=w,E)}function v(w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Kc(""+E,w.mode,S),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ia:return S=ll(E.type,E.key,E.props,null,w.mode,S),S.ref=Fi(w,null,E),S.return=w,S;case Ts:return E=Qc(E,w.mode,S),E.return=w,E;case Qn:var P=E._init;return v(w,P(E._payload),S)}if($i(E)||ji(E))return E=Gr(E,w.mode,S,null),E.return=w,E;Oa(w,E)}return null}function g(w,E,S,P){var D=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(w,E,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:return S.key===D?c(w,E,S,P):null;case Ts:return S.key===D?d(w,E,S,P):null;case Qn:return D=S._init,g(w,E,D(S._payload),P)}if($i(S)||ji(S))return D!==null?null:m(w,E,S,P,null);Oa(w,S)}return null}function T(w,E,S,P,D){if(typeof P=="string"&&P!==""||typeof P=="number")return w=w.get(S)||null,l(E,w,""+P,D);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Ia:return w=w.get(P.key===null?S:P.key)||null,c(E,w,P,D);case Ts:return w=w.get(P.key===null?S:P.key)||null,d(E,w,P,D);case Qn:var V=P._init;return T(w,E,S,V(P._payload),D)}if($i(P)||ji(P))return w=w.get(S)||null,m(E,w,P,D,null);Oa(E,P)}return null}function N(w,E,S,P){for(var D=null,V=null,x=E,p=E=0,y=null;x!==null&&p<S.length;p++){x.index>p?(y=x,x=null):y=x.sibling;var k=g(w,x,S[p],P);if(k===null){x===null&&(x=y);break}t&&x&&k.alternate===null&&e(w,x),E=i(k,E,p),V===null?D=k:V.sibling=k,V=k,x=y}if(p===S.length)return n(w,x),Ee&&Fr(w,p),D;if(x===null){for(;p<S.length;p++)x=v(w,S[p],P),x!==null&&(E=i(x,E,p),V===null?D=x:V.sibling=x,V=x);return Ee&&Fr(w,p),D}for(x=r(w,x);p<S.length;p++)y=T(x,w,p,S[p],P),y!==null&&(t&&y.alternate!==null&&x.delete(y.key===null?p:y.key),E=i(y,E,p),V===null?D=y:V.sibling=y,V=y);return t&&x.forEach(function(I){return e(w,I)}),Ee&&Fr(w,p),D}function R(w,E,S,P){var D=ji(S);if(typeof D!="function")throw Error(F(150));if(S=D.call(S),S==null)throw Error(F(151));for(var V=D=null,x=E,p=E=0,y=null,k=S.next();x!==null&&!k.done;p++,k=S.next()){x.index>p?(y=x,x=null):y=x.sibling;var I=g(w,x,k.value,P);if(I===null){x===null&&(x=y);break}t&&x&&I.alternate===null&&e(w,x),E=i(I,E,p),V===null?D=I:V.sibling=I,V=I,x=y}if(k.done)return n(w,x),Ee&&Fr(w,p),D;if(x===null){for(;!k.done;p++,k=S.next())k=v(w,k.value,P),k!==null&&(E=i(k,E,p),V===null?D=k:V.sibling=k,V=k);return Ee&&Fr(w,p),D}for(x=r(w,x);!k.done;p++,k=S.next())k=T(x,w,p,k.value,P),k!==null&&(t&&k.alternate!==null&&x.delete(k.key===null?p:k.key),E=i(k,E,p),V===null?D=k:V.sibling=k,V=k);return t&&x.forEach(function(A){return e(w,A)}),Ee&&Fr(w,p),D}function O(w,E,S,P){if(typeof S=="object"&&S!==null&&S.type===bs&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ia:e:{for(var D=S.key,V=E;V!==null;){if(V.key===D){if(D=S.type,D===bs){if(V.tag===7){n(w,V.sibling),E=s(V,S.props.children),E.return=w,w=E;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qn&&ig(D)===V.type){n(w,V.sibling),E=s(V,S.props),E.ref=Fi(w,V,S),E.return=w,w=E;break e}n(w,V);break}else e(w,V);V=V.sibling}S.type===bs?(E=Gr(S.props.children,w.mode,P,S.key),E.return=w,w=E):(P=ll(S.type,S.key,S.props,null,w.mode,P),P.ref=Fi(w,E,S),P.return=w,w=P)}return o(w);case Ts:e:{for(V=S.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(w,E.sibling),E=s(E,S.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=Qc(S,w.mode,P),E.return=w,w=E}return o(w);case Qn:return V=S._init,O(w,E,V(S._payload),P)}if($i(S))return N(w,E,S,P);if(ji(S))return R(w,E,S,P);Oa(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(w,E.sibling),E=s(E,S),E.return=w,w=E):(n(w,E),E=Kc(S,w.mode,P),E.return=w,w=E),o(w)):n(w,E)}return O}var Xs=Tv(!0),bv=Tv(!1),Pl=Ar(null),Dl=null,Ds=null,tf=null;function nf(){tf=Ds=Dl=null}function rf(t){var e=Pl.current;we(Pl),t._currentValue=e}function Fd(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){Dl=t,tf=Ds=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function zt(t){var e=t._currentValue;if(tf!==t)if(t={context:t,memoizedValue:e,next:null},Ds===null){if(Dl===null)throw Error(F(308));Ds=t,Dl.dependencies={lanes:0,firstContext:t}}else Ds=Ds.next=t;return e}var $r=null;function sf(t){$r===null?$r=[t]:$r.push(t)}function Iv(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,sf(e)):(n.next=s.next,s.next=n),e.interleaved=n,Mn(t,r)}function Mn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Yn=!1;function of(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Sv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Cn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Mn(t,n)}return s=r.interleaved,s===null?(e.next=e,sf(r)):(e.next=s.next,s.next=e),r.interleaved=e,Mn(t,n)}function nl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}function og(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function jl(t,e,n,r){var s=t.updateQueue;Yn=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=t.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var v=s.baseState;o=0,m=d=c=null,l=i;do{var g=l.lane,T=l.eventTime;if((r&g)===g){m!==null&&(m=m.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var N=t,R=l;switch(g=e,T=n,R.tag){case 1:if(N=R.payload,typeof N=="function"){v=N.call(T,v,g);break e}v=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=R.payload,g=typeof N=="function"?N.call(T,v,g):N,g==null)break e;v=be({},v,g);break e;case 2:Yn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else T={eventTime:T,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=T,c=v):m=m.next=T,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(m===null&&(c=v),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=m,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Jr|=o,t.lanes=o,t.memoizedState=v}}function ag(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Go={},cn=Ar(Go),bo=Ar(Go),Io=Ar(Go);function Hr(t){if(t===Go)throw Error(F(174));return t}function af(t,e){switch(ye(Io,e),ye(bo,t),ye(cn,Go),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_d(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_d(e,t)}we(cn),ye(cn,e)}function Js(){we(cn),we(bo),we(Io)}function Nv(t){Hr(Io.current);var e=Hr(cn.current),n=_d(e,t.type);e!==n&&(ye(bo,t),ye(cn,n))}function lf(t){bo.current===t&&(we(cn),we(bo))}var ke=Ar(0);function Vl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bc=[];function uf(){for(var t=0;t<Bc.length;t++)Bc[t]._workInProgressVersionPrimary=null;Bc.length=0}var rl=Bn.ReactCurrentDispatcher,$c=Bn.ReactCurrentBatchConfig,Xr=0,Te=null,Fe=null,$e=null,Ml=!1,ro=!1,So=0,Ok=0;function nt(){throw Error(F(321))}function cf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Zt(t[n],e[n]))return!1;return!0}function df(t,e,n,r,s,i){if(Xr=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,rl.current=t===null||t.memoizedState===null?zk:Bk,t=n(r,s),ro){i=0;do{if(ro=!1,So=0,25<=i)throw Error(F(301));i+=1,$e=Fe=null,e.updateQueue=null,rl.current=$k,t=n(r,s)}while(ro)}if(rl.current=Ol,e=Fe!==null&&Fe.next!==null,Xr=0,$e=Fe=Te=null,Ml=!1,e)throw Error(F(300));return t}function hf(){var t=So!==0;return So=0,t}function on(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $e===null?Te.memoizedState=$e=t:$e=$e.next=t,$e}function Bt(){if(Fe===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Fe.next;var e=$e===null?Te.memoizedState:$e.next;if(e!==null)$e=e,Fe=t;else{if(t===null)throw Error(F(310));Fe=t,t={memoizedState:Fe.memoizedState,baseState:Fe.baseState,baseQueue:Fe.baseQueue,queue:Fe.queue,next:null},$e===null?Te.memoizedState=$e=t:$e=$e.next=t}return $e}function No(t,e){return typeof e=="function"?e(t):e}function Hc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Fe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var m=d.lane;if((Xr&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var v={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=v,o=r):c=c.next=v,Te.lanes|=m,Jr|=m}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,Zt(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,Jr|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qc(t){var e=Bt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Zt(i,e.memoizedState)||(xt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Av(){}function Cv(t,e){var n=Te,r=Bt(),s=e(),i=!Zt(r.memoizedState,s);if(i&&(r.memoizedState=s,xt=!0),r=r.queue,ff(Dv.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||$e!==null&&$e.memoizedState.tag&1){if(n.flags|=2048,Ao(9,Pv.bind(null,n,r,s,e),void 0,null),He===null)throw Error(F(349));Xr&30||Rv(n,e,s)}return s}function Rv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Pv(t,e,n,r){e.value=n,e.getSnapshot=r,jv(e)&&Vv(t)}function Dv(t,e,n){return n(function(){jv(e)&&Vv(t)})}function jv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Zt(t,n)}catch{return!0}}function Vv(t){var e=Mn(t,1);e!==null&&Xt(e,t,1,-1)}function lg(t){var e=on();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=Uk.bind(null,Te,t),[e.memoizedState,t]}function Ao(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Mv(){return Bt().memoizedState}function sl(t,e,n,r){var s=on();Te.flags|=t,s.memoizedState=Ao(1|e,n,void 0,r===void 0?null:r)}function vu(t,e,n,r){var s=Bt();r=r===void 0?null:r;var i=void 0;if(Fe!==null){var o=Fe.memoizedState;if(i=o.destroy,r!==null&&cf(r,o.deps)){s.memoizedState=Ao(e,n,i,r);return}}Te.flags|=t,s.memoizedState=Ao(1|e,n,i,r)}function ug(t,e){return sl(8390656,8,t,e)}function ff(t,e){return vu(2048,8,t,e)}function Ov(t,e){return vu(4,2,t,e)}function Lv(t,e){return vu(4,4,t,e)}function Fv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Uv(t,e,n){return n=n!=null?n.concat([t]):null,vu(4,4,Fv.bind(null,e,t),n)}function mf(){}function zv(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Bv(t,e){var n=Bt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&cf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $v(t,e,n){return Xr&21?(Zt(n,e)||(n=Ky(),Te.lanes|=n,Jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function Lk(t,e){var n=he;he=n!==0&&4>n?n:4,t(!0);var r=$c.transition;$c.transition={};try{t(!1),e()}finally{he=n,$c.transition=r}}function Hv(){return Bt().memoizedState}function Fk(t,e,n){var r=fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qv(t))Wv(e,n);else if(n=Iv(t,e,n,r),n!==null){var s=ft();Xt(n,t,r,s),Gv(n,e,r)}}function Uk(t,e,n){var r=fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qv(t))Wv(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,Zt(l,o)){var c=e.interleaved;c===null?(s.next=s,sf(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Iv(t,e,s,r),n!==null&&(s=ft(),Xt(n,t,r,s),Gv(n,e,r))}}function qv(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function Wv(t,e){ro=Ml=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gv(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Hh(t,n)}}var Ol={readContext:zt,useCallback:nt,useContext:nt,useEffect:nt,useImperativeHandle:nt,useInsertionEffect:nt,useLayoutEffect:nt,useMemo:nt,useReducer:nt,useRef:nt,useState:nt,useDebugValue:nt,useDeferredValue:nt,useTransition:nt,useMutableSource:nt,useSyncExternalStore:nt,useId:nt,unstable_isNewReconciler:!1},zk={readContext:zt,useCallback:function(t,e){return on().memoizedState=[t,e===void 0?null:e],t},useContext:zt,useEffect:ug,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,sl(4194308,4,Fv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return sl(4194308,4,t,e)},useInsertionEffect:function(t,e){return sl(4,2,t,e)},useMemo:function(t,e){var n=on();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=on();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Fk.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=on();return t={current:t},e.memoizedState=t},useState:lg,useDebugValue:mf,useDeferredValue:function(t){return on().memoizedState=t},useTransition:function(){var t=lg(!1),e=t[0];return t=Lk.bind(null,t[1]),on().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=on();if(Ee){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),He===null)throw Error(F(349));Xr&30||Rv(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,ug(Dv.bind(null,r,i,t),[t]),r.flags|=2048,Ao(9,Pv.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=on(),e=He.identifierPrefix;if(Ee){var n=In,r=bn;n=(r&~(1<<32-Yt(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=So++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Ok++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Bk={readContext:zt,useCallback:zv,useContext:zt,useEffect:ff,useImperativeHandle:Uv,useInsertionEffect:Ov,useLayoutEffect:Lv,useMemo:Bv,useReducer:Hc,useRef:Mv,useState:function(){return Hc(No)},useDebugValue:mf,useDeferredValue:function(t){var e=Bt();return $v(e,Fe.memoizedState,t)},useTransition:function(){var t=Hc(No)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Av,useSyncExternalStore:Cv,useId:Hv,unstable_isNewReconciler:!1},$k={readContext:zt,useCallback:zv,useContext:zt,useEffect:ff,useImperativeHandle:Uv,useInsertionEffect:Ov,useLayoutEffect:Lv,useMemo:Bv,useReducer:qc,useRef:Mv,useState:function(){return qc(No)},useDebugValue:mf,useDeferredValue:function(t){var e=Bt();return Fe===null?e.memoizedState=t:$v(e,Fe.memoizedState,t)},useTransition:function(){var t=qc(No)[0],e=Bt().memoizedState;return[t,e]},useMutableSource:Av,useSyncExternalStore:Cv,useId:Hv,unstable_isNewReconciler:!1};function Wt(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ud(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?us(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ft(),s=fr(t),i=Cn(r,s);i.payload=e,n!=null&&(i.callback=n),e=dr(t,i,s),e!==null&&(Xt(e,t,s,r),nl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ft(),s=fr(t),i=Cn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=dr(t,i,s),e!==null&&(Xt(e,t,s,r),nl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ft(),r=fr(t),s=Cn(n,r);s.tag=2,e!=null&&(s.callback=e),e=dr(t,s,r),e!==null&&(Xt(e,t,r,n),nl(e,t,r))}};function cg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(s,i):!0}function Kv(t,e,n){var r=!1,s=wr,i=e.contextType;return typeof i=="object"&&i!==null?i=zt(i):(s=Et(e)?Qr:lt.current,r=e.contextTypes,i=(r=r!=null)?Qs(t,s):wr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function dg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function zd(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},of(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=zt(i):(i=Et(e)?Qr:lt.current,s.context=Qs(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Ud(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_u.enqueueReplaceState(s,s.state,null),jl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",r=e;do n+=yE(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Wc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Hk=typeof WeakMap=="function"?WeakMap:Map;function Qv(t,e,n){n=Cn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fl||(Fl=!0,Jd=r),Bd(t,e)},n}function Yv(t,e,n){n=Cn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Bd(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Bd(t,e),typeof r!="function"&&(hr===null?hr=new Set([this]):hr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function hg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Hk;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sT.bind(null,t,e,n),e.then(t,t))}function fg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function mg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Cn(-1,1),e.tag=2,dr(n,e,1))),n.lanes|=1),t)}var qk=Bn.ReactCurrentOwner,xt=!1;function ht(t,e,n,r){e.child=t===null?bv(e,null,n,r):Xs(e,t.child,n,r)}function pg(t,e,n,r,s){n=n.render;var i=e.ref;return zs(e,s),r=df(t,e,n,r,i,s),n=hf(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(Ee&&n&&Jh(e),e.flags|=1,ht(t,e,r,s),e.child)}function gg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ef(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Xv(t,e,i,r,s)):(t=ll(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return On(t,e,s)}return e.flags|=1,t=mr(i,r),t.ref=e.ref,t.return=e,e.child=t}function Xv(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(wo(i,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,On(t,e,s)}return $d(t,e,n,r,s)}function Jv(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ye(Vs,bt),bt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ye(Vs,bt),bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ye(Vs,bt),bt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ye(Vs,bt),bt|=r;return ht(t,e,s,n),e.child}function Zv(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $d(t,e,n,r,s){var i=Et(n)?Qr:lt.current;return i=Qs(e,i),zs(e,s),n=df(t,e,n,r,i,s),r=hf(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,On(t,e,s)):(Ee&&r&&Jh(e),e.flags|=1,ht(t,e,n,s),e.child)}function yg(t,e,n,r,s){if(Et(n)){var i=!0;Al(e)}else i=!1;if(zs(e,s),e.stateNode===null)il(t,e),Kv(e,n,r),zd(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=zt(d):(d=Et(n)?Qr:lt.current,d=Qs(e,d));var m=n.getDerivedStateFromProps,v=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";v||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&dg(e,o,r,d),Yn=!1;var g=e.memoizedState;o.state=g,jl(e,r,o,s),c=e.memoizedState,l!==r||g!==c||wt.current||Yn?(typeof m=="function"&&(Ud(e,n,m,r),c=e.memoizedState),(l=Yn||cg(e,n,l,r,g,c,d))?(v||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Sv(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Wt(e.type,l),o.props=d,v=e.pendingProps,g=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=zt(c):(c=Et(n)?Qr:lt.current,c=Qs(e,c));var T=n.getDerivedStateFromProps;(m=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==v||g!==c)&&dg(e,o,r,c),Yn=!1,g=e.memoizedState,o.state=g,jl(e,r,o,s);var N=e.memoizedState;l!==v||g!==N||wt.current||Yn?(typeof T=="function"&&(Ud(e,n,T,r),N=e.memoizedState),(d=Yn||cg(e,n,d,r,g,N,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Hd(t,e,n,r,i,s)}function Hd(t,e,n,r,s,i){Zv(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&ng(e,n,!1),On(t,e,i);r=e.stateNode,qk.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Xs(e,t.child,null,i),e.child=Xs(e,null,l,i)):ht(t,e,l,i),e.memoizedState=r.state,s&&ng(e,n,!0),e.child}function e_(t){var e=t.stateNode;e.pendingContext?tg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&tg(t,e.context,!1),af(t,e.containerInfo)}function vg(t,e,n,r,s){return Ys(),ef(s),e.flags|=256,ht(t,e,n,r),e.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function Wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function t_(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ye(ke,s&1),t===null)return Ld(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Eu(o,r,0,null),t=Gr(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wd(n),e.memoizedState=qd,t):pf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Wk(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=mr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=mr(l,i):(i=Gr(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Wd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=qd,r}return i=t.child,t=i.sibling,r=mr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function pf(t,e){return e=Eu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function La(t,e,n,r){return r!==null&&ef(r),Xs(e,t.child,null,n),t=pf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Wk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Wc(Error(F(422))),La(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Eu({mode:"visible",children:r.children},s,0,null),i=Gr(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Xs(e,t.child,null,o),e.child.memoizedState=Wd(o),e.memoizedState=qd,i);if(!(e.mode&1))return La(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Wc(i,r,void 0),La(t,e,o,r)}if(l=(o&t.childLanes)!==0,xt||l){if(r=He,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Mn(t,s),Xt(r,t,s,-1))}return wf(),r=Wc(Error(F(421))),La(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,It=cr(s.nextSibling),Nt=e,Ee=!0,Kt=null,t!==null&&(jt[Vt++]=bn,jt[Vt++]=In,jt[Vt++]=Yr,bn=t.id,In=t.overflow,Yr=e),e=pf(e,r.children),e.flags|=4096,e)}function _g(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Fd(t.return,e,n)}function Gc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function n_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(ht(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&_g(t,n,e);else if(t.tag===19)_g(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ye(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gc(e,!0,n,null,i);break;case"together":Gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function il(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function On(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Gk(t,e,n){switch(e.tag){case 3:e_(e),Ys();break;case 5:Nv(e);break;case 1:Et(e.type)&&Al(e);break;case 4:af(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ye(Pl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ye(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?t_(t,e,n):(ye(ke,ke.current&1),t=On(t,e,n),t!==null?t.sibling:null);ye(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return n_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ye(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,Jv(t,e,n)}return On(t,e,n)}var r_,Gd,s_,i_;r_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Gd=function(){};s_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Hr(cn.current);var i=null;switch(n){case"input":s=pd(t,s),r=pd(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=vd(t,s),r=vd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Sl)}xd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&xe("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};i_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ui(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function rt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Kk(t,e,n){var r=e.pendingProps;switch(Zh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(e),null;case 1:return Et(e.type)&&Nl(),rt(e),null;case 3:return r=e.stateNode,Js(),we(wt),we(lt),uf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ma(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Kt!==null&&(th(Kt),Kt=null))),Gd(t,e),rt(e),null;case 5:lf(e);var s=Hr(Io.current);if(n=e.type,t!==null&&e.stateNode!=null)s_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return rt(e),null}if(t=Hr(cn.current),Ma(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ln]=e,r[To]=i,t=(e.mode&1)!==0,n){case"dialog":xe("cancel",r),xe("close",r);break;case"iframe":case"object":case"embed":xe("load",r);break;case"video":case"audio":for(s=0;s<qi.length;s++)xe(qi[s],r);break;case"source":xe("error",r);break;case"img":case"image":case"link":xe("error",r),xe("load",r);break;case"details":xe("toggle",r);break;case"input":Np(r,i),xe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},xe("invalid",r);break;case"textarea":Cp(r,i),xe("invalid",r)}xd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Va(r.textContent,l,t),s=["children",""+l]):mo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&xe("scroll",r)}switch(n){case"input":Sa(r),Ap(r,i,!0);break;case"textarea":Sa(r),Rp(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Sl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ln]=e,t[To]=r,r_(t,e,!1,!1),e.stateNode=t;e:{switch(o=wd(n,r),n){case"dialog":xe("cancel",t),xe("close",t),s=r;break;case"iframe":case"object":case"embed":xe("load",t),s=r;break;case"video":case"audio":for(s=0;s<qi.length;s++)xe(qi[s],t);s=r;break;case"source":xe("error",t),s=r;break;case"img":case"image":case"link":xe("error",t),xe("load",t),s=r;break;case"details":xe("toggle",t),s=r;break;case"input":Np(t,r),s=pd(t,r),xe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),xe("invalid",t);break;case"textarea":Cp(t,r),s=vd(t,r),xe("invalid",t);break;default:s=r}xd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?My(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jy(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&po(t,c):typeof c=="number"&&po(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&xe("scroll",t):c!=null&&Lh(t,i,c,o))}switch(n){case"input":Sa(t),Ap(t,r,!1);break;case"textarea":Sa(t),Rp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+xr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Os(t,!!r.multiple,i,!1):r.defaultValue!=null&&Os(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Sl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rt(e),null;case 6:if(t&&e.stateNode!=null)i_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=Hr(Io.current),Hr(cn.current),Ma(e)){if(r=e.stateNode,n=e.memoizedProps,r[ln]=e,(i=r.nodeValue!==n)&&(t=Nt,t!==null))switch(t.tag){case 3:Va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Va(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ln]=e,e.stateNode=r}return rt(e),null;case 13:if(we(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&It!==null&&e.mode&1&&!(e.flags&128))kv(),Ys(),e.flags|=98560,i=!1;else if(i=Ma(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[ln]=e}else Ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rt(e),i=!1}else Kt!==null&&(th(Kt),Kt=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?Ue===0&&(Ue=3):wf())),e.updateQueue!==null&&(e.flags|=4),rt(e),null);case 4:return Js(),Gd(t,e),t===null&&Eo(e.stateNode.containerInfo),rt(e),null;case 10:return rf(e.type._context),rt(e),null;case 17:return Et(e.type)&&Nl(),rt(e),null;case 19:if(we(ke),i=e.memoizedState,i===null)return rt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ui(i,!1);else{if(Ue!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vl(t),o!==null){for(e.flags|=128,Ui(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ye(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Pe()>ei&&(e.flags|=128,r=!0,Ui(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ui(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return rt(e),null}else 2*Pe()-i.renderingStartTime>ei&&n!==1073741824&&(e.flags|=128,r=!0,Ui(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Pe(),e.sibling=null,n=ke.current,ye(ke,r?n&1|2:n&1),e):(rt(e),null);case 22:case 23:return xf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?bt&1073741824&&(rt(e),e.subtreeFlags&6&&(e.flags|=8192)):rt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function Qk(t,e){switch(Zh(e),e.tag){case 1:return Et(e.type)&&Nl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Js(),we(wt),we(lt),uf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lf(e),null;case 13:if(we(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(ke),null;case 4:return Js(),null;case 10:return rf(e.type._context),null;case 22:case 23:return xf(),null;case 24:return null;default:return null}}var Fa=!1,ot=!1,Yk=typeof WeakSet=="function"?WeakSet:Set,H=null;function js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function Kd(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var xg=!1;function Xk(t,e){if(Rd=Tl,t=cv(),Xh(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,v=t,g=null;t:for(;;){for(var T;v!==n||s!==0&&v.nodeType!==3||(l=o+s),v!==i||r!==0&&v.nodeType!==3||(c=o+r),v.nodeType===3&&(o+=v.nodeValue.length),(T=v.firstChild)!==null;)g=v,v=T;for(;;){if(v===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++m===r&&(c=o),(T=v.nextSibling)!==null)break;v=g,g=v.parentNode}v=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pd={focusedElem:t,selectionRange:n},Tl=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var R=N.memoizedProps,O=N.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?R:Wt(e.type,R),O);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(P){Ae(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return N=xg,xg=!1,N}function so(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Kd(e,n,i)}s=s.next}while(s!==r)}}function xu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function o_(t){var e=t.alternate;e!==null&&(t.alternate=null,o_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ln],delete e[To],delete e[Vd],delete e[Dk],delete e[jk])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function a_(t){return t.tag===5||t.tag===3||t.tag===4}function wg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||a_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Sl));else if(r!==4&&(t=t.child,t!==null))for(Yd(t,e,n),t=t.sibling;t!==null;)Yd(t,e,n),t=t.sibling}function Xd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xd(t,e,n),t=t.sibling;t!==null;)Xd(t,e,n),t=t.sibling}var Ge=null,Gt=!1;function Gn(t,e,n){for(n=n.child;n!==null;)l_(t,e,n),n=n.sibling}function l_(t,e,n){if(un&&typeof un.onCommitFiberUnmount=="function")try{un.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:ot||js(n,e);case 6:var r=Ge,s=Gt;Ge=null,Gn(t,e,n),Ge=r,Gt=s,Ge!==null&&(Gt?(t=Ge,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ge.removeChild(n.stateNode));break;case 18:Ge!==null&&(Gt?(t=Ge,n=n.stateNode,t.nodeType===8?Uc(t.parentNode,n):t.nodeType===1&&Uc(t,n),_o(t)):Uc(Ge,n.stateNode));break;case 4:r=Ge,s=Gt,Ge=n.stateNode.containerInfo,Gt=!0,Gn(t,e,n),Ge=r,Gt=s;break;case 0:case 11:case 14:case 15:if(!ot&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kd(n,e,o),s=s.next}while(s!==r)}Gn(t,e,n);break;case 1:if(!ot&&(js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ae(n,e,l)}Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:n.mode&1?(ot=(r=ot)||n.memoizedState!==null,Gn(t,e,n),ot=r):Gn(t,e,n);break;default:Gn(t,e,n)}}function Eg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Yk),e.forEach(function(r){var s=oT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function qt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ge=l.stateNode,Gt=!1;break e;case 3:Ge=l.stateNode.containerInfo,Gt=!0;break e;case 4:Ge=l.stateNode.containerInfo,Gt=!0;break e}l=l.return}if(Ge===null)throw Error(F(160));l_(i,o,s),Ge=null,Gt=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)u_(e,t),e=e.sibling}function u_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qt(e,t),sn(t),r&4){try{so(3,t,t.return),xu(3,t)}catch(R){Ae(t,t.return,R)}try{so(5,t,t.return)}catch(R){Ae(t,t.return,R)}}break;case 1:qt(e,t),sn(t),r&512&&n!==null&&js(n,n.return);break;case 5:if(qt(e,t),sn(t),r&512&&n!==null&&js(n,n.return),t.flags&32){var s=t.stateNode;try{po(s,"")}catch(R){Ae(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ry(s,i),wd(l,o);var d=wd(l,i);for(o=0;o<c.length;o+=2){var m=c[o],v=c[o+1];m==="style"?My(s,v):m==="dangerouslySetInnerHTML"?jy(s,v):m==="children"?po(s,v):Lh(s,m,v,d)}switch(l){case"input":gd(s,i);break;case"textarea":Py(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?Os(s,!!i.multiple,T,!1):g!==!!i.multiple&&(i.defaultValue!=null?Os(s,!!i.multiple,i.defaultValue,!0):Os(s,!!i.multiple,i.multiple?[]:"",!1))}s[To]=i}catch(R){Ae(t,t.return,R)}}break;case 6:if(qt(e,t),sn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){Ae(t,t.return,R)}}break;case 3:if(qt(e,t),sn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_o(e.containerInfo)}catch(R){Ae(t,t.return,R)}break;case 4:qt(e,t),sn(t);break;case 13:qt(e,t),sn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(vf=Pe())),r&4&&Eg(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(ot=(d=ot)||m,qt(e,t),ot=d):qt(e,t),sn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!m&&t.mode&1)for(H=t,m=t.child;m!==null;){for(v=H=m;H!==null;){switch(g=H,T=g.child,g.tag){case 0:case 11:case 14:case 15:so(4,g,g.return);break;case 1:js(g,g.return);var N=g.stateNode;if(typeof N.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(R){Ae(r,n,R)}}break;case 5:js(g,g.return);break;case 22:if(g.memoizedState!==null){Tg(v);continue}}T!==null?(T.return=g,H=T):Tg(v)}m=m.sibling}e:for(m=null,v=t;;){if(v.tag===5){if(m===null){m=v;try{s=v.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=v.stateNode,c=v.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Vy("display",o))}catch(R){Ae(t,t.return,R)}}}else if(v.tag===6){if(m===null)try{v.stateNode.nodeValue=d?"":v.memoizedProps}catch(R){Ae(t,t.return,R)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;m===v&&(m=null),v=v.return}m===v&&(m=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:qt(e,t),sn(t),r&4&&Eg(t);break;case 21:break;default:qt(e,t),sn(t)}}function sn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(a_(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(po(s,""),r.flags&=-33);var i=wg(t);Xd(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=wg(t);Yd(t,l,o);break;default:throw Error(F(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Jk(t,e,n){H=t,c_(t)}function c_(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fa;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ot;l=Fa;var d=ot;if(Fa=o,(ot=c)&&!d)for(H=s;H!==null;)o=H,c=o.child,o.tag===22&&o.memoizedState!==null?bg(s):c!==null?(c.return=o,H=c):bg(s);for(;i!==null;)H=i,c_(i),i=i.sibling;H=s,Fa=l,ot=d}kg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):kg(t)}}function kg(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ot||xu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ot)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Wt(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ag(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ag(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var v=m.dehydrated;v!==null&&_o(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ot||e.flags&512&&Qd(e)}catch(g){Ae(e,e.return,g)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Tg(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function bg(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xu(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ae(e,s,c)}}var i=e.return;try{Qd(e)}catch(c){Ae(e,i,c)}break;case 5:var o=e.return;try{Qd(e)}catch(c){Ae(e,o,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){H=null;break}var l=e.sibling;if(l!==null){l.return=e.return,H=l;break}H=e.return}}var Zk=Math.ceil,Ll=Bn.ReactCurrentDispatcher,gf=Bn.ReactCurrentOwner,Ft=Bn.ReactCurrentBatchConfig,ae=0,He=null,Ve=null,Ye=0,bt=0,Vs=Ar(0),Ue=0,Co=null,Jr=0,wu=0,yf=0,io=null,vt=null,vf=0,ei=1/0,kn=null,Fl=!1,Jd=null,hr=null,Ua=!1,sr=null,Ul=0,oo=0,Zd=null,ol=-1,al=0;function ft(){return ae&6?Pe():ol!==-1?ol:ol=Pe()}function fr(t){return t.mode&1?ae&2&&Ye!==0?Ye&-Ye:Mk.transition!==null?(al===0&&(al=Ky()),al):(t=he,t!==0||(t=window.event,t=t===void 0?16:tv(t.type)),t):1}function Xt(t,e,n,r){if(50<oo)throw oo=0,Zd=null,Error(F(185));Ho(t,n,r),(!(ae&2)||t!==He)&&(t===He&&(!(ae&2)&&(wu|=n),Ue===4&&Jn(t,Ye)),kt(t,r),n===1&&ae===0&&!(e.mode&1)&&(ei=Pe()+500,yu&&Cr()))}function kt(t,e){var n=t.callbackNode;ME(t,e);var r=kl(t,t===He?Ye:0);if(r===0)n!==null&&jp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jp(n),e===1)t.tag===0?Vk(Ig.bind(null,t)):xv(Ig.bind(null,t)),Rk(function(){!(ae&6)&&Cr()}),n=null;else{switch(Qy(r)){case 1:n=$h;break;case 4:n=Wy;break;case 16:n=El;break;case 536870912:n=Gy;break;default:n=El}n=v_(n,d_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function d_(t,e){if(ol=-1,al=0,ae&6)throw Error(F(327));var n=t.callbackNode;if(Bs()&&t.callbackNode!==n)return null;var r=kl(t,t===He?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=zl(t,r);else{e=r;var s=ae;ae|=2;var i=f_();(He!==t||Ye!==e)&&(kn=null,ei=Pe()+500,Wr(t,e));do try{nT();break}catch(l){h_(t,l)}while(!0);nf(),Ll.current=i,ae=s,Ve!==null?e=0:(He=null,Ye=0,e=Ue)}if(e!==0){if(e===2&&(s=Id(t),s!==0&&(r=s,e=eh(t,s))),e===1)throw n=Co,Wr(t,0),Jn(t,r),kt(t,Pe()),n;if(e===6)Jn(t,r);else{if(s=t.current.alternate,!(r&30)&&!eT(s)&&(e=zl(t,r),e===2&&(i=Id(t),i!==0&&(r=i,e=eh(t,i))),e===1))throw n=Co,Wr(t,0),Jn(t,r),kt(t,Pe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:Ur(t,vt,kn);break;case 3:if(Jn(t,r),(r&130023424)===r&&(e=vf+500-Pe(),10<e)){if(kl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=jd(Ur.bind(null,t,vt,kn),e);break}Ur(t,vt,kn);break;case 4:if(Jn(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yt(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Pe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Zk(r/1960))-r,10<r){t.timeoutHandle=jd(Ur.bind(null,t,vt,kn),r);break}Ur(t,vt,kn);break;case 5:Ur(t,vt,kn);break;default:throw Error(F(329))}}}return kt(t,Pe()),t.callbackNode===n?d_.bind(null,t):null}function eh(t,e){var n=io;return t.current.memoizedState.isDehydrated&&(Wr(t,e).flags|=256),t=zl(t,e),t!==2&&(e=vt,vt=n,e!==null&&th(e)),t}function th(t){vt===null?vt=t:vt.push.apply(vt,t)}function eT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Zt(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Jn(t,e){for(e&=~yf,e&=~wu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yt(e),r=1<<n;t[n]=-1,e&=~r}}function Ig(t){if(ae&6)throw Error(F(327));Bs();var e=kl(t,0);if(!(e&1))return kt(t,Pe()),null;var n=zl(t,e);if(t.tag!==0&&n===2){var r=Id(t);r!==0&&(e=r,n=eh(t,r))}if(n===1)throw n=Co,Wr(t,0),Jn(t,e),kt(t,Pe()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ur(t,vt,kn),kt(t,Pe()),null}function _f(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ei=Pe()+500,yu&&Cr())}}function Zr(t){sr!==null&&sr.tag===0&&!(ae&6)&&Bs();var e=ae;ae|=1;var n=Ft.transition,r=he;try{if(Ft.transition=null,he=1,t)return t()}finally{he=r,Ft.transition=n,ae=e,!(ae&6)&&Cr()}}function xf(){bt=Vs.current,we(Vs)}function Wr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Ck(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(Zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nl();break;case 3:Js(),we(wt),we(lt),uf();break;case 5:lf(r);break;case 4:Js();break;case 13:we(ke);break;case 19:we(ke);break;case 10:rf(r.type._context);break;case 22:case 23:xf()}n=n.return}if(He=t,Ve=t=mr(t.current,null),Ye=bt=e,Ue=0,Co=null,yf=wu=Jr=0,vt=io=null,$r!==null){for(e=0;e<$r.length;e++)if(n=$r[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}$r=null}return t}function h_(t,e){do{var n=Ve;try{if(nf(),rl.current=Ol,Ml){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Ml=!1}if(Xr=0,$e=Fe=Te=null,ro=!1,So=0,gf.current=null,n===null||n.return===null){Ue=1,Co=e,Ve=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ye,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,v=m.tag;if(!(m.mode&1)&&(v===0||v===11||v===15)){var g=m.alternate;g?(m.updateQueue=g.updateQueue,m.memoizedState=g.memoizedState,m.lanes=g.lanes):(m.updateQueue=null,m.memoizedState=null)}var T=fg(o);if(T!==null){T.flags&=-257,mg(T,o,l,i,e),T.mode&1&&hg(i,d,e),e=T,c=d;var N=e.updateQueue;if(N===null){var R=new Set;R.add(c),e.updateQueue=R}else N.add(c);break e}else{if(!(e&1)){hg(i,d,e),wf();break e}c=Error(F(426))}}else if(Ee&&l.mode&1){var O=fg(o);if(O!==null){!(O.flags&65536)&&(O.flags|=256),mg(O,o,l,i,e),ef(Zs(c,l));break e}}i=c=Zs(c,l),Ue!==4&&(Ue=2),io===null?io=[i]:io.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Qv(i,c,e);og(i,w);break e;case 1:l=c;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(hr===null||!hr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=Yv(i,l,e);og(i,P);break e}}i=i.return}while(i!==null)}p_(n)}catch(D){e=D,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function f_(){var t=Ll.current;return Ll.current=Ol,t===null?Ol:t}function wf(){(Ue===0||Ue===3||Ue===2)&&(Ue=4),He===null||!(Jr&268435455)&&!(wu&268435455)||Jn(He,Ye)}function zl(t,e){var n=ae;ae|=2;var r=f_();(He!==t||Ye!==e)&&(kn=null,Wr(t,e));do try{tT();break}catch(s){h_(t,s)}while(!0);if(nf(),ae=n,Ll.current=r,Ve!==null)throw Error(F(261));return He=null,Ye=0,Ue}function tT(){for(;Ve!==null;)m_(Ve)}function nT(){for(;Ve!==null&&!SE();)m_(Ve)}function m_(t){var e=y_(t.alternate,t,bt);t.memoizedProps=t.pendingProps,e===null?p_(t):Ve=e,gf.current=null}function p_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Qk(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ue=6,Ve=null;return}}else if(n=Kk(n,e,bt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Ue===0&&(Ue=5)}function Ur(t,e,n){var r=he,s=Ft.transition;try{Ft.transition=null,he=1,rT(t,e,n,r)}finally{Ft.transition=s,he=r}return null}function rT(t,e,n,r){do Bs();while(sr!==null);if(ae&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(OE(t,i),t===He&&(Ve=He=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ua||(Ua=!0,v_(El,function(){return Bs(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ft.transition,Ft.transition=null;var o=he;he=1;var l=ae;ae|=4,gf.current=null,Xk(t,n),u_(n,t),kk(Pd),Tl=!!Rd,Pd=Rd=null,t.current=n,Jk(n),NE(),ae=l,he=o,Ft.transition=i}else t.current=n;if(Ua&&(Ua=!1,sr=t,Ul=s),i=t.pendingLanes,i===0&&(hr=null),RE(n.stateNode),kt(t,Pe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fl)throw Fl=!1,t=Jd,Jd=null,t;return Ul&1&&t.tag!==0&&Bs(),i=t.pendingLanes,i&1?t===Zd?oo++:(oo=0,Zd=t):oo=0,Cr(),null}function Bs(){if(sr!==null){var t=Qy(Ul),e=Ft.transition,n=he;try{if(Ft.transition=null,he=16>t?16:t,sr===null)var r=!1;else{if(t=sr,sr=null,Ul=0,ae&6)throw Error(F(331));var s=ae;for(ae|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(H=d;H!==null;){var m=H;switch(m.tag){case 0:case 11:case 15:so(8,m,i)}var v=m.child;if(v!==null)v.return=m,H=v;else for(;H!==null;){m=H;var g=m.sibling,T=m.return;if(o_(m),m===d){H=null;break}if(g!==null){g.return=T,H=g;break}H=T}}}var N=i.alternate;if(N!==null){var R=N.child;if(R!==null){N.child=null;do{var O=R.sibling;R.sibling=null,R=O}while(R!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:so(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,H=w;break e}H=i.return}}var E=t.current;for(H=E;H!==null;){o=H;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,H=S;else e:for(o=E;H!==null;){if(l=H,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xu(9,l)}}catch(D){Ae(l,l.return,D)}if(l===o){H=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,H=P;break e}H=l.return}}if(ae=s,Cr(),un&&typeof un.onPostCommitFiberRoot=="function")try{un.onPostCommitFiberRoot(hu,t)}catch{}r=!0}return r}finally{he=n,Ft.transition=e}}return!1}function Sg(t,e,n){e=Zs(n,e),e=Qv(t,e,1),t=dr(t,e,1),e=ft(),t!==null&&(Ho(t,1,e),kt(t,e))}function Ae(t,e,n){if(t.tag===3)Sg(t,t,n);else for(;e!==null;){if(e.tag===3){Sg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hr===null||!hr.has(r))){t=Zs(n,t),t=Yv(e,t,1),e=dr(e,t,1),t=ft(),e!==null&&(Ho(e,1,t),kt(e,t));break}}e=e.return}}function sT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ft(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Ye&n)===n&&(Ue===4||Ue===3&&(Ye&130023424)===Ye&&500>Pe()-vf?Wr(t,0):yf|=n),kt(t,e)}function g_(t,e){e===0&&(t.mode&1?(e=Ca,Ca<<=1,!(Ca&130023424)&&(Ca=4194304)):e=1);var n=ft();t=Mn(t,e),t!==null&&(Ho(t,e,n),kt(t,n))}function iT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),g_(t,n)}function oT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),g_(t,n)}var y_;y_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,Gk(t,e,n);xt=!!(t.flags&131072)}else xt=!1,Ee&&e.flags&1048576&&wv(e,Rl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;il(t,e),t=e.pendingProps;var s=Qs(e,lt.current);zs(e,n),s=df(null,e,r,t,s,n);var i=hf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Et(r)?(i=!0,Al(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,of(e),s.updater=_u,e.stateNode=s,s._reactInternals=e,zd(e,r,t,n),e=Hd(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&Jh(e),ht(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(il(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lT(r),t=Wt(r,t),s){case 0:e=$d(null,e,r,t,n);break e;case 1:e=yg(null,e,r,t,n);break e;case 11:e=pg(null,e,r,t,n);break e;case 14:e=gg(null,e,r,Wt(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),$d(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),yg(t,e,r,s,n);case 3:e:{if(e_(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Sv(t,e),jl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zs(Error(F(423)),e),e=vg(t,e,r,n,s);break e}else if(r!==s){s=Zs(Error(F(424)),e),e=vg(t,e,r,n,s);break e}else for(It=cr(e.stateNode.containerInfo.firstChild),Nt=e,Ee=!0,Kt=null,n=bv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ys(),r===s){e=On(t,e,n);break e}ht(t,e,r,n)}e=e.child}return e;case 5:return Nv(e),t===null&&Ld(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Dd(r,s)?o=null:i!==null&&Dd(r,i)&&(e.flags|=32),Zv(t,e),ht(t,e,o,n),e.child;case 6:return t===null&&Ld(e),null;case 13:return t_(t,e,n);case 4:return af(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Xs(e,null,r,n):ht(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),pg(t,e,r,s,n);case 7:return ht(t,e,e.pendingProps,n),e.child;case 8:return ht(t,e,e.pendingProps.children,n),e.child;case 12:return ht(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ye(Pl,r._currentValue),r._currentValue=o,i!==null)if(Zt(i.value,o)){if(i.children===s.children&&!wt.current){e=On(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Cn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Fd(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Fd(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ht(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,zs(e,n),s=zt(s),r=r(s),e.flags|=1,ht(t,e,r,n),e.child;case 14:return r=e.type,s=Wt(r,e.pendingProps),s=Wt(r.type,s),gg(t,e,r,s,n);case 15:return Xv(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:Wt(r,s),il(t,e),e.tag=1,Et(r)?(t=!0,Al(e)):t=!1,zs(e,n),Kv(e,r,s),zd(e,r,s,n),Hd(null,e,r,!0,t,n);case 19:return n_(t,e,n);case 22:return Jv(t,e,n)}throw Error(F(156,e.tag))};function v_(t,e){return qy(t,e)}function aT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(t,e,n,r){return new aT(t,e,n,r)}function Ef(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lT(t){if(typeof t=="function")return Ef(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Uh)return 11;if(t===zh)return 14}return 2}function mr(t,e){var n=t.alternate;return n===null?(n=Lt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ll(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Ef(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case bs:return Gr(n.children,s,i,e);case Fh:o=8,s|=8;break;case dd:return t=Lt(12,n,e,s|2),t.elementType=dd,t.lanes=i,t;case hd:return t=Lt(13,n,e,s),t.elementType=hd,t.lanes=i,t;case fd:return t=Lt(19,n,e,s),t.elementType=fd,t.lanes=i,t;case Ny:return Eu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Iy:o=10;break e;case Sy:o=9;break e;case Uh:o=11;break e;case zh:o=14;break e;case Qn:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Lt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Gr(t,e,n,r){return t=Lt(7,t,r,e),t.lanes=n,t}function Eu(t,e,n,r){return t=Lt(22,t,r,e),t.elementType=Ny,t.lanes=n,t.stateNode={isHidden:!1},t}function Kc(t,e,n){return t=Lt(6,t,null,e),t.lanes=n,t}function Qc(t,e,n){return e=Lt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function uT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ac(0),this.expirationTimes=Ac(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ac(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function kf(t,e,n,r,s,i,o,l,c){return t=new uT(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Lt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},of(i),t}function cT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ts,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function __(t){if(!t)return wr;t=t._reactInternals;e:{if(us(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Et(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Et(n))return _v(t,n,e)}return e}function x_(t,e,n,r,s,i,o,l,c){return t=kf(n,r,!0,t,s,i,o,l,c),t.context=__(null),n=t.current,r=ft(),s=fr(n),i=Cn(r,s),i.callback=e??null,dr(n,i,s),t.current.lanes=s,Ho(t,s,r),kt(t,r),t}function ku(t,e,n,r){var s=e.current,i=ft(),o=fr(s);return n=__(n),e.context===null?e.context=n:e.pendingContext=n,e=Cn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=dr(s,e,o),t!==null&&(Xt(t,s,o,i),nl(t,s,o)),o}function Bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ng(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tf(t,e){Ng(t,e),(t=t.alternate)&&Ng(t,e)}function dT(){return null}var w_=typeof reportError=="function"?reportError:function(t){console.error(t)};function bf(t){this._internalRoot=t}Tu.prototype.render=bf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));ku(t,e,null,null)};Tu.prototype.unmount=bf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zr(function(){ku(null,t,null,null)}),e[Vn]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xn.length&&e!==0&&e<Xn[n].priority;n++);Xn.splice(n,0,t),n===0&&ev(t)}};function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ag(){}function hT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Bl(o);i.call(d)}}var o=x_(e,r,t,0,null,!1,!1,"",Ag);return t._reactRootContainer=o,t[Vn]=o.current,Eo(t.nodeType===8?t.parentNode:t),Zr(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Bl(c);l.call(d)}}var c=kf(t,0,!1,null,null,!1,!1,"",Ag);return t._reactRootContainer=c,t[Vn]=c.current,Eo(t.nodeType===8?t.parentNode:t),Zr(function(){ku(e,c,n,r)}),c}function Iu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Bl(o);l.call(c)}}ku(e,o,t,s)}else o=hT(n,e,t,s,r);return Bl(o)}Yy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Hi(e.pendingLanes);n!==0&&(Hh(e,n|1),kt(e,Pe()),!(ae&6)&&(ei=Pe()+500,Cr()))}break;case 13:Zr(function(){var r=Mn(t,1);if(r!==null){var s=ft();Xt(r,t,1,s)}}),Tf(t,1)}};qh=function(t){if(t.tag===13){var e=Mn(t,134217728);if(e!==null){var n=ft();Xt(e,t,134217728,n)}Tf(t,134217728)}};Xy=function(t){if(t.tag===13){var e=fr(t),n=Mn(t,e);if(n!==null){var r=ft();Xt(n,t,e,r)}Tf(t,e)}};Jy=function(){return he};Zy=function(t,e){var n=he;try{return he=t,e()}finally{he=n}};kd=function(t,e,n){switch(e){case"input":if(gd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=gu(r);if(!s)throw Error(F(90));Cy(r),gd(r,s)}}}break;case"textarea":Py(t,n);break;case"select":e=n.value,e!=null&&Os(t,!!n.multiple,e,!1)}};Fy=_f;Uy=Zr;var fT={usingClientEntryPoint:!1,Events:[Wo,As,gu,Oy,Ly,_f]},zi={findFiberByHostInstance:Br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mT={bundleType:zi.bundleType,version:zi.version,rendererPackageName:zi.rendererPackageName,rendererConfig:zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$y(t),t===null?null:t.stateNode},findFiberByHostInstance:zi.findFiberByHostInstance||dT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{hu=za.inject(mT),un=za}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fT;Rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(e))throw Error(F(200));return cT(t,e,null,n)};Rt.createRoot=function(t,e){if(!If(t))throw Error(F(299));var n=!1,r="",s=w_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=kf(t,1,!1,null,null,n,!1,r,s),t[Vn]=e.current,Eo(t.nodeType===8?t.parentNode:t),new bf(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=$y(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return Zr(t)};Rt.hydrate=function(t,e,n){if(!bu(e))throw Error(F(200));return Iu(null,t,e,!0,n)};Rt.hydrateRoot=function(t,e,n){if(!If(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=w_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=x_(e,null,t,1,n??null,s,!1,i,o),t[Vn]=e.current,Eo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tu(e)};Rt.render=function(t,e,n){if(!bu(e))throw Error(F(200));return Iu(null,t,e,!1,n)};Rt.unmountComponentAtNode=function(t){if(!bu(t))throw Error(F(40));return t._reactRootContainer?(Zr(function(){Iu(null,null,t,!1,function(){t._reactRootContainer=null,t[Vn]=null})}),!0):!1};Rt.unstable_batchedUpdates=_f;Rt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Iu(t,e,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function E_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(E_)}catch(t){console.error(t)}}E_(),Ey.exports=Rt;var pT=Ey.exports,k_,Cg=pT;k_=Cg.createRoot,Cg.hydrateRoot;const gT=()=>{};var Rg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},yT=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},b_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,m=i>>2,v=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,T=d&63;c||(T=64,o||(g=64)),r.push(n[m],n[v],n[g],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(T_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):yT(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const v=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||v==null)throw new vT;const g=i<<2|l>>4;if(r.push(g),d!==64){const T=l<<4&240|d>>2;if(r.push(T),v!==64){const N=d<<6&192|v;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class vT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const _T=function(t){const e=T_(t);return b_.encodeByteArray(e,!0)},$l=function(t){return _T(t).replace(/\./g,"")},I_=function(t){try{return b_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=()=>xT().__FIREBASE_DEFAULTS__,ET=()=>{if(typeof process>"u"||typeof Rg>"u")return;const t=Rg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},kT=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&I_(t[1]);return e&&JSON.parse(e)},Su=()=>{try{return gT()||wT()||ET()||kT()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},S_=t=>{var e,n;return(n=(e=Su())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},TT=t=>{const e=S_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N_=()=>{var t;return(t=Su())==null?void 0:t.config},A_=t=>{var e;return(e=Su())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function C_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[$l(JSON.stringify(n)),$l(JSON.stringify(o)),""].join(".")}const ao={};function ST(){const t={prod:[],emulator:[]};for(const e of Object.keys(ao))ao[e]?t.emulator.push(e):t.prod.push(e);return t}function NT(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Pg=!1;function R_(t,e){if(typeof window>"u"||typeof document>"u"||!hi(window.location.host)||ao[t]===e||ao[t]||Pg)return;ao[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=ST().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,T){g.setAttribute("width","24"),g.setAttribute("id",T),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Pg=!0,o()},g}function m(g,T){g.setAttribute("id",T),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function v(){const g=NT(r),T=n("text"),N=document.getElementById(T)||document.createElement("span"),R=n("learnmore"),O=document.getElementById(R)||document.createElement("a"),w=n("preprendIcon"),E=document.getElementById(w)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const S=g.element;l(S),m(O,R);const P=d();c(E,w),S.append(E,N,O,P),document.body.appendChild(S)}i?(N.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function AT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function CT(){var e;const t=(e=Su())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function RT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function PT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jT(){const t=ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function VT(){return!CT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function MT(){try{return typeof indexedDB=="object"}catch{return!1}}function OT(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="FirebaseError";class $n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LT,Object.setPrototypeOf(this,$n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ko.prototype.create)}}class Ko{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FT(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new $n(s,l,r)}}function FT(t,e){return t.replace(UT,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const UT=/\{\$([^}]+)}/g;function zT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function es(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Dg(i)&&Dg(o)){if(!es(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Dg(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wi(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Gi(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BT(t,e){const n=new $T(t,e);return n.subscribe.bind(n)}class $T{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HT(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Yc),s.error===void 0&&(s.error=Yc),s.complete===void 0&&(s.complete=Yc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HT(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new bT;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GT(e))try{this.getOrInitializeService({instanceIdentifier:zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zr){return this.instances.has(e)}getOptions(e=zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:WT(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zr){return this.component?this.component.multipleInstances?e:zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WT(t){return t===zr?void 0:t}function GT(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qT(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const QT={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},YT=ne.INFO,XT={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},JT=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=XT[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sf{constructor(e){this.name=e,this._logLevel=YT,this._logHandler=JT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?QT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const ZT=(t,e)=>e.some(n=>t instanceof n);let jg,Vg;function eb(){return jg||(jg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tb(){return Vg||(Vg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const P_=new WeakMap,nh=new WeakMap,D_=new WeakMap,Xc=new WeakMap,Nf=new WeakMap;function nb(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(pr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&P_.set(n,t)}).catch(()=>{}),Nf.set(e,t),e}function rb(t){if(nh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});nh.set(t,e)}let rh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return nh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||D_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return pr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sb(t){rh=t(rh)}function ib(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jc(this),e,...n);return D_.set(r,e.sort?e.sort():[e]),pr(r)}:tb().includes(t)?function(...e){return t.apply(Jc(this),e),pr(P_.get(this))}:function(...e){return pr(t.apply(Jc(this),e))}}function ob(t){return typeof t=="function"?ib(t):(t instanceof IDBTransaction&&rb(t),ZT(t,eb())?new Proxy(t,rh):t)}function pr(t){if(t instanceof IDBRequest)return nb(t);if(Xc.has(t))return Xc.get(t);const e=ob(t);return e!==t&&(Xc.set(t,e),Nf.set(e,t)),e}const Jc=t=>Nf.get(t);function ab(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=pr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(pr(o.result),c.oldVersion,c.newVersion,pr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const lb=["get","getKey","getAll","getAllKeys","count"],ub=["put","add","delete","clear"],Zc=new Map;function Mg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Zc.get(e))return Zc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=ub.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||lb.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Zc.set(e,i),i}sb(t=>({...t,get:(e,n,r)=>Mg(e,n)||t.get(e,n,r),has:(e,n)=>!!Mg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(db(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function db(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sh="@firebase/app",Og="0.14.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new Sf("@firebase/app"),hb="@firebase/app-compat",fb="@firebase/analytics-compat",mb="@firebase/analytics",pb="@firebase/app-check-compat",gb="@firebase/app-check",yb="@firebase/auth",vb="@firebase/auth-compat",_b="@firebase/database",xb="@firebase/data-connect",wb="@firebase/database-compat",Eb="@firebase/functions",kb="@firebase/functions-compat",Tb="@firebase/installations",bb="@firebase/installations-compat",Ib="@firebase/messaging",Sb="@firebase/messaging-compat",Nb="@firebase/performance",Ab="@firebase/performance-compat",Cb="@firebase/remote-config",Rb="@firebase/remote-config-compat",Pb="@firebase/storage",Db="@firebase/storage-compat",jb="@firebase/firestore",Vb="@firebase/ai",Mb="@firebase/firestore-compat",Ob="firebase",Lb="12.0.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="[DEFAULT]",Fb={[sh]:"fire-core",[hb]:"fire-core-compat",[mb]:"fire-analytics",[fb]:"fire-analytics-compat",[gb]:"fire-app-check",[pb]:"fire-app-check-compat",[yb]:"fire-auth",[vb]:"fire-auth-compat",[_b]:"fire-rtdb",[xb]:"fire-data-connect",[wb]:"fire-rtdb-compat",[Eb]:"fire-fn",[kb]:"fire-fn-compat",[Tb]:"fire-iid",[bb]:"fire-iid-compat",[Ib]:"fire-fcm",[Sb]:"fire-fcm-compat",[Nb]:"fire-perf",[Ab]:"fire-perf-compat",[Cb]:"fire-rc",[Rb]:"fire-rc-compat",[Pb]:"fire-gcs",[Db]:"fire-gcs-compat",[jb]:"fire-fst",[Mb]:"fire-fst-compat",[Vb]:"fire-vertex","fire-js":"fire-js",[Ob]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hl=new Map,Ub=new Map,oh=new Map;function Lg(t,e){try{t.container.addComponent(e)}catch(n){Ln.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ti(t){const e=t.name;if(oh.has(e))return Ln.debug(`There were multiple attempts to register component ${e}.`),!1;oh.set(e,t);for(const n of Hl.values())Lg(n,t);for(const n of Ub.values())Lg(n,t);return!0}function Af(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Mt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gr=new Ko("app","Firebase",zb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=Lb;function ns(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ih,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw gr.create("bad-app-name",{appName:String(s)});if(n||(n=N_()),!n)throw gr.create("no-options");const i=Hl.get(s);if(i){if(es(n,i.options)&&es(r,i.config))return i;throw gr.create("duplicate-app",{appName:s})}const o=new KT(s);for(const c of oh.values())o.addComponent(c);const l=new Bb(n,r,o);return Hl.set(s,l),l}function j_(t=ih){const e=Hl.get(t);if(!e&&t===ih&&N_())return ns();if(!e)throw gr.create("no-app",{appName:t});return e}function yr(t,e,n){let r=Fb[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ln.warn(o.join(" "));return}ti(new ts(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b="firebase-heartbeat-database",Hb=1,Ro="firebase-heartbeat-store";let ed=null;function V_(){return ed||(ed=ab($b,Hb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ro)}catch(n){console.warn(n)}}}}).catch(t=>{throw gr.create("idb-open",{originalErrorMessage:t.message})})),ed}async function qb(t){try{const n=(await V_()).transaction(Ro),r=await n.objectStore(Ro).get(M_(t));return await n.done,r}catch(e){if(e instanceof $n)Ln.warn(e.message);else{const n=gr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ln.warn(n.message)}}}async function Fg(t,e){try{const r=(await V_()).transaction(Ro,"readwrite");await r.objectStore(Ro).put(e,M_(t)),await r.done}catch(n){if(n instanceof $n)Ln.warn(n.message);else{const r=gr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ln.warn(r.message)}}}function M_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb=1024,Gb=30;class Kb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Yb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ug();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>Gb){const o=Xb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ln.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ug(),{heartbeatsToSend:r,unsentEntries:s}=Qb(this._heartbeatsCache.heartbeats),i=$l(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Ln.warn(n),""}}}function Ug(){return new Date().toISOString().substring(0,10)}function Qb(t,e=Wb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Yb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return MT()?OT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Fg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Fg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function zg(t){return $l(JSON.stringify({version:2,heartbeats:t})).length}function Xb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){ti(new ts("platform-logger",e=>new cb(e),"PRIVATE")),ti(new ts("heartbeat",e=>new Kb(e),"PRIVATE")),yr(sh,Og,t),yr(sh,Og,"esm2020"),yr("fire-js","")}Jb("");function O_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zb=O_,L_=new Ko("auth","Firebase",O_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new Sf("@firebase/auth");function eI(t,...e){ql.logLevel<=ne.WARN&&ql.warn(`Auth (${fi}): ${t}`,...e)}function ul(t,...e){ql.logLevel<=ne.ERROR&&ql.error(`Auth (${fi}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t,...e){throw Cf(t,...e)}function dn(t,...e){return Cf(t,...e)}function F_(t,e,n){const r={...Zb(),[e]:n};return new Ko("auth","Firebase",r).create(e,{appName:t.name})}function Rn(t){return F_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return L_.create(t,...e)}function Q(t,e,...n){if(!t)throw Cf(e,...n)}function Sn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ul(e),new Error(e)}function Fn(t,e){t||Sn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function tI(){return Bg()==="http:"||Bg()==="https:"}function Bg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(tI()||PT()||"connection"in navigator)?navigator.onLine:!0}function rI(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,n){this.shortDelay=e,this.longDelay=n,Fn(n>e,"Short delay should be less than long delay!"),this.isMobile=AT()||DT()}get(){return nI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){Fn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oI=new Yo(3e4,6e4);function Rr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Pr(t,e,n,r,s={}){return z_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Qo({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return RT()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&hi(t.emulatorConfig.host)&&(d.credentials="include"),U_.fetch()(await B_(t,t.config.apiHost,n,l),d)})}async function z_(t,e,n){t._canInitEmulator=!1;const r={...sI,...e};try{const s=new lI(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ba(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ba(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ba(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ba(t,"user-disabled",o);const m=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw F_(t,m,d);en(t,m)}}catch(s){if(s instanceof $n)throw s;en(t,"network-request-failed",{message:String(s)})}}async function Xo(t,e,n,r,s={}){const i=await Pr(t,e,n,r,s);return"mfaPendingCredential"in i&&en(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function B_(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Rf(t.config,s):`${t.config.apiScheme}://${s}`;return iI.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function aI(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class lI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(dn(this.auth,"network-request-failed")),oI.get())})}}function Ba(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=dn(t,e,r);return s.customData._tokenResponse=n,s}function $g(t){return t!==void 0&&t.enterprise!==void 0}class uI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return aI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function cI(t,e){return Pr(t,"GET","/v2/recaptchaConfig",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(t,e){return Pr(t,"POST","/v1/accounts:delete",e)}async function Wl(t,e){return Pr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function hI(t,e=!1){const n=qe(t),r=await n.getIdToken(e),s=Pf(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:lo(td(s.auth_time)),issuedAtTime:lo(td(s.iat)),expirationTime:lo(td(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function td(t){return Number(t)*1e3}function Pf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ul("JWT malformed, contained fewer than 3 sections"),null;try{const s=I_(n);return s?JSON.parse(s):(ul("Failed to decode base64 JWT payload"),null)}catch(s){return ul("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Hg(t){const e=Pf(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Po(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof $n&&fI(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fI({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=lo(this.lastLoginAt),this.creationTime=lo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gl(t){var v;const e=t.auth,n=await t.getIdToken(),r=await Po(t,Wl(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(v=s.providerUserInfo)!=null&&v.length?$_(s.providerUserInfo):[],o=gI(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new lh(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,m)}async function pI(t){const e=qe(t);await Gl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function gI(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function $_(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e){const n=await z_(t,{},async()=>{const r=Qo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await B_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&hi(t.emulatorConfig.host)&&(c.credentials="include"),U_.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function vI(t,e){return Pr(t,"POST","/v2/accounts:revokeToken",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=Hg(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await yI(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new $s;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $s,this.toJSON())}_performRefresh(){return Sn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qt{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new mI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new lh(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Po(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return hI(this,e)}reload(){return pI(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Mt(this.auth.app))return Promise.reject(Rn(this.auth));const e=await this.getIdToken();return await Po(this,dI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:v,emailVerified:g,isAnonymous:T,providerData:N,stsTokenManager:R}=n;Q(v&&R,e,"internal-error");const O=$s.fromJSON(this.name,R);Q(typeof v=="string",e,"internal-error"),Kn(r,e.name),Kn(s,e.name),Q(typeof g=="boolean",e,"internal-error"),Q(typeof T=="boolean",e,"internal-error"),Kn(i,e.name),Kn(o,e.name),Kn(l,e.name),Kn(c,e.name),Kn(d,e.name),Kn(m,e.name);const w=new Qt({uid:v,auth:e,email:s,emailVerified:g,displayName:r,isAnonymous:T,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:O,createdAt:d,lastLoginAt:m});return N&&Array.isArray(N)&&(w.providerData=N.map(E=>({...E}))),c&&(w._redirectEventId=c),w}static async _fromIdTokenResponse(e,n,r=!1){const s=new $s;s.updateFromServerResponse(n);const i=new Qt({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?$_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new $s;l.updateFromIdToken(r);const c=new Qt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new lh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg=new Map;function Nn(t){Fn(t instanceof Function,"Expected a class definition");let e=qg.get(t);return e?(Fn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}H_.type="NONE";const Wg=H_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t,e,n){return`firebase:${t}:${e}:${n}`}class Hs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=cl(this.userKey,s.apiKey,i),this.fullPersistenceKey=cl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wl(this.auth,{idToken:e}).catch(()=>{});return n?Qt._fromGetAccountInfoResponse(this.auth,n,e):null}return Qt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hs(Nn(Wg),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Nn(Wg);const o=cl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const m=await d._get(o);if(m){let v;if(typeof m=="string"){const g=await Wl(e,{idToken:m}).catch(()=>{});if(!g)break;v=await Qt._fromGetAccountInfoResponse(e,g,m)}else v=Qt._fromJSON(e,m);d!==i&&(l=v),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Hs(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Hs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(q_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Y_(e))return"Blackberry";if(X_(e))return"Webos";if(W_(e))return"Safari";if((e.includes("chrome/")||G_(e))&&!e.includes("edge/"))return"Chrome";if(Q_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function q_(t=ut()){return/firefox\//i.test(t)}function W_(t=ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function G_(t=ut()){return/crios\//i.test(t)}function K_(t=ut()){return/iemobile/i.test(t)}function Q_(t=ut()){return/android/i.test(t)}function Y_(t=ut()){return/blackberry/i.test(t)}function X_(t=ut()){return/webos/i.test(t)}function Df(t=ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function _I(t=ut()){var e;return Df(t)&&!!((e=window.navigator)!=null&&e.standalone)}function xI(){return jT()&&document.documentMode===10}function J_(t=ut()){return Df(t)||Q_(t)||X_(t)||Y_(t)||/windows phone/i.test(t)||K_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e=[]){let n;switch(t){case"Browser":n=Gg(ut());break;case"Worker":n=`${Gg(ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fi}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e={}){return Pr(t,"GET","/v2/passwordPolicy",Rr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kI=6;class TI{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kg(this),this.idTokenSubscription=new Kg(this),this.beforeStateQueue=new wI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Nn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Hs.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wl(this,{idToken:e}),r=await Qt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Mt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Mt(this.app))return Promise.reject(Rn(this));const n=e?qe(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Mt(this.app)?Promise.reject(Rn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Mt(this.app)?Promise.reject(Rn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await EI(this),n=new TI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ko("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await vI(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Nn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Hs.create(this,[Nn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Mt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&eI(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function cs(t){return qe(t)}class Kg{constructor(e){this.auth=e,this.observer=null,this.addObserver=BT(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function II(t){Nu=t}function ex(t){return Nu.loadJS(t)}function SI(){return Nu.recaptchaEnterpriseScript}function NI(){return Nu.gapiScript}function AI(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class CI{constructor(){this.enterprise=new RI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class RI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const PI="recaptcha-enterprise",tx="NO_RECAPTCHA";class DI{constructor(e){this.type=PI,this.auth=cs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{cI(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new uI(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;$g(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(tx)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new CI().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&$g(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=SI();c.length!==0&&(c+=l),ex(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Qg(t,e,n,r=!1,s=!1){const i=new DI(t);let o;if(s)o=tx;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function uh(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Qg(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Qg(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(t,e){const n=Af(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(es(i,e??{}))return s;en(s,"already-initialized")}return n.initialize({options:e})}function VI(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function MI(t,e,n){const r=cs(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=nx(e),{host:o,port:l}=OI(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},m=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(es(d,r.config.emulator)&&es(m,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=m,r.settings.appVerificationDisabledForTesting=!0,hi(o)?(C_(`${i}//${o}${c}`),R_("Auth",!0)):LI()}function nx(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function OI(t){const e=nx(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Yg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Yg(o)}}}function Yg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function LI(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sn("not implemented")}_getIdTokenResponse(e){return Sn("not implemented")}_linkToIdToken(e,n){return Sn("not implemented")}_getReauthenticationResolver(e){return Sn("not implemented")}}async function FI(t,e){return Pr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UI(t,e){return Xo(t,"POST","/v1/accounts:signInWithPassword",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(t,e){return Xo(t,"POST","/v1/accounts:signInWithEmailLink",Rr(t,e))}async function BI(t,e){return Xo(t,"POST","/v1/accounts:signInWithEmailLink",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends jf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Do(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Do(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uh(e,n,"signInWithPassword",UI);case"emailLink":return zI(e,{email:this._email,oobCode:this._password});default:en(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return uh(e,r,"signUpPassword",FI);case"emailLink":return BI(e,{idToken:n,email:this._email,oobCode:this._password});default:en(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qs(t,e){return Xo(t,"POST","/v1/accounts:signInWithIdp",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="http://localhost";class rs extends jf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new rs(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):en("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new rs(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qs(e,n)}buildRequest(){const e={requestUri:$I,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HI(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qI(t){const e=Wi(Gi(t)).link,n=e?Wi(Gi(e)).deep_link_id:null,r=Wi(Gi(t)).deep_link_id;return(r?Wi(Gi(r)).link:null)||r||n||e||t}class Vf{constructor(e){const n=Wi(Gi(e)),r=n.apiKey??null,s=n.oobCode??null,i=HI(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=qI(e);try{return new Vf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.providerId=mi.PROVIDER_ID}static credential(e,n){return Do._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Vf.parseLink(n);return Q(r,"argument-error"),Do._fromEmailAndCode(e,r.code,r.tenantId)}}mi.PROVIDER_ID="password";mi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";mi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo extends rx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn extends Jo{constructor(){super("facebook.com")}static credential(e){return rs._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zn.credential(e.oauthAccessToken)}catch{return null}}}Zn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return rs._fromParams({providerId:er.PROVIDER_ID,signInMethod:er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return er.credentialFromTaggedObject(e)}static credentialFromError(e){return er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return er.credential(n,r)}catch{return null}}}er.GOOGLE_SIGN_IN_METHOD="google.com";er.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Jo{constructor(){super("github.com")}static credential(e){return rs._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.GITHUB_SIGN_IN_METHOD="github.com";tr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Jo{constructor(){super("twitter.com")}static credential(e,n){return rs._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return nr.credential(n,r)}catch{return null}}}nr.TWITTER_SIGN_IN_METHOD="twitter.com";nr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WI(t,e){return Xo(t,"POST","/v1/accounts:signUp",Rr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qt._fromIdTokenResponse(e,r,s),o=Xg(r);return new ss({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Xg(r);return new ss({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Xg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl extends $n{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Kl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Kl(e,n,r,s)}}function sx(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Kl._fromErrorAndOperation(t,i,e,r):i})}async function GI(t,e,n=!1){const r=await Po(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ss._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KI(t,e,n=!1){const{auth:r}=t;if(Mt(r.app))return Promise.reject(Rn(r));const s="reauthenticate";try{const i=await Po(t,sx(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=Pf(i.idToken);Q(o,r,"internal-error");const{sub:l}=o;return Q(t.uid===l,r,"user-mismatch"),ss._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&en(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ix(t,e,n=!1){if(Mt(t.app))return Promise.reject(Rn(t));const r="signIn",s=await sx(t,r,e),i=await ss._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function QI(t,e){return ix(cs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(t){const e=cs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function YI(t,e,n){if(Mt(t.app))return Promise.reject(Rn(t));const r=cs(t),o=await uh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",WI).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&ox(t),c}),l=await ss._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function XI(t,e,n){return Mt(t.app)?Promise.reject(Rn(t)):QI(qe(t),mi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&ox(t),r})}function JI(t,e,n,r){return qe(t).onIdTokenChanged(e,n,r)}function ZI(t,e,n){return qe(t).beforeAuthStateChanged(e,n)}function eS(t,e,n,r){return qe(t).onAuthStateChanged(e,n,r)}function tS(t){return qe(t).signOut()}const Ql="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ql,"1"),this.storage.removeItem(Ql),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=1e3,rS=10;class lx extends ax{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);xI()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rS):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}lx.type="LOCAL";const sS=lx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends ax{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}ux.type="SESSION";const cx=ux;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iS(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Au(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await iS(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Au.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Mf("",20);s.port1.start();const m=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(v){const g=v;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(m),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(m),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return window}function aS(t){hn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(){return typeof hn().WorkerGlobalScope<"u"&&typeof hn().importScripts=="function"}async function lS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uS(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function cS(){return dx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="firebaseLocalStorageDb",dS=1,Yl="firebaseLocalStorage",fx="fbase_key";class Zo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Cu(t,e){return t.transaction([Yl],e?"readwrite":"readonly").objectStore(Yl)}function hS(){const t=indexedDB.deleteDatabase(hx);return new Zo(t).toPromise()}function ch(){const t=indexedDB.open(hx,dS);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yl,{keyPath:fx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yl)?e(r):(r.close(),await hS(),e(await ch()))})})}async function Jg(t,e,n){const r=Cu(t,!0).put({[fx]:e,value:n});return new Zo(r).toPromise()}async function fS(t,e){const n=Cu(t,!1).get(e),r=await new Zo(n).toPromise();return r===void 0?null:r.value}function Zg(t,e){const n=Cu(t,!0).delete(e);return new Zo(n).toPromise()}const mS=800,pS=3;class mx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ch(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>pS)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return dx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Au._getInstance(cS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await lS(),!this.activeServiceWorker)return;this.sender=new oS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ch();return await Jg(e,Ql,"1"),await Zg(e,Ql),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fS(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cu(s,!1).getAll();return new Zo(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}mx.type="LOCAL";const gS=mx;new Yo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(t,e){return e?Nn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends jf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function vS(t){return ix(t.auth,new Of(t),t.bypassAuthState)}function _S(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),KI(n,new Of(t),t.bypassAuthState)}async function xS(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),GI(n,new Of(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vS;case"linkViaPopup":case"linkViaRedirect":return xS;case"reauthViaPopup":case"reauthViaRedirect":return _S;default:en(this.auth,"internal-error")}}resolve(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Fn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS=new Yo(2e3,1e4);class Ms extends px{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Fn(this.filter.length===1,"Popup operations only handle one event");const e=Mf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(dn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wS.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES="pendingRedirect",dl=new Map;class kS extends px{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dl.get(this.auth._key());if(!e){try{const r=await TS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dl.set(this.auth._key(),e)}return this.bypassAuthState||dl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TS(t,e){const n=SS(e),r=IS(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bS(t,e){dl.set(t._key(),e)}function IS(t){return Nn(t._redirectPersistence)}function SS(t){return cl(ES,t.config.apiKey,t.name)}async function NS(t,e,n=!1){if(Mt(t.app))return Promise.reject(Rn(t));const r=cs(t),s=yS(r,e),o=await new kS(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=10*60*1e3;class CS{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!RS(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!gx(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(dn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AS&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function gx({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function RS(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return gx(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PS(t,e={}){return Pr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jS=/^https?/;async function VS(t){if(t.config.emulator)return;const{authorizedDomains:e}=await PS(t);for(const n of e)try{if(MS(n))return}catch{}en(t,"unauthorized-domain")}function MS(t){const e=ah(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!jS.test(n))return!1;if(DS.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=new Yo(3e4,6e4);function t0(){const t=hn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function LS(t){return new Promise((e,n)=>{var s,i,o;function r(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),n(dn(t,"network-request-failed"))},timeout:OS.get()})}if((i=(s=hn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=hn().gapi)!=null&&o.load)r();else{const l=AI("iframefcb");return hn()[l]=()=>{gapi.load?r():n(dn(t,"network-request-failed"))},ex(`${NI()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw hl=null,e})}let hl=null;function FS(t){return hl=hl||LS(t),hl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US=new Yo(5e3,15e3),zS="__/auth/iframe",BS="emulator/auth/iframe",$S={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qS(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rf(e,BS):`https://${t.config.authDomain}/${zS}`,r={apiKey:e.apiKey,appName:t.name,v:fi},s=HS.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Qo(r).slice(1)}`}async function WS(t){const e=await FS(t),n=hn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:qS(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$S,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=dn(t,"network-request-failed"),l=hn().setTimeout(()=>{i(o)},US.get());function c(){hn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KS=500,QS=600,YS="_blank",XS="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JS(t,e,n,r=KS,s=QS){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...GS,width:r.toString(),height:s.toString(),top:i,left:o},d=ut().toLowerCase();n&&(l=G_(d)?YS:n),q_(d)&&(e=e||XS,c.scrollbars="yes");const m=Object.entries(c).reduce((g,[T,N])=>`${g}${T}=${N},`,"");if(_I(d)&&l!=="_self")return ZS(e||"",l),new n0(null);const v=window.open(e||"",l,m);Q(v,t,"popup-blocked");try{v.focus()}catch{}return new n0(v)}function ZS(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2="__/auth/handler",t2="emulator/auth/handler",n2=encodeURIComponent("fac");async function r0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:fi,eventId:s};if(e instanceof rx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zT(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,v]of Object.entries({}))o[m]=v}if(e instanceof Jo){const m=e.getScopes().filter(v=>v!=="");m.length>0&&(o.scopes=m.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const m of Object.keys(l))l[m]===void 0&&delete l[m];const c=await t._getAppCheckToken(),d=c?`#${n2}=${encodeURIComponent(c)}`:"";return`${r2(t)}?${Qo(l).slice(1)}${d}`}function r2({config:t}){return t.emulator?Rf(t,t2):`https://${t.authDomain}/${e2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="webStorageSupport";class s2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cx,this._completeRedirectFn=NS,this._overrideRedirectResult=bS}async _openPopup(e,n,r,s){var o;Fn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await r0(e,n,r,ah(),s);return JS(e,i,Mf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await r0(e,n,r,ah(),s);return aS(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Fn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WS(e),r=new CS(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(nd,{type:nd},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[nd];i!==void 0&&n(!!i),en(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=VS(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J_()||W_()||Df()}}const i2=s2;var s0="@firebase/auth",i0="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l2(t){ti(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z_(t)},d=new bI(r,s,i,c);return VI(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ti(new ts("auth-internal",e=>{const n=cs(e.getProvider("auth").getImmediate());return(r=>new o2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(s0,i0,a2(t)),yr(s0,i0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=5*60,c2=A_("authIdTokenMaxAge")||u2;let o0=null;const d2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>c2)return;const s=n==null?void 0:n.token;o0!==s&&(o0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ru(t=j_()){const e=Af(t,"auth");if(e.isInitialized())return e.getImmediate();const n=jI(t,{popupRedirectResolver:i2,persistence:[gS,sS,cx]}),r=A_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=d2(i.toString());ZI(n,o,()=>o(n.currentUser)),JI(n,l=>o(l))}}const s=S_("auth");return s&&MI(n,`http://${s}`),n}function h2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}II({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=dn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",h2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l2("Browser");var f2="firebase",m2="12.0.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(f2,m2,"app");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vr,yx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,p){function y(){}y.prototype=p.prototype,x.D=p.prototype,x.prototype=new y,x.prototype.constructor=x,x.C=function(k,I,A){for(var b=Array(arguments.length-2),me=2;me<arguments.length;me++)b[me-2]=arguments[me];return p.prototype[I].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,p,y){y||(y=0);var k=Array(16);if(typeof p=="string")for(var I=0;16>I;++I)k[I]=p.charCodeAt(y++)|p.charCodeAt(y++)<<8|p.charCodeAt(y++)<<16|p.charCodeAt(y++)<<24;else for(I=0;16>I;++I)k[I]=p[y++]|p[y++]<<8|p[y++]<<16|p[y++]<<24;p=x.g[0],y=x.g[1],I=x.g[2];var A=x.g[3],b=p+(A^y&(I^A))+k[0]+3614090360&4294967295;p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[1]+3905402710&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[2]+606105819&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[3]+3250441966&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(A^y&(I^A))+k[4]+4118548399&4294967295,p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[5]+1200080426&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[6]+2821735955&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[7]+4249261313&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(A^y&(I^A))+k[8]+1770035416&4294967295,p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[9]+2336552879&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[10]+4294925233&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[11]+2304563134&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(A^y&(I^A))+k[12]+1804603682&4294967295,p=y+(b<<7&4294967295|b>>>25),b=A+(I^p&(y^I))+k[13]+4254626195&4294967295,A=p+(b<<12&4294967295|b>>>20),b=I+(y^A&(p^y))+k[14]+2792965006&4294967295,I=A+(b<<17&4294967295|b>>>15),b=y+(p^I&(A^p))+k[15]+1236535329&4294967295,y=I+(b<<22&4294967295|b>>>10),b=p+(I^A&(y^I))+k[1]+4129170786&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[6]+3225465664&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[11]+643717713&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[0]+3921069994&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(I^A&(y^I))+k[5]+3593408605&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[10]+38016083&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[15]+3634488961&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[4]+3889429448&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(I^A&(y^I))+k[9]+568446438&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[14]+3275163606&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[3]+4107603335&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[8]+1163531501&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(I^A&(y^I))+k[13]+2850285829&4294967295,p=y+(b<<5&4294967295|b>>>27),b=A+(y^I&(p^y))+k[2]+4243563512&4294967295,A=p+(b<<9&4294967295|b>>>23),b=I+(p^y&(A^p))+k[7]+1735328473&4294967295,I=A+(b<<14&4294967295|b>>>18),b=y+(A^p&(I^A))+k[12]+2368359562&4294967295,y=I+(b<<20&4294967295|b>>>12),b=p+(y^I^A)+k[5]+4294588738&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[8]+2272392833&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[11]+1839030562&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[14]+4259657740&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(y^I^A)+k[1]+2763975236&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[4]+1272893353&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[7]+4139469664&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[10]+3200236656&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(y^I^A)+k[13]+681279174&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[0]+3936430074&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[3]+3572445317&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[6]+76029189&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(y^I^A)+k[9]+3654602809&4294967295,p=y+(b<<4&4294967295|b>>>28),b=A+(p^y^I)+k[12]+3873151461&4294967295,A=p+(b<<11&4294967295|b>>>21),b=I+(A^p^y)+k[15]+530742520&4294967295,I=A+(b<<16&4294967295|b>>>16),b=y+(I^A^p)+k[2]+3299628645&4294967295,y=I+(b<<23&4294967295|b>>>9),b=p+(I^(y|~A))+k[0]+4096336452&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[7]+1126891415&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[14]+2878612391&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[5]+4237533241&4294967295,y=I+(b<<21&4294967295|b>>>11),b=p+(I^(y|~A))+k[12]+1700485571&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[3]+2399980690&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[10]+4293915773&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[1]+2240044497&4294967295,y=I+(b<<21&4294967295|b>>>11),b=p+(I^(y|~A))+k[8]+1873313359&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[15]+4264355552&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[6]+2734768916&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[13]+1309151649&4294967295,y=I+(b<<21&4294967295|b>>>11),b=p+(I^(y|~A))+k[4]+4149444226&4294967295,p=y+(b<<6&4294967295|b>>>26),b=A+(y^(p|~I))+k[11]+3174756917&4294967295,A=p+(b<<10&4294967295|b>>>22),b=I+(p^(A|~y))+k[2]+718787259&4294967295,I=A+(b<<15&4294967295|b>>>17),b=y+(A^(I|~p))+k[9]+3951481745&4294967295,x.g[0]=x.g[0]+p&4294967295,x.g[1]=x.g[1]+(I+(b<<21&4294967295|b>>>11))&4294967295,x.g[2]=x.g[2]+I&4294967295,x.g[3]=x.g[3]+A&4294967295}r.prototype.u=function(x,p){p===void 0&&(p=x.length);for(var y=p-this.blockSize,k=this.B,I=this.h,A=0;A<p;){if(I==0)for(;A<=y;)s(this,x,A),A+=this.blockSize;if(typeof x=="string"){for(;A<p;)if(k[I++]=x.charCodeAt(A++),I==this.blockSize){s(this,k),I=0;break}}else for(;A<p;)if(k[I++]=x[A++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=p},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var p=1;p<x.length-8;++p)x[p]=0;var y=8*this.o;for(p=x.length-8;p<x.length;++p)x[p]=y&255,y/=256;for(this.u(x),x=Array(16),p=y=0;4>p;++p)for(var k=0;32>k;k+=8)x[y++]=this.g[p]>>>k&255;return x};function i(x,p){var y=l;return Object.prototype.hasOwnProperty.call(y,x)?y[x]:y[x]=p(x)}function o(x,p){this.h=p;for(var y=[],k=!0,I=x.length-1;0<=I;I--){var A=x[I]|0;k&&A==p||(y[I]=A,k=!1)}this.g=y}var l={};function c(x){return-128<=x&&128>x?i(x,function(p){return new o([p|0],0>p?-1:0)}):new o([x|0],0>x?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return O(d(-x));for(var p=[],y=1,k=0;x>=y;k++)p[k]=x/y|0,y*=4294967296;return new o(p,0)}function m(x,p){if(x.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(x.charAt(0)=="-")return O(m(x.substring(1),p));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(p,8)),k=v,I=0;I<x.length;I+=8){var A=Math.min(8,x.length-I),b=parseInt(x.substring(I,I+A),p);8>A?(A=d(Math.pow(p,A)),k=k.j(A).add(d(b))):(k=k.j(y),k=k.add(d(b)))}return k}var v=c(0),g=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(R(this))return-O(this).m();for(var x=0,p=1,y=0;y<this.g.length;y++){var k=this.i(y);x+=(0<=k?k:4294967296+k)*p,p*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(N(this))return"0";if(R(this))return"-"+O(this).toString(x);for(var p=d(Math.pow(x,6)),y=this,k="";;){var I=P(y,p).g;y=w(y,I.j(p));var A=((0<y.g.length?y.g[0]:y.h)>>>0).toString(x);if(y=I,N(y))return A+k;for(;6>A.length;)A="0"+A;k=A+k}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function N(x){if(x.h!=0)return!1;for(var p=0;p<x.g.length;p++)if(x.g[p]!=0)return!1;return!0}function R(x){return x.h==-1}t.l=function(x){return x=w(this,x),R(x)?-1:N(x)?0:1};function O(x){for(var p=x.g.length,y=[],k=0;k<p;k++)y[k]=~x.g[k];return new o(y,~x.h).add(g)}t.abs=function(){return R(this)?O(this):this},t.add=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0,I=0;I<=p;I++){var A=k+(this.i(I)&65535)+(x.i(I)&65535),b=(A>>>16)+(this.i(I)>>>16)+(x.i(I)>>>16);k=b>>>16,A&=65535,b&=65535,y[I]=b<<16|A}return new o(y,y[y.length-1]&-2147483648?-1:0)};function w(x,p){return x.add(O(p))}t.j=function(x){if(N(this)||N(x))return v;if(R(this))return R(x)?O(this).j(O(x)):O(O(this).j(x));if(R(x))return O(this.j(O(x)));if(0>this.l(T)&&0>x.l(T))return d(this.m()*x.m());for(var p=this.g.length+x.g.length,y=[],k=0;k<2*p;k++)y[k]=0;for(k=0;k<this.g.length;k++)for(var I=0;I<x.g.length;I++){var A=this.i(k)>>>16,b=this.i(k)&65535,me=x.i(I)>>>16,ue=x.i(I)&65535;y[2*k+2*I]+=b*ue,E(y,2*k+2*I),y[2*k+2*I+1]+=A*ue,E(y,2*k+2*I+1),y[2*k+2*I+1]+=b*me,E(y,2*k+2*I+1),y[2*k+2*I+2]+=A*me,E(y,2*k+2*I+2)}for(k=0;k<p;k++)y[k]=y[2*k+1]<<16|y[2*k];for(k=p;k<2*p;k++)y[k]=0;return new o(y,0)};function E(x,p){for(;(x[p]&65535)!=x[p];)x[p+1]+=x[p]>>>16,x[p]&=65535,p++}function S(x,p){this.g=x,this.h=p}function P(x,p){if(N(p))throw Error("division by zero");if(N(x))return new S(v,v);if(R(x))return p=P(O(x),p),new S(O(p.g),O(p.h));if(R(p))return p=P(x,O(p)),new S(O(p.g),p.h);if(30<x.g.length){if(R(x)||R(p))throw Error("slowDivide_ only works with positive integers.");for(var y=g,k=p;0>=k.l(x);)y=D(y),k=D(k);var I=V(y,1),A=V(k,1);for(k=V(k,2),y=V(y,2);!N(k);){var b=A.add(k);0>=b.l(x)&&(I=I.add(y),A=b),k=V(k,1),y=V(y,1)}return p=w(x,I.j(p)),new S(I,p)}for(I=v;0<=x.l(p);){for(y=Math.max(1,Math.floor(x.m()/p.m())),k=Math.ceil(Math.log(y)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),A=d(y),b=A.j(p);R(b)||0<b.l(x);)y-=k,A=d(y),b=A.j(p);N(A)&&(A=g),I=I.add(A),x=w(x,b)}return new S(I,x)}t.A=function(x){return P(this,x).h},t.and=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0;k<p;k++)y[k]=this.i(k)&x.i(k);return new o(y,this.h&x.h)},t.or=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0;k<p;k++)y[k]=this.i(k)|x.i(k);return new o(y,this.h|x.h)},t.xor=function(x){for(var p=Math.max(this.g.length,x.g.length),y=[],k=0;k<p;k++)y[k]=this.i(k)^x.i(k);return new o(y,this.h^x.h)};function D(x){for(var p=x.g.length+1,y=[],k=0;k<p;k++)y[k]=x.i(k)<<1|x.i(k-1)>>>31;return new o(y,x.h)}function V(x,p){var y=p>>5;p%=32;for(var k=x.g.length-y,I=[],A=0;A<k;A++)I[A]=0<p?x.i(A+y)>>>p|x.i(A+y+1)<<32-p:x.i(A+y);return new o(I,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,yx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=m,vr=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var $a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vx,Ki,_x,fl,dh,xx,wx,Ex;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,f){return a==Array.prototype||a==Object.prototype||(a[h]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof $a=="object"&&$a];for(var h=0;h<a.length;++h){var f=a[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var f=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var C=a[_];if(!(C in f))break e;f=f[C]}a=a[a.length-1],_=f[a],h=h(_),h!=_&&h!=null&&e(f,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var f=0,_=!1,C={next:function(){if(!_&&f<a.length){var j=f++;return{value:h(j,a[j]),done:!1}}return _=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function m(a,h,f){return a.call.apply(a.bind,arguments)}function v(a,h,f){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,_),a.apply(h,C)}}return function(){return a.apply(h,arguments)}}function g(a,h,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?m:v,g.apply(null,arguments)}function T(a,h){var f=Array.prototype.slice.call(arguments,1);return function(){var _=f.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function N(a,h){function f(){}f.prototype=h.prototype,a.aa=h.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(_,C,j){for(var U=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)U[pe-2]=arguments[pe];return h.prototype[C].apply(_,U)}}function R(a){const h=a.length;if(0<h){const f=Array(h);for(let _=0;_<h;_++)f[_]=a[_];return f}return[]}function O(a,h){for(let f=1;f<arguments.length;f++){const _=arguments[f];if(c(_)){const C=a.length||0,j=_.length||0;a.length=C+j;for(let U=0;U<j;U++)a[C+U]=_[U]}else a.push(_)}}class w{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function E(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var D=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function V(a,h,f){for(const _ in a)h.call(f,a[_],_,a)}function x(a,h){for(const f in a)h.call(void 0,a[f],f,a)}function p(a){const h={};for(const f in a)h[f]=a[f];return h}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(a,h){let f,_;for(let C=1;C<arguments.length;C++){_=arguments[C];for(f in _)a[f]=_[f];for(let j=0;j<y.length;j++)f=y[j],Object.prototype.hasOwnProperty.call(_,f)&&(a[f]=_[f])}}function I(a){var h=1;a=a.split(":");const f=[];for(;0<h&&a.length;)f.push(a.shift()),h--;return a.length&&f.push(a.join(":")),f}function A(a){l.setTimeout(()=>{throw a},0)}function b(){var a=G;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class me{constructor(){this.h=this.g=null}add(h,f){const _=ue.get();_.set(h,f),this.h?this.h.next=_:this.g=_,this.h=_}}var ue=new w(()=>new Se,a=>a.reset());class Se{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let gt,z=!1,G=new me,K=()=>{const a=l.Promise.resolve(void 0);gt=()=>{a.then(ve)}};var ve=()=>{for(var a;a=b();){try{a.h.call(a.g)}catch(f){A(f)}var h=ue;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ie(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}ie.prototype.h=function(){this.defaultPrevented=!0};var Ce=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,h),l.removeEventListener("test",f,h)}catch{}return a}();function Dt(a,h){if(ie.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(D){e:{try{P(h.nodeName);var C=!0;break e}catch{}C=!1}C||(h=null)}}else f=="mouseover"?h=a.fromElement:f=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:_n[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Dt.aa.h.call(this)}}N(Dt,ie);var _n={2:"touch",3:"pen",4:"mouse"};Dt.prototype.h=function(){Dt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var xn="closure_listenable_"+(1e6*Math.random()|0),f1=0;function m1(a,h,f,_,C){this.listener=a,this.proxy=null,this.src=h,this.type=f,this.capture=!!_,this.ha=C,this.key=++f1,this.da=this.fa=!1}function aa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function la(a){this.src=a,this.g={},this.h=0}la.prototype.add=function(a,h,f,_,C){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var U=nc(a,h,_,C);return-1<U?(h=a[U],f||(h.fa=!1)):(h=new m1(h,this.src,j,!!_,C),h.fa=f,a.push(h)),h};function tc(a,h){var f=h.type;if(f in a.g){var _=a.g[f],C=Array.prototype.indexOf.call(_,h,void 0),j;(j=0<=C)&&Array.prototype.splice.call(_,C,1),j&&(aa(h),a.g[f].length==0&&(delete a.g[f],a.h--))}}function nc(a,h,f,_){for(var C=0;C<a.length;++C){var j=a[C];if(!j.da&&j.listener==h&&j.capture==!!f&&j.ha==_)return C}return-1}var rc="closure_lm_"+(1e6*Math.random()|0),sc={};function km(a,h,f,_,C){if(Array.isArray(h)){for(var j=0;j<h.length;j++)km(a,h[j],f,_,C);return null}return f=Im(f),a&&a[xn]?a.K(h,f,d(_)?!!_.capture:!!_,C):p1(a,h,f,!1,_,C)}function p1(a,h,f,_,C,j){if(!h)throw Error("Invalid event type");var U=d(C)?!!C.capture:!!C,pe=oc(a);if(pe||(a[rc]=pe=new la(a)),f=pe.add(h,f,_,U,j),f.proxy)return f;if(_=g1(),f.proxy=_,_.src=a,_.listener=f,a.addEventListener)Ce||(C=U),C===void 0&&(C=!1),a.addEventListener(h.toString(),_,C);else if(a.attachEvent)a.attachEvent(bm(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return f}function g1(){function a(f){return h.call(a.src,a.listener,f)}const h=y1;return a}function Tm(a,h,f,_,C){if(Array.isArray(h))for(var j=0;j<h.length;j++)Tm(a,h[j],f,_,C);else _=d(_)?!!_.capture:!!_,f=Im(f),a&&a[xn]?(a=a.i,h=String(h).toString(),h in a.g&&(j=a.g[h],f=nc(j,f,_,C),-1<f&&(aa(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[h],a.h--)))):a&&(a=oc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=nc(h,f,_,C)),(f=-1<a?h[a]:null)&&ic(f))}function ic(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[xn])tc(h.i,a);else{var f=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(f,_,a.capture):h.detachEvent?h.detachEvent(bm(f),_):h.addListener&&h.removeListener&&h.removeListener(_),(f=oc(h))?(tc(f,a),f.h==0&&(f.src=null,h[rc]=null)):aa(a)}}}function bm(a){return a in sc?sc[a]:sc[a]="on"+a}function y1(a,h){if(a.da)a=!0;else{h=new Dt(h,this);var f=a.listener,_=a.ha||a.src;a.fa&&ic(a),a=f.call(_,h)}return a}function oc(a){return a=a[rc],a instanceof la?a:null}var ac="__closure_events_fn_"+(1e9*Math.random()>>>0);function Im(a){return typeof a=="function"?a:(a[ac]||(a[ac]=function(h){return a.handleEvent(h)}),a[ac])}function Ze(){de.call(this),this.i=new la(this),this.M=this,this.F=null}N(Ze,de),Ze.prototype[xn]=!0,Ze.prototype.removeEventListener=function(a,h,f,_){Tm(this,a,h,f,_)};function ct(a,h){var f,_=a.F;if(_)for(f=[];_;_=_.F)f.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new ie(h,a);else if(h instanceof ie)h.target=h.target||a;else{var C=h;h=new ie(_,a),k(h,C)}if(C=!0,f)for(var j=f.length-1;0<=j;j--){var U=h.g=f[j];C=ua(U,_,!0,h)&&C}if(U=h.g=a,C=ua(U,_,!0,h)&&C,C=ua(U,_,!1,h)&&C,f)for(j=0;j<f.length;j++)U=h.g=f[j],C=ua(U,_,!1,h)&&C}Ze.prototype.N=function(){if(Ze.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var f=a.g[h],_=0;_<f.length;_++)aa(f[_]);delete a.g[h],a.h--}}this.F=null},Ze.prototype.K=function(a,h,f,_){return this.i.add(String(a),h,!1,f,_)},Ze.prototype.L=function(a,h,f,_){return this.i.add(String(a),h,!0,f,_)};function ua(a,h,f,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var C=!0,j=0;j<h.length;++j){var U=h[j];if(U&&!U.da&&U.capture==f){var pe=U.listener,We=U.ha||U.src;U.fa&&tc(a.i,U),C=pe.call(We,_)!==!1&&C}}return C&&!_.defaultPrevented}function Sm(a,h,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Nm(a){a.g=Sm(()=>{a.g=null,a.i&&(a.i=!1,Nm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class v1 extends de{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Nm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(a){de.call(this),this.h=a,this.g={}}N(wi,de);var Am=[];function Cm(a){V(a.g,function(h,f){this.g.hasOwnProperty(f)&&ic(h)},a),a.g={}}wi.prototype.N=function(){wi.aa.N.call(this),Cm(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lc=l.JSON.stringify,_1=l.JSON.parse,x1=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function uc(){}uc.prototype.h=null;function Rm(a){return a.h||(a.h=a.i())}function Pm(){}var Ei={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cc(){ie.call(this,"d")}N(cc,ie);function dc(){ie.call(this,"c")}N(dc,ie);var Vr={},Dm=null;function ca(){return Dm=Dm||new Ze}Vr.La="serverreachability";function jm(a){ie.call(this,Vr.La,a)}N(jm,ie);function ki(a){const h=ca();ct(h,new jm(h))}Vr.STAT_EVENT="statevent";function Vm(a,h){ie.call(this,Vr.STAT_EVENT,a),this.stat=h}N(Vm,ie);function dt(a){const h=ca();ct(h,new Vm(h,a))}Vr.Ma="timingevent";function Mm(a,h){ie.call(this,Vr.Ma,a),this.size=h}N(Mm,ie);function Ti(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function bi(){this.g=!0}bi.prototype.xa=function(){this.g=!1};function w1(a,h,f,_,C,j){a.info(function(){if(a.g)if(j)for(var U="",pe=j.split("&"),We=0;We<pe.length;We++){var le=pe[We].split("=");if(1<le.length){var et=le[0];le=le[1];var tt=et.split("_");U=2<=tt.length&&tt[1]=="type"?U+(et+"="+le+"&"):U+(et+"=redacted&")}}else U=null;else U=j;return"XMLHTTP REQ ("+_+") [attempt "+C+"]: "+h+`
`+f+`
`+U})}function E1(a,h,f,_,C,j,U){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+C+"]: "+h+`
`+f+`
`+j+" "+U})}function ps(a,h,f,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+T1(a,f)+(_?" "+_:"")})}function k1(a,h){a.info(function(){return"TIMEOUT: "+h})}bi.prototype.info=function(){};function T1(a,h){if(!a.g)return h;if(!h)return null;try{var f=JSON.parse(h);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var _=f[a];if(!(2>_.length)){var C=_[1];if(Array.isArray(C)&&!(1>C.length)){var j=C[0];if(j!="noop"&&j!="stop"&&j!="close")for(var U=1;U<C.length;U++)C[U]=""}}}}return lc(f)}catch{return h}}var da={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Om={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hc;function ha(){}N(ha,uc),ha.prototype.g=function(){return new XMLHttpRequest},ha.prototype.i=function(){return{}},hc=new ha;function Hn(a,h,f,_){this.j=a,this.i=h,this.l=f,this.R=_||1,this.U=new wi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Lm}function Lm(){this.i=null,this.g="",this.h=!1}var Fm={},fc={};function mc(a,h,f){a.L=1,a.v=ga(wn(h)),a.m=f,a.P=!0,Um(a,null)}function Um(a,h){a.F=Date.now(),fa(a),a.A=wn(a.v);var f=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),ep(f.i,"t",_),a.C=0,f=a.j.J,a.h=new Lm,a.g=vp(a.j,f?h:null,!a.m),0<a.O&&(a.M=new v1(g(a.Y,a,a.g),a.O)),h=a.U,f=a.g,_=a.ca;var C="readystatechange";Array.isArray(C)||(C&&(Am[0]=C.toString()),C=Am);for(var j=0;j<C.length;j++){var U=km(f,C[j],_||h.handleEvent,!1,h.h||h);if(!U)break;h.g[U.key]=U}h=a.H?p(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ki(),w1(a.i,a.u,a.A,a.l,a.R,a.m)}Hn.prototype.ca=function(a){a=a.target;const h=this.M;h&&En(a)==3?h.j():this.Y(a)},Hn.prototype.Y=function(a){try{if(a==this.g)e:{const tt=En(this.g);var h=this.g.Ba();const vs=this.g.Z();if(!(3>tt)&&(tt!=3||this.g&&(this.h.h||this.g.oa()||ap(this.g)))){this.J||tt!=4||h==7||(h==8||0>=vs?ki(3):ki(2)),pc(this);var f=this.g.Z();this.X=f;t:if(zm(this)){var _=ap(this.g);a="";var C=_.length,j=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Mr(this),Ii(this);var U="";break t}this.h.i=new l.TextDecoder}for(h=0;h<C;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(j&&h==C-1)});_.length=0,this.h.g+=a,this.C=0,U=this.h.g}else U=this.g.oa();if(this.o=f==200,E1(this.i,this.u,this.A,this.l,this.R,tt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var pe,We=this.g;if((pe=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(pe)){var le=pe;break t}}le=null}if(f=le)ps(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gc(this,f);else{this.o=!1,this.s=3,dt(12),Mr(this),Ii(this);break e}}if(this.P){f=!0;let Ht;for(;!this.J&&this.C<U.length;)if(Ht=b1(this,U),Ht==fc){tt==4&&(this.s=4,dt(14),f=!1),ps(this.i,this.l,null,"[Incomplete Response]");break}else if(Ht==Fm){this.s=4,dt(15),ps(this.i,this.l,U,"[Invalid Chunk]"),f=!1;break}else ps(this.i,this.l,Ht,null),gc(this,Ht);if(zm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),tt!=4||U.length!=0||this.h.h||(this.s=1,dt(16),f=!1),this.o=this.o&&f,!f)ps(this.i,this.l,U,"[Invalid Chunked Response]"),Mr(this),Ii(this);else if(0<U.length&&!this.W){this.W=!0;var et=this.j;et.g==this&&et.ba&&!et.M&&(et.j.info("Great, no buffering proxy detected. Bytes received: "+U.length),Ec(et),et.M=!0,dt(11))}}else ps(this.i,this.l,U,null),gc(this,U);tt==4&&Mr(this),this.o&&!this.J&&(tt==4?mp(this.j,this):(this.o=!1,fa(this)))}else B1(this.g),f==400&&0<U.indexOf("Unknown SID")?(this.s=3,dt(12)):(this.s=0,dt(13)),Mr(this),Ii(this)}}}catch{}finally{}};function zm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function b1(a,h){var f=a.C,_=h.indexOf(`
`,f);return _==-1?fc:(f=Number(h.substring(f,_)),isNaN(f)?Fm:(_+=1,_+f>h.length?fc:(h=h.slice(_,_+f),a.C=_+f,h)))}Hn.prototype.cancel=function(){this.J=!0,Mr(this)};function fa(a){a.S=Date.now()+a.I,Bm(a,a.I)}function Bm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ti(g(a.ba,a),h)}function pc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Hn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(k1(this.i,this.A),this.L!=2&&(ki(),dt(17)),Mr(this),this.s=2,Ii(this)):Bm(this,this.S-a)};function Ii(a){a.j.G==0||a.J||mp(a.j,a)}function Mr(a){pc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Cm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function gc(a,h){try{var f=a.j;if(f.G!=0&&(f.g==a||yc(f.h,a))){if(!a.K&&yc(f.h,a)&&f.G==3){try{var _=f.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var C=_;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Ea(f),xa(f);else break e;wc(f),dt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ti(g(f.Za,f),6e3));if(1>=qm(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Lr(f,11)}else if((a.K||f.g==a)&&Ea(f),!E(h))for(C=f.Da.g.parse(h),h=0;h<C.length;h++){let le=C[h];if(f.T=le[0],le=le[1],f.G==2)if(le[0]=="c"){f.K=le[1],f.ia=le[2];const et=le[3];et!=null&&(f.la=et,f.j.info("VER="+f.la));const tt=le[4];tt!=null&&(f.Aa=tt,f.j.info("SVER="+f.Aa));const vs=le[5];vs!=null&&typeof vs=="number"&&0<vs&&(_=1.5*vs,f.L=_,f.j.info("backChannelRequestTimeoutMs_="+_)),_=f;const Ht=a.g;if(Ht){const Ta=Ht.g?Ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ta){var j=_.h;j.g||Ta.indexOf("spdy")==-1&&Ta.indexOf("quic")==-1&&Ta.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(vc(j,j.h),j.h=null))}if(_.D){const kc=Ht.g?Ht.g.getResponseHeader("X-HTTP-Session-Id"):null;kc&&(_.ya=kc,_e(_.I,_.D,kc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),_=f;var U=a;if(_.qa=yp(_,_.J?_.ia:null,_.W),U.K){Wm(_.h,U);var pe=U,We=_.L;We&&(pe.I=We),pe.B&&(pc(pe),fa(pe)),_.g=U}else hp(_);0<f.i.length&&wa(f)}else le[0]!="stop"&&le[0]!="close"||Lr(f,7);else f.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Lr(f,7):xc(f):le[0]!="noop"&&f.l&&f.l.ta(le),f.v=0)}}ki(4)}catch{}}var I1=class{constructor(a,h){this.g=a,this.map=h}};function $m(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function qm(a){return a.h?1:a.g?a.g.size:0}function yc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function vc(a,h){a.g?a.g.add(h):a.h=h}function Wm(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}$m.prototype.cancel=function(){if(this.i=Gm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Gm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const f of a.g.values())h=h.concat(f.D);return h}return R(a.i)}function S1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],f=a.length,_=0;_<f;_++)h.push(a[_]);return h}h=[],f=0;for(_ in a)h[f++]=a[_];return h}function N1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var f=0;f<a;f++)h.push(f);return h}h=[],f=0;for(const _ in a)h[f++]=_;return h}}}function Km(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var f=N1(a),_=S1(a),C=_.length,j=0;j<C;j++)h.call(void 0,_[j],f&&f[j],a)}var Qm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function A1(a,h){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var _=a[f].indexOf("="),C=null;if(0<=_){var j=a[f].substring(0,_);C=a[f].substring(_+1)}else j=a[f];h(j,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Or(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Or){this.h=a.h,ma(this,a.j),this.o=a.o,this.g=a.g,pa(this,a.s),this.l=a.l;var h=a.i,f=new Ai;f.i=h.i,h.g&&(f.g=new Map(h.g),f.h=h.h),Ym(this,f),this.m=a.m}else a&&(h=String(a).match(Qm))?(this.h=!1,ma(this,h[1]||"",!0),this.o=Si(h[2]||""),this.g=Si(h[3]||"",!0),pa(this,h[4]),this.l=Si(h[5]||"",!0),Ym(this,h[6]||"",!0),this.m=Si(h[7]||"")):(this.h=!1,this.i=new Ai(null,this.h))}Or.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ni(h,Xm,!0),":");var f=this.g;return(f||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ni(h,Xm,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Ni(f,f.charAt(0)=="/"?P1:R1,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Ni(f,j1)),a.join("")};function wn(a){return new Or(a)}function ma(a,h,f){a.j=f?Si(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function pa(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Ym(a,h,f){h instanceof Ai?(a.i=h,V1(a.i,a.h)):(f||(h=Ni(h,D1)),a.i=new Ai(h,a.h))}function _e(a,h,f){a.i.set(h,f)}function ga(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Si(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ni(a,h,f){return typeof a=="string"?(a=encodeURI(a).replace(h,C1),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function C1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Xm=/[#\/\?@]/g,R1=/[#\?:]/g,P1=/[#\?]/g,D1=/[#\?@]/g,j1=/#/g;function Ai(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function qn(a){a.g||(a.g=new Map,a.h=0,a.i&&A1(a.i,function(h,f){a.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Ai.prototype,t.add=function(a,h){qn(this),this.i=null,a=gs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(h),this.h+=1,this};function Jm(a,h){qn(a),h=gs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Zm(a,h){return qn(a),h=gs(a,h),a.g.has(h)}t.forEach=function(a,h){qn(this),this.g.forEach(function(f,_){f.forEach(function(C){a.call(h,C,_,this)},this)},this)},t.na=function(){qn(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),f=[];for(let _=0;_<h.length;_++){const C=a[_];for(let j=0;j<C.length;j++)f.push(h[_])}return f},t.V=function(a){qn(this);let h=[];if(typeof a=="string")Zm(this,a)&&(h=h.concat(this.g.get(gs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)h=h.concat(a[f])}return h},t.set=function(a,h){return qn(this),this.i=null,a=gs(this,a),Zm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function ep(a,h,f){Jm(a,h),0<f.length&&(a.i=null,a.g.set(gs(a,h),R(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var f=0;f<h.length;f++){var _=h[f];const j=encodeURIComponent(String(_)),U=this.V(_);for(_=0;_<U.length;_++){var C=j;U[_]!==""&&(C+="="+encodeURIComponent(String(U[_]))),a.push(C)}}return this.i=a.join("&")};function gs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function V1(a,h){h&&!a.j&&(qn(a),a.i=null,a.g.forEach(function(f,_){var C=_.toLowerCase();_!=C&&(Jm(this,_),ep(this,C,f))},a)),a.j=h}function M1(a,h){const f=new bi;if(l.Image){const _=new Image;_.onload=T(Wn,f,"TestLoadImage: loaded",!0,h,_),_.onerror=T(Wn,f,"TestLoadImage: error",!1,h,_),_.onabort=T(Wn,f,"TestLoadImage: abort",!1,h,_),_.ontimeout=T(Wn,f,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function O1(a,h){const f=new bi,_=new AbortController,C=setTimeout(()=>{_.abort(),Wn(f,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(j=>{clearTimeout(C),j.ok?Wn(f,"TestPingServer: ok",!0,h):Wn(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(C),Wn(f,"TestPingServer: error",!1,h)})}function Wn(a,h,f,_,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),_(f)}catch{}}function L1(){this.g=new x1}function F1(a,h,f){const _=f||"";try{Km(a,function(C,j){let U=C;d(C)&&(U=lc(C)),h.push(_+j+"="+encodeURIComponent(U))})}catch(C){throw h.push(_+"type="+encodeURIComponent("_badmap")),C}}function ya(a){this.l=a.Ub||null,this.j=a.eb||!1}N(ya,uc),ya.prototype.g=function(){return new va(this.l,this.j)},ya.prototype.i=function(a){return function(){return a}}({});function va(a,h){Ze.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(va,Ze),t=va.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,Ri(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ci(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;tp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function tp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?Ci(this):Ri(this),this.readyState==3&&tp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Ci(this))},t.Qa=function(a){this.g&&(this.response=a,Ci(this))},t.ga=function(){this.g&&Ci(this)};function Ci(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Ri(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=h.next();return a.join(`\r
`)};function Ri(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(va.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function np(a){let h="";return V(a,function(f,_){h+=_,h+=":",h+=f,h+=`\r
`}),h}function _c(a,h,f){e:{for(_ in f){var _=!1;break e}_=!0}_||(f=np(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,h,f))}function Ne(a){Ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ne,Ze);var U1=/^https?$/i,z1=["POST","PUT"];t=Ne.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,f,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hc.g(),this.v=this.o?Rm(this.o):Rm(hc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(j){rp(this,j);return}if(a=f||"",f=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var C in _)f.set(C,_[C]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const j of _.keys())f.set(j,_.get(j));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),C=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(z1,h,void 0))||_||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,U]of f)this.g.setRequestHeader(j,U);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{op(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){rp(this,j)}};function rp(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,sp(a),_a(a)}function sp(a){a.A||(a.A=!0,ct(a,"complete"),ct(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,ct(this,"complete"),ct(this,"abort"),_a(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_a(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?ip(this):this.bb())},t.bb=function(){ip(this)};function ip(a){if(a.h&&typeof o<"u"&&(!a.v[1]||En(a)!=4||a.Z()!=2)){if(a.u&&En(a)==4)Sm(a.Ea,0,a);else if(ct(a,"readystatechange"),En(a)==4){a.h=!1;try{const U=a.Z();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var _;if(_=U===0){var C=String(a.D).match(Qm)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),_=!U1.test(C?C.toLowerCase():"")}f=_}if(f)ct(a,"complete"),ct(a,"success");else{a.m=6;try{var j=2<En(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",sp(a)}}finally{_a(a)}}}}function _a(a,h){if(a.g){op(a);const f=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||ct(a,"ready");try{f.onreadystatechange=_}catch{}}}function op(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function En(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),_1(h)}};function ap(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function B1(a){const h={};a=(a.g&&2<=En(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(E(a[_]))continue;var f=I(a[_]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=h[C]||[];h[C]=j,j.push(f)}x(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Pi(a,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||h}function lp(a){this.Aa=0,this.i=[],this.j=new bi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Pi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Pi("baseRetryDelayMs",5e3,a),this.cb=Pi("retryDelaySeedMs",1e4,a),this.Wa=Pi("forwardChannelMaxRetries",2,a),this.wa=Pi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new $m(a&&a.concurrentRequestLimit),this.Da=new L1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=lp.prototype,t.la=8,t.G=1,t.connect=function(a,h,f,_){dt(0),this.W=a,this.H=h||{},f&&_!==void 0&&(this.H.OSID=f,this.H.OAID=_),this.F=this.X,this.I=yp(this,null,this.W),wa(this)};function xc(a){if(up(a),a.G==3){var h=a.U++,f=wn(a.I);if(_e(f,"SID",a.K),_e(f,"RID",h),_e(f,"TYPE","terminate"),Di(a,f),h=new Hn(a,a.j,h),h.L=2,h.v=ga(wn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=h.v,f=!0),f||(h.g=vp(h.j,null),h.g.ea(h.v)),h.F=Date.now(),fa(h)}gp(a)}function xa(a){a.g&&(Ec(a),a.g.cancel(),a.g=null)}function up(a){xa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ea(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function wa(a){if(!Hm(a.h)&&!a.s){a.s=!0;var h=a.Ga;gt||K(),z||(gt(),z=!0),G.add(h,a),a.B=0}}function $1(a,h){return qm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ti(g(a.Ga,a,h),pp(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const C=new Hn(this,this.j,a);let j=this.o;if(this.S&&(j?(j=p(j),k(j,this.S)):j=this.S),this.m!==null||this.O||(C.H=j,j=null),this.P)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var _=this.i[f];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=dp(this,C,h),f=wn(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Di(this,f),j&&(this.O?h="headers="+encodeURIComponent(String(np(j)))+"&"+h:this.m&&_c(f,this.m,j)),vc(this.h,C),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",h),_e(f,"SID","null"),C.T=!0,mc(C,f,null)):mc(C,f,h),this.G=2}}else this.G==3&&(a?cp(this,a):this.i.length==0||Hm(this.h)||cp(this))};function cp(a,h){var f;h?f=h.l:f=a.U++;const _=wn(a.I);_e(_,"SID",a.K),_e(_,"RID",f),_e(_,"AID",a.T),Di(a,_),a.m&&a.o&&_c(_,a.m,a.o),f=new Hn(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),h&&(a.i=h.D.concat(a.i)),h=dp(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),vc(a.h,f),mc(f,_,h)}function Di(a,h){a.H&&V(a.H,function(f,_){_e(h,_,f)}),a.l&&Km({},function(f,_){_e(h,_,f)})}function dp(a,h,f){f=Math.min(a.i.length,f);var _=a.l?g(a.l.Na,a.l,a):null;e:{var C=a.i;let j=-1;for(;;){const U=["count="+f];j==-1?0<f?(j=C[0].g,U.push("ofs="+j)):j=0:U.push("ofs="+j);let pe=!0;for(let We=0;We<f;We++){let le=C[We].g;const et=C[We].map;if(le-=j,0>le)j=Math.max(0,C[We].g-100),pe=!1;else try{F1(et,U,"req"+le+"_")}catch{_&&_(et)}}if(pe){_=U.join("&");break e}}}return a=a.i.splice(0,f),h.D=a,_}function hp(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;gt||K(),z||(gt(),z=!0),G.add(h,a),a.v=0}}function wc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ti(g(a.Fa,a),pp(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,fp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ti(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,dt(10),xa(this),fp(this))};function Ec(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function fp(a){a.g=new Hn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=wn(a.qa);_e(h,"RID","rpc"),_e(h,"SID",a.K),_e(h,"AID",a.T),_e(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(h,"TO",a.ja),_e(h,"TYPE","xmlhttp"),Di(a,h),a.m&&a.o&&_c(h,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ga(wn(h)),f.m=null,f.P=!0,Um(f,a)}t.Za=function(){this.C!=null&&(this.C=null,xa(this),wc(this),dt(19))};function Ea(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function mp(a,h){var f=null;if(a.g==h){Ea(a),Ec(a),a.g=null;var _=2}else if(yc(a.h,h))f=h.D,Wm(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){f=h.m?h.m.length:0,h=Date.now()-h.F;var C=a.B;_=ca(),ct(_,new Mm(_,f)),wa(a)}else hp(a);else if(C=h.s,C==3||C==0&&0<h.X||!(_==1&&$1(a,h)||_==2&&wc(a)))switch(f&&0<f.length&&(h=a.h,h.i=h.i.concat(f)),C){case 1:Lr(a,5);break;case 4:Lr(a,10);break;case 3:Lr(a,6);break;default:Lr(a,2)}}}function pp(a,h){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*h}function Lr(a,h){if(a.j.info("Error code "+h),h==2){var f=g(a.fb,a),_=a.Xa;const C=!_;_=new Or(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ma(_,"https"),ga(_),C?M1(_.toString(),f):O1(_.toString(),f)}else dt(2);a.G=0,a.l&&a.l.sa(h),gp(a),up(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),dt(2)):(this.j.info("Failed to ping google.com"),dt(1))};function gp(a){if(a.G=0,a.ka=[],a.l){const h=Gm(a.h);(h.length!=0||a.i.length!=0)&&(O(a.ka,h),O(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function yp(a,h,f){var _=f instanceof Or?wn(f):new Or(f);if(_.g!="")h&&(_.g=h+"."+_.g),pa(_,_.s);else{var C=l.location;_=C.protocol,h=h?h+"."+C.hostname:C.hostname,C=+C.port;var j=new Or(null);_&&ma(j,_),h&&(j.g=h),C&&pa(j,C),f&&(j.l=f),_=j}return f=a.D,h=a.ya,f&&h&&_e(_,f,h),_e(_,"VER",a.la),Di(a,_),_}function vp(a,h,f){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ne(new ya({eb:f})):new Ne(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _p(){}t=_p.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ka(){}ka.prototype.g=function(a,h){return new Tt(a,h)};function Tt(a,h){Ze.call(this),this.g=new lp(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!E(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!E(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ys(this)}N(Tt,Ze),Tt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Tt.prototype.close=function(){xc(this.g)},Tt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=lc(a),a=f);h.i.push(new I1(h.Ya++,a)),h.G==3&&wa(h)},Tt.prototype.N=function(){this.g.l=null,delete this.j,xc(this.g),delete this.g,Tt.aa.N.call(this)};function xp(a){cc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const f in h){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}N(xp,cc);function wp(){dc.call(this),this.status=1}N(wp,dc);function ys(a){this.g=a}N(ys,_p),ys.prototype.ua=function(){ct(this.g,"a")},ys.prototype.ta=function(a){ct(this.g,new xp(a))},ys.prototype.sa=function(a){ct(this.g,new wp)},ys.prototype.ra=function(){ct(this.g,"b")},ka.prototype.createWebChannel=ka.prototype.g,Tt.prototype.send=Tt.prototype.o,Tt.prototype.open=Tt.prototype.m,Tt.prototype.close=Tt.prototype.close,Ex=function(){return new ka},wx=function(){return ca()},xx=Vr,dh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},da.NO_ERROR=0,da.TIMEOUT=8,da.HTTP_ERROR=6,fl=da,Om.COMPLETE="complete",_x=Om,Pm.EventType=Ei,Ei.OPEN="a",Ei.CLOSE="b",Ei.ERROR="c",Ei.MESSAGE="d",Ze.prototype.listen=Ze.prototype.K,Ki=Pm,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,vx=Ne}).apply(typeof $a<"u"?$a:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore",u0="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let it=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};it.UNAUTHENTICATED=new it(null),it.GOOGLE_CREDENTIALS=new it("google-credentials-uid"),it.FIRST_PARTY=new it("first-party-uid"),it.MOCK_USER=new it("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Sf("@firebase/firestore");function xs(){return is.logLevel}function $(t,...e){if(is.logLevel<=ne.DEBUG){const n=e.map(Lf);is.debug(`Firestore (${pi}): ${t}`,...n)}}function Un(t,...e){if(is.logLevel<=ne.ERROR){const n=e.map(Lf);is.error(`Firestore (${pi}): ${t}`,...n)}}function ni(t,...e){if(is.logLevel<=ne.WARN){const n=e.map(Lf);is.warn(`Firestore (${pi}): ${t}`,...n)}}function Lf(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,kx(t,r,n)}function kx(t,e,n){let r=`FIRESTORE (${pi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Un(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||kx(e,s,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends $n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class p2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(it.UNAUTHENTICATED))}shutdown(){}}class g2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class y2{constructor(e){this.t=e,this.currentUser=it.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Pn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Pn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{$("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):($("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?($("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new Tx(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new it(e)}}class v2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=it.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class _2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new v2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(it.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class x2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Mt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&$("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,$("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{$("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):$("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new c0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=w2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function re(t,e){return t<e?-1:t>e?1:0}function hh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return rd(s)===rd(i)?re(s,i):rd(s)?1:-1}return re(t.length,e.length)}const E2=55296,k2=57343;function rd(t){const e=t.charCodeAt(0);return e>=E2&&e<=k2}function ri(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0="__name__";class an{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Y(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return an.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof an?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=an.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return re(e.length,n.length)}static compareSegments(e,n){const r=an.isNumericId(e),s=an.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?an.extractNumericId(e).compare(an.extractNumericId(n)):hh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vr.fromString(e.substring(4,e.length-2))}}class ge extends an{construct(e,n,r){return new ge(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ge(n)}static emptyPath(){return new ge([])}}const T2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qe extends an{construct(e,n,r){return new Qe(e,n,r)}static isValidIdentifier(e){return T2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===d0}static keyField(){return new Qe([d0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qe(n)}static emptyPath(){return new Qe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ge.fromString(e))}static fromName(e){return new W(ge.fromString(e).popFirst(5))}static empty(){return new W(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ge.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function b2(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function h0(t){if(!W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function f0(t){if(W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ix(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y(12329,{type:typeof t})}function tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Pu(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(t,e){const n={typeString:t};return e&&(n.value=e),n}function ea(t,e){if(!Ix(t))throw new B(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new B(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,p0=1e6;class Z{static now(){return Z.fromMillis(Date.now())}static fromDate(e){return Z.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*p0);return new Z(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<m0)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/p0}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Z._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ea(e,Z._jsonSchema))return new Z(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-m0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Z._jsonSchemaVersion="firestore/timestamp/1.0",Z._jsonSchema={type:Oe("string",Z._jsonSchemaVersion),seconds:Oe("number"),nanoseconds:Oe("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new Z(0,0))}static max(){return new X(new Z(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=-1;function I2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new Z(n+1,0):new Z(n,r));return new Er(s,W.empty(),e)}function S2(t){return new Er(t.readTime,t.key,jo)}class Er{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Er(X.min(),W.empty(),jo)}static max(){return new Er(X.max(),W.empty(),jo)}}function N2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class C2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==A2)throw t;$("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(m=>{o[d]=m,++l,l===i&&r(o)},m=>s(m))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function R2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function yi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Du.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uf=-1;function ju(t){return t==null}function Xl(t){return t===0&&1/t==-1/0}function P2(t){return typeof t=="number"&&Number.isInteger(t)&&!Xl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="";function D2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=g0(e)),e=j2(t.get(n),e);return g0(e)}function j2(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case Sx:n+="";break;default:n+=i}}return n}function g0(t){return t+Sx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Dr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Nx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||Ke.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ke.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}}class Ha{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ke{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ke.RED,this.left=s??Ke.EMPTY,this.right=i??Ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ke(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Y(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Y(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Y(27949);return e+(this.isRed()?0:1)}}Ke.EMPTY=null,Ke.RED=!0,Ke.BLACK=!1;Ke.EMPTY=new class{constructor(){this.size=0}get key(){throw Y(57766)}get value(){throw Y(16141)}get color(){throw Y(16727)}get left(){throw Y(29726)}get right(){throw Y(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new v0(this.data.getIterator())}getIteratorFrom(e){return new v0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ze(this.comparator);return n.data=e,n}}class v0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e){this.fields=e,e.sort(Qe.comparator)}static empty(){return new St([])}unionWith(e){let n=new ze(Qe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new St(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ri(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ax("Invalid base64 string: "+i):i}}(e);return new Je(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Je(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Je.EMPTY_BYTE_STRING=new Je("");const V2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kr(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=V2.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Tr(t){return typeof t=="string"?Je.fromBase64String(t):Je.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="server_timestamp",Rx="__type__",Px="__previous_value__",Dx="__local_write_time__";function zf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[Rx])==null?void 0:r.stringValue)===Cx}function Vu(t){const e=t.mapValue.fields[Px];return zf(e)?Vu(e):e}function Vo(t){const e=kr(t.mapValue.fields[Dx].timestampValue);return new Z(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n,r,s,i,o,l,c,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=m}}const Jl="(default)";class Mo{constructor(e,n){this.projectId=e,this.database=n||Jl}static empty(){return new Mo("","")}get isDefaultDatabase(){return this.database===Jl}isEqual(e){return e instanceof Mo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="__type__",Vx="__max__",qa={mapValue:{fields:{__type__:{stringValue:Vx}}}},Mx="__vector__",Zl="value";function br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zf(t)?4:L2(t)?9007199254740991:O2(t)?10:11:Y(28295,{value:t})}function vn(t,e){if(t===e)return!0;const n=br(t);if(n!==br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Vo(t).isEqual(Vo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=kr(s.timestampValue),l=kr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Tr(s.bytesValue).isEqual(Tr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Re(s.doubleValue),l=Re(i.doubleValue);return o===l?Xl(o)===Xl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return ri(t.arrayValue.values||[],e.arrayValue.values||[],vn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(y0(o)!==y0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!vn(o[c],l[c])))return!1;return!0}(t,e);default:return Y(52216,{left:t})}}function Oo(t,e){return(t.values||[]).find(n=>vn(n,e))!==void 0}function si(t,e){if(t===e)return 0;const n=br(t),r=br(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Re(i.integerValue||i.doubleValue),c=Re(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return _0(t.timestampValue,e.timestampValue);case 4:return _0(Vo(t),Vo(e));case 5:return hh(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Tr(i),c=Tr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const m=re(l[d],c[d]);if(m!==0)return m}return re(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=re(Re(i.latitude),Re(o.latitude));return l!==0?l:re(Re(i.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return x0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var g,T,N,R;const l=i.fields||{},c=o.fields||{},d=(g=l[Zl])==null?void 0:g.arrayValue,m=(T=c[Zl])==null?void 0:T.arrayValue,v=re(((N=d==null?void 0:d.values)==null?void 0:N.length)||0,((R=m==null?void 0:m.values)==null?void 0:R.length)||0);return v!==0?v:x0(d,m)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===qa.mapValue&&o===qa.mapValue)return 0;if(i===qa.mapValue)return 1;if(o===qa.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},m=Object.keys(d);c.sort(),m.sort();for(let v=0;v<c.length&&v<m.length;++v){const g=hh(c[v],m[v]);if(g!==0)return g;const T=si(l[c[v]],d[m[v]]);if(T!==0)return T}return re(c.length,m.length)}(t.mapValue,e.mapValue);default:throw Y(23264,{he:n})}}function _0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);const n=kr(t),r=kr(e),s=re(n.seconds,r.seconds);return s!==0?s:re(n.nanos,r.nanos)}function x0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=si(n[s],r[s]);if(i)return i}return re(n.length,r.length)}function ii(t){return fh(t)}function fh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Tr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=fh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${fh(n.fields[o])}`;return s+"}"}(t.mapValue):Y(61005,{value:t})}function ml(t){switch(br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Vu(t);return e?16+ml(e):16;case 5:return 2*t.stringValue.length;case 6:return Tr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+ml(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Dr(r.fields,(i,o)=>{s+=i.length+ml(o)}),s}(t.mapValue);default:throw Y(13486,{value:t})}}function w0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function mh(t){return!!t&&"integerValue"in t}function Bf(t){return!!t&&"arrayValue"in t}function E0(t){return!!t&&"nullValue"in t}function k0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pl(t){return!!t&&"mapValue"in t}function O2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[jx])==null?void 0:r.stringValue)===Mx}function uo(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Dr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=uo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=uo(t.arrayValue.values[n]);return e}return{...t}}function L2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Vx}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.value=e}static empty(){return new _t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=uo(n)}setAll(e){let n=Qe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=uo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return vn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];pl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Dr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new _t(uo(this.value))}}function Ox(t){const e=[];return Dr(t.fields,(n,r)=>{const s=new Qe([n]);if(pl(r)){const i=Ox(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new St(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new at(e,0,X.min(),X.min(),X.min(),_t.empty(),0)}static newFoundDocument(e,n,r,s){return new at(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new at(e,2,n,X.min(),X.min(),_t.empty(),0)}static newUnknownDocument(e,n){return new at(e,3,n,X.min(),X.min(),_t.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_t.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_t.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof at&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new at(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,n){this.position=e,this.inclusive=n}}function T0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=si(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function b0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!vn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n="asc"){this.field=e,this.dir=n}}function F2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{}class Me extends Lx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new z2(e,n,r):n==="array-contains"?new H2(e,r):n==="in"?new q2(e,r):n==="not-in"?new W2(e,r):n==="array-contains-any"?new G2(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new B2(e,r):new $2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(si(n,this.value)):n!==null&&br(this.value)===br(n)&&this.matchesComparison(si(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nn extends Lx{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new nn(e,n)}matches(e){return Fx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Fx(t){return t.op==="and"}function Ux(t){return U2(t)&&Fx(t)}function U2(t){for(const e of t.filters)if(e instanceof nn)return!1;return!0}function ph(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+ii(t.value);if(Ux(t))return t.filters.map(e=>ph(e)).join(",");{const e=t.filters.map(n=>ph(n)).join(",");return`${t.op}(${e})`}}function zx(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&vn(r.value,s.value)}(t,e):t instanceof nn?function(r,s){return s instanceof nn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&zx(o,s.filters[l]),!0):!1}(t,e):void Y(19439)}function Bx(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${ii(n.value)}`}(t):t instanceof nn?function(n){return n.op.toString()+" {"+n.getFilters().map(Bx).join(" ,")+"}"}(t):"Filter"}class z2 extends Me{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class B2 extends Me{constructor(e,n){super(e,"in",n),this.keys=$x("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class $2 extends Me{constructor(e,n){super(e,"not-in",n),this.keys=$x("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function $x(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class H2 extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bf(n)&&Oo(n.arrayValue,this.value)}}class q2 extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Oo(this.value.arrayValue,n)}}class W2 extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Oo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Oo(this.value.arrayValue,n)}}class G2 extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Oo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function I0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new K2(t,e,n,r,s,i,o)}function $f(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ph(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ii(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ii(r)).join(",")),e.Te=n}return e.Te}function Hf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!F2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b0(t.startAt,e.startAt)&&b0(t.endAt,e.endAt)}function gh(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Q2(t,e,n,r,s,i,o,l){return new vi(t,e,n,r,s,i,o,l)}function qf(t){return new vi(t)}function S0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hx(t){return t.collectionGroup!==null}function co(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new ze(Qe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new Lo(i,r))}),n.has(Qe.keyField().canonicalString())||e.Ie.push(new Lo(Qe.keyField(),r))}return e.Ie}function fn(t){const e=J(t);return e.Ee||(e.Ee=Y2(e,co(t))),e.Ee}function Y2(t,e){if(t.limitType==="F")return I0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Lo(s.field,i)});const n=t.endAt?new eu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eu(t.startAt.position,t.startAt.inclusive):null;return I0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function yh(t,e){const n=t.filters.concat([e]);return new vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function vh(t,e,n){return new vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mu(t,e){return Hf(fn(t),fn(e))&&t.limitType===e.limitType}function qx(t){return`${$f(fn(t))}|lt:${t.limitType}`}function ws(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Bx(s)).join(", ")}]`),ju(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ii(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ii(s)).join(",")),`Target(${r})`}(fn(t))}; limitType=${t.limitType})`}function Ou(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of co(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=T0(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,co(r),s)||r.endAt&&!function(o,l,c){const d=T0(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,co(r),s))}(t,e)}function X2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Wx(t){return(e,n)=>{let r=!1;for(const s of co(t)){const i=J2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function J2(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?si(c,d):Y(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Dr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Nx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new Ie(W.comparator);function zn(){return Z2}const Gx=new Ie(W.comparator);function Qi(...t){let e=Gx;for(const n of t)e=e.insert(n.key,n);return e}function Kx(t){let e=Gx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function qr(){return ho()}function Qx(){return ho()}function ho(){return new ds(t=>t.toString(),(t,e)=>t.isEqual(e))}const eN=new Ie(W.comparator),tN=new ze(W.comparator);function se(...t){let e=tN;for(const n of t)e=e.add(n);return e}const nN=new ze(re);function rN(){return nN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Xl(e)?"-0":e}}function Yx(t){return{integerValue:""+t}}function sN(t,e){return P2(e)?Yx(e):Wf(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(){this._=void 0}}function iN(t,e,n){return t instanceof tu?function(s,i){const o={fields:{[Rx]:{stringValue:Cx},[Dx]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zf(i)&&(i=Vu(i)),i&&(o.fields[Px]=i),{mapValue:o}}(n,e):t instanceof Fo?Jx(t,e):t instanceof Uo?Zx(t,e):function(s,i){const o=Xx(s,i),l=N0(o)+N0(s.Ae);return mh(o)&&mh(s.Ae)?Yx(l):Wf(s.serializer,l)}(t,e)}function oN(t,e,n){return t instanceof Fo?Jx(t,e):t instanceof Uo?Zx(t,e):n}function Xx(t,e){return t instanceof nu?function(r){return mh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class tu extends Lu{}class Fo extends Lu{constructor(e){super(),this.elements=e}}function Jx(t,e){const n=ew(e);for(const r of t.elements)n.some(s=>vn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Uo extends Lu{constructor(e){super(),this.elements=e}}function Zx(t,e){let n=ew(e);for(const r of t.elements)n=n.filter(s=>!vn(s,r));return{arrayValue:{values:n}}}class nu extends Lu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function N0(t){return Re(t.integerValue||t.doubleValue)}function ew(t){return Bf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aN(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Fo&&s instanceof Fo||r instanceof Uo&&s instanceof Uo?ri(r.elements,s.elements,vn):r instanceof nu&&s instanceof nu?vn(r.Ae,s.Ae):r instanceof tu&&s instanceof tu}(t.transform,e.transform)}class lN{constructor(e,n){this.version=e,this.transformResults=n}}class Ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function tw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gf(t.key,Ut.none()):new ta(t.key,t.data,Ut.none());{const n=t.data,r=_t.empty();let s=new ze(Qe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new jr(t.key,r,new St(s.toArray()),Ut.none())}}function uN(t,e,n){t instanceof ta?function(s,i,o){const l=s.value.clone(),c=C0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof jr?function(s,i,o){if(!gl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=C0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(nw(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fo(t,e,n,r){return t instanceof ta?function(i,o,l,c){if(!gl(i.precondition,o))return l;const d=i.value.clone(),m=R0(i.fieldTransforms,c,o);return d.setAll(m),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof jr?function(i,o,l,c){if(!gl(i.precondition,o))return l;const d=R0(i.fieldTransforms,c,o),m=o.data;return m.setAll(nw(i)),m.setAll(d),o.convertToFoundDocument(o.version,m).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(i,o,l){return gl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function cN(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Xx(r.transform,s||null);i!=null&&(n===null&&(n=_t.empty()),n.set(r.field,i))}return n||null}function A0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ri(r,s,(i,o)=>aN(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ta extends Fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class jr extends Fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function C0(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,oN(o,l,n[s]))}return r}function R0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,iN(i,o,e))}return r}class Gf extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class dN extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&uN(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Qx();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=tw(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&ri(this.mutations,e.mutations,(n,r)=>A0(n,r))&&ri(this.baseMutations,e.baseMutations,(n,r)=>A0(n,r))}}class Kf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return eN}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Kf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,oe;function pN(t){switch(t){case M.OK:return Y(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return Y(15467,{code:t})}}function rw(t){if(t===void 0)return Un("GRPC error has no .code"),M.UNKNOWN;switch(t){case je.OK:return M.OK;case je.CANCELLED:return M.CANCELLED;case je.UNKNOWN:return M.UNKNOWN;case je.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case je.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case je.INTERNAL:return M.INTERNAL;case je.UNAVAILABLE:return M.UNAVAILABLE;case je.UNAUTHENTICATED:return M.UNAUTHENTICATED;case je.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case je.NOT_FOUND:return M.NOT_FOUND;case je.ALREADY_EXISTS:return M.ALREADY_EXISTS;case je.PERMISSION_DENIED:return M.PERMISSION_DENIED;case je.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case je.ABORTED:return M.ABORTED;case je.OUT_OF_RANGE:return M.OUT_OF_RANGE;case je.UNIMPLEMENTED:return M.UNIMPLEMENTED;case je.DATA_LOSS:return M.DATA_LOSS;default:return Y(39323,{code:t})}}(oe=je||(je={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=new vr([4294967295,4294967295],0);function P0(t){const e=gN().encode(t),n=new yx;return n.update(e),new Uint8Array(n.digest())}function D0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vr([n,r],0),new vr([s,i],0)]}class Qf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Yi(`Invalid padding: ${n}`);if(r<0)throw new Yi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Yi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Yi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=vr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(vr.fromNumber(r)));return s.compare(yN)===1&&(s=new vr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=P0(e),[r,s]=D0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=P0(e),[r,s]=D0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Yi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,na.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Uu(X.min(),s,new Ie(re),zn(),se())}}class na{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new na(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class sw{constructor(e,n){this.targetId=e,this.Ce=n}}class iw{constructor(e,n,r=Je.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class j0{constructor(){this.ve=0,this.Fe=V0(),this.Me=Je.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=se(),n=se(),r=se();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y(38017,{changeType:i})}}),new na(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=V0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vN{constructor(e){this.Ge=e,this.ze=new Map,this.je=zn(),this.Je=Wa(),this.He=Wa(),this.Ye=new Ie(re)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:Y(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(gh(i))if(r===0){const o=new W(i.path);this.et(n,o,at.newNoDocument(o,X.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Tr(r).toUint8Array()}catch(c){if(c instanceof Ax)return ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Qf(o,s,i)}catch(c){return ni(c instanceof Yi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&gh(l.target)){const c=new W(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,at.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=se();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Uu(e,n,this.Ye,this.je,r);return this.je=zn(),this.Je=Wa(),this.He=Wa(),this.Ye=new Ie(re),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new j0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ze(re),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ze(re),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||$("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new j0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Wa(){return new Ie(W.comparator)}function V0(){return new Ie(W.comparator)}const _N={asc:"ASCENDING",desc:"DESCENDING"},xN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},wN={and:"AND",or:"OR"};class EN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function _h(t,e){return t.useProto3Json||ju(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ow(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function kN(t,e){return ru(t,e.toTimestamp())}function mn(t){return ce(!!t,49232),X.fromTimestamp(function(n){const r=kr(n);return new Z(r.seconds,r.nanos)}(t))}function Yf(t,e){return xh(t,e).canonicalString()}function xh(t,e){const n=function(s){return new ge(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function aw(t){const e=ge.fromString(t);return ce(hw(e),10190,{key:e.toString()}),e}function wh(t,e){return Yf(t.databaseId,e.path)}function sd(t,e){const n=aw(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(uw(n))}function lw(t,e){return Yf(t.databaseId,e)}function TN(t){const e=aw(t);return e.length===4?ge.emptyPath():uw(e)}function Eh(t){return new ge(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function uw(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function M0(t,e,n){return{name:wh(t,e),fields:n.value.mapValue.fields}}function bN(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,m){return d.useProto3Json?(ce(m===void 0||typeof m=="string",58123),Je.fromBase64String(m||"")):(ce(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Je.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const m=d.code===void 0?M.UNKNOWN:rw(d.code);return new B(m,d.message||"")}(o);n=new iw(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sd(t,r.document.name),i=mn(r.document.updateTime),o=r.document.createTime?mn(r.document.createTime):X.min(),l=new _t({mapValue:{fields:r.document.fields}}),c=at.newFoundDocument(s,i,o,l),d=r.targetIds||[],m=r.removedTargetIds||[];n=new yl(d,m,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sd(t,r.document),i=r.readTime?mn(r.readTime):X.min(),o=at.newNoDocument(s,i),l=r.removedTargetIds||[];n=new yl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sd(t,r.document),i=r.removedTargetIds||[];n=new yl([],i,s,null)}else{if(!("filter"in e))return Y(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new mN(s,i),l=r.targetId;n=new sw(l,o)}}return n}function IN(t,e){let n;if(e instanceof ta)n={update:M0(t,e.key,e.value)};else if(e instanceof Gf)n={delete:wh(t,e.key)};else if(e instanceof jr)n={update:M0(t,e.key,e.data),updateMask:VN(e.fieldMask)};else{if(!(e instanceof dN))return Y(16599,{Vt:e.type});n={verify:wh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof tu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Fo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Uo)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof nu)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw Y(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:kN(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y(27497)}(t,e.precondition)),n}function SN(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?mn(s.updateTime):mn(i);return o.isEqual(X.min())&&(o=mn(i)),new lN(o,s.transformResults||[])}(n,e))):[]}function NN(t,e){return{documents:[lw(t,e.path)]}}function AN(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=lw(t,s);const i=function(d){if(d.length!==0)return dw(nn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(m=>function(g){return{field:Es(g.field),direction:PN(g.dir)}}(m))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=_h(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function CN(t){let e=TN(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const m=n.from[0];m.allDescendants?s=m.collectionId:e=e.child(m.collectionId)}let i=[];n.where&&(i=function(v){const g=cw(v);return g instanceof nn&&Ux(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(v){return v.map(g=>function(N){return new Lo(ks(N.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(v){let g;return g=typeof v=="object"?v.value:v,ju(g)?null:g}(n.limit));let c=null;n.startAt&&(c=function(v){const g=!!v.before,T=v.values||[];return new eu(T,g)}(n.startAt));let d=null;return n.endAt&&(d=function(v){const g=!v.before,T=v.values||[];return new eu(T,g)}(n.endAt)),Q2(e,s,o,i,l,"F",c,d)}function RN(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function cw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ks(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ks(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ks(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ks(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Y(61313);default:return Y(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(ks(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Y(58110);default:return Y(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return nn.create(n.compositeFilter.filters.map(r=>cw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y(1026)}}(n.compositeFilter.op))}(t):Y(30097,{filter:t})}function PN(t){return _N[t]}function DN(t){return xN[t]}function jN(t){return wN[t]}function Es(t){return{fieldPath:t.canonicalString()}}function ks(t){return Qe.fromServerFormat(t.fieldPath)}function dw(t){return t instanceof Me?function(n){if(n.op==="=="){if(k0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NAN"}};if(E0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NAN"}};if(E0(n.value))return{unaryFilter:{field:Es(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Es(n.field),op:DN(n.op),value:n.value}}}(t):t instanceof nn?function(n){const r=n.getFilters().map(s=>dw(s));return r.length===1?r[0]:{compositeFilter:{op:jN(n.op),filters:r}}}(t):Y(54877,{filter:t})}function VN(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function hw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e,n,r,s,i=X.min(),o=X.min(),l=Je.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new ir(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ir(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.yt=e}}function ON(t){const e=CN({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(){this.Cn=new FN}addToCollectionParentIndex(e,n){return this.Cn.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Er.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Er.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class FN{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ze(ge.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ze(ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fw=41943040;class yt{static withCacheSize(e){return new yt(e,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yt.DEFAULT_COLLECTION_PERCENTILE=10,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yt.DEFAULT=new yt(fw,yt.DEFAULT_COLLECTION_PERCENTILE,yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yt.DISABLED=new yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new oi(0)}static cr(){return new oi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0="LruGarbageCollector",UN=1048576;function F0([t,e],[n,r]){const s=re(t,n);return s===0?re(e,r):s}class zN{constructor(e){this.Ir=e,this.buffer=new ze(F0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();F0(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BN{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){$(L0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){yi(n)?$(L0,"Ignoring IndexedDB error during garbage collection: ",n):await gi(n)}await this.Vr(3e5)})}}class $N{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return L.resolve(Du.ce);const r=new zN(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?($("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(O0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?($("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),O0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,d;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?($("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),s=this.params.maximumSequenceNumbersToCollect):s=v,o=Date.now(),this.nthSequenceNumber(e,s))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,n))).next(v=>(i=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(d=Date.now(),xs()<=ne.DEBUG&&$("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-m}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${v} documents in `+(d-c)+`ms
Total Duration: ${d-m}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:v})))}}function HN(t,e){return new $N(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(){this.changes=new ds(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fo(r.mutation,s,St.empty(),Z.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=qr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Qi();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=qr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=zn();const o=ho(),l=function(){return ho()}();return n.forEach((c,d)=>{const m=r.get(d.key);s.has(d.key)&&(m===void 0||m.mutation instanceof jr)?i=i.insert(d.key,d):m!==void 0?(o.set(d.key,m.mutation.getFieldMask()),fo(m.mutation,d,m.mutation.getFieldMask(),Z.now())):o.set(d.key,St.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,m)=>o.set(d,m)),n.forEach((d,m)=>l.set(d,new WN(m,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=ho();let s=new Ie((o,l)=>o-l),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let m=r.get(c)||St.empty();m=l.applyToLocalView(d,m),r.set(c,m);const v=(s.get(l.batchId)||se()).add(c);s=s.insert(l.batchId,v)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,m=c.value,v=Qx();m.forEach(g=>{if(!i.has(g)){const T=tw(n.get(g),r.get(g));T!==null&&v.set(g,T),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,v))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Hx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(qr());let l=jo,c=i;return o.next(d=>L.forEach(d,(m,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),i.get(m)?L.resolve():this.remoteDocumentCache.getEntry(e,m).next(g=>{c=c.insert(m,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,se())).next(m=>({batchId:l,changes:Kx(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Qi();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Qi();return this.indexManager.getCollectionParents(e,i).next(l=>L.forEach(l,c=>{const d=function(v,g){return new vi(g,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(m=>{m.forEach((v,g)=>{o=o.insert(v,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const m=d.getKey();o.get(m)===null&&(o=o.insert(m,at.newInvalidDocument(m)))});let l=Qi();return o.forEach((c,d)=>{const m=i.get(c);m!==void 0&&fo(m.mutation,d,St.empty(),Z.now()),Ou(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return L.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:mn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:ON(s.bundledQuery),readTime:mn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.overlays=new Ie(W.comparator),this.qr=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=qr();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=qr(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ie((d,m)=>d-m);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let m=i.get(d.largestBatchId);m===null&&(m=qr(),i=i.insert(d.largestBatchId,m)),m.set(d.getKey(),d)}}const l=qr(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,m)=>l.set(d,m)),!(l.size()>=s)););return L.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new fN(n,r));let i=this.qr.get(n);i===void 0&&(i=se(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(){this.Qr=new ze(Be.$r),this.Ur=new ze(Be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Be(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new W(new ge([])),r=new Be(n,e),s=new Be(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new W(new ge([])),r=new Be(n,e),s=new Be(n,e+1);let i=se();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Be(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return W.comparator(e.key,n.key)||re(e.Yr,n.Yr)}static Kr(e,n){return re(e.Yr,n.Yr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ze(Be.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new hN(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?Uf:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ze(re);return n.forEach(s=>{const i=new Be(s,0),o=new Be(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),L.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Be(new W(i),0);let l=new ze(re);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},o),L.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return L.forEach(n.mutations,s=>{const i=new Be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Be(n,0),s=this.Zr.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e){this.ri=e,this.docs=function(){return new Ie(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():at.newInvalidDocument(n))}getEntries(e,n){let r=zn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():at.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=zn();const o=n.path,l=new W(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:m}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||N2(S2(m),r)<=0||(s.has(m.key)||Ou(n,m))&&(i=i.insert(m.key,m.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y(9500)}ii(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ZN(this)}getSize(e){return L.resolve(this.size)}}class ZN extends qN{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.persistence=e,this.si=new ds(n=>$f(n),Hf),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.oi=0,this._i=new Xf,this.targetCount=0,this.ai=oi.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),L.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new oi(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Pr(n),L.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,n){this.ui={},this.overlays={},this.ci=new Du(0),this.li=!1,this.li=!0,this.hi=new YN,this.referenceDelegate=e(this),this.Pi=new eA(this),this.indexManager=new LN,this.remoteDocumentCache=function(s){return new JN(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new MN(n),this.Ii=new KN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new QN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new XN(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){$("MemoryPersistence","Starting transaction:",e);const s=new tA(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return L.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class tA extends C2{constructor(e){super(),this.currentSequenceNumber=e}}class Jf{constructor(e){this.persistence=e,this.Ri=new Xf,this.Vi=null}static mi(e){return new Jf(e)}get fi(){if(this.Vi)return this.Vi;throw Y(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),L.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,r=>{const s=W.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return L.or([()=>L.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class su{constructor(e,n){this.persistence=e,this.pi=new ds(r=>D2(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=HN(this,n)}static mi(e,n){return new su(e,n)}Ei(){}di(e){return L.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return L.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?L.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,X.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),L.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ml(e.data.value)),n}br(e,n,r){return L.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return L.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return VT()?8:R2(ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new nA;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(xs()<=ne.DEBUG&&$("QueryEngine","SDK will not create cache indexes for query:",ws(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(xs()<=ne.DEBUG&&$("QueryEngine","Query:",ws(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(xs()<=ne.DEBUG&&$("QueryEngine","The SDK decides to create cache indexes for query:",ws(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,fn(n))):L.resolve())}ys(e,n){if(S0(n))return L.resolve(null);let r=fn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=vh(n,null,"F"),r=fn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,vh(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return S0(n)||s.isEqual(X.min())?L.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?L.resolve(null):(xs()<=ne.DEBUG&&$("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ws(n)),this.vs(e,o,n,I2(s,jo)).next(l=>l))})}Ds(e,n){let r=new ze(Wx(e));return n.forEach((s,i)=>{Ou(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return xs()<=ne.DEBUG&&$("QueryEngine","Using full collection scan to execute query:",ws(n)),this.ps.getDocumentsMatchingQuery(e,n,Er.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="LocalStore",sA=3e8;class iA{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ie(re),this.xs=new ds(i=>$f(i),Hf),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function oA(t,e,n,r){return new iA(t,e,n,r)}async function pw(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=se();for(const d of s){o.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}for(const d of i){l.push(d.batchId);for(const m of d.mutations)c=c.add(m.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function aA(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,m){const v=d.batch,g=v.keys();let T=L.resolve();return g.forEach(N=>{T=T.next(()=>m.getEntry(c,N)).next(R=>{const O=d.docVersions.get(N);ce(O!==null,48541),R.version.compareTo(O)<0&&(v.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),m.addEntry(R)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,v))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=se();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function gw(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function lA(t,e){const n=J(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((m,v)=>{const g=s.get(v);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,m.removedDocuments,v).next(()=>n.Pi.addMatchingKeys(i,m.addedDocuments,v)));let T=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(v)!==null?T=T.withResumeToken(Je.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):m.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(m.resumeToken,r)),s=s.insert(v,T),function(R,O,w){return R.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=sA?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,T,m)&&l.push(n.Pi.updateTargetData(i,T))});let c=zn(),d=se();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,m))}),l.push(uA(i,o,e.documentUpdates).next(m=>{c=m.ks,d=m.qs})),!r.isEqual(X.min())){const m=n.Pi.getLastRemoteSnapshotVersion(i).next(v=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(m)}return L.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function uA(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=zn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):$(em,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:s}})}function cA(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Uf),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function dA(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new ir(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function kh(t,e,n){const r=J(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!yi(o))throw o;$(em,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function U0(t,e,n){const r=J(t);let s=X.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,m){const v=J(c),g=v.xs.get(m);return g!==void 0?L.resolve(v.Ms.get(g)):v.Pi.getTargetData(d,m)}(r,o,fn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:se())).next(l=>(hA(r,X2(e),l),{documents:l,Qs:i})))}function hA(t,e,n){let r=t.Os.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class z0{constructor(){this.activeTargetIds=rN()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fA{constructor(){this.Mo=new z0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new z0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B0="ConnectivityMonitor";class $0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){$(B0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){$(B0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ga=null;function Th(){return Ga===null?Ga=function(){return 268435456+Math.round(2147483648*Math.random())}():Ga++,"0x"+Ga.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="RestConnection",pA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class gA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Jl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=Th(),l=this.zo(e,n.toUriEncodedString());$(id,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),m=hi(d);return this.Jo(e,l,c,r,m).then(v=>($(id,`Received RPC '${e}' ${o}: `,v),v),v=>{throw ni(id,`RPC '${e}' ${o} failed with error: `,v,"url: ",l,"request:",r),v})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=pA[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const st="WebChannelConnection";class vA extends gA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=Th();return new Promise((l,c)=>{const d=new vx;d.setWithCredentials(!0),d.listenOnce(_x.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fl.NO_ERROR:const v=d.getResponseJson();$(st,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case fl.TIMEOUT:$(st,`RPC '${e}' ${o} timed out`),c(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case fl.HTTP_ERROR:const g=d.getStatus();if($(st,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let T=d.getResponseJson();Array.isArray(T)&&(T=T[0]);const N=T==null?void 0:T.error;if(N&&N.status&&N.message){const R=function(w){const E=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(N.status);c(new B(R,N.message))}else c(new B(M.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new B(M.UNAVAILABLE,"Connection failed."));break;default:Y(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{$(st,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);$(st,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,r,15)})}T_(e,n,r){const s=Th(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ex(),l=wx(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const m=i.join("");$(st,`Creating RPC '${e}' stream ${s}: ${m}`,c);const v=o.createWebChannel(m,c);this.I_(v);let g=!1,T=!1;const N=new yA({Yo:O=>{T?$(st,`Not sending because RPC '${e}' stream ${s} is closed:`,O):(g||($(st,`Opening RPC '${e}' stream ${s} transport.`),v.open(),g=!0),$(st,`RPC '${e}' stream ${s} sending:`,O),v.send(O))},Zo:()=>v.close()}),R=(O,w,E)=>{O.listen(w,S=>{try{E(S)}catch(P){setTimeout(()=>{throw P},0)}})};return R(v,Ki.EventType.OPEN,()=>{T||($(st,`RPC '${e}' stream ${s} transport opened.`),N.o_())}),R(v,Ki.EventType.CLOSE,()=>{T||(T=!0,$(st,`RPC '${e}' stream ${s} transport closed`),N.a_(),this.E_(v))}),R(v,Ki.EventType.ERROR,O=>{T||(T=!0,ni(st,`RPC '${e}' stream ${s} transport errored. Name:`,O.name,"Message:",O.message),N.a_(new B(M.UNAVAILABLE,"The operation could not be completed")))}),R(v,Ki.EventType.MESSAGE,O=>{var w;if(!T){const E=O.data[0];ce(!!E,16349);const S=E,P=(S==null?void 0:S.error)||((w=S[0])==null?void 0:w.error);if(P){$(st,`RPC '${e}' stream ${s} received error:`,P);const D=P.status;let V=function(y){const k=je[y];if(k!==void 0)return rw(k)}(D),x=P.message;V===void 0&&(V=M.INTERNAL,x="Unknown error status: "+D+" with message "+P.message),T=!0,N.a_(new B(V,x)),v.close()}else $(st,`RPC '${e}' stream ${s} received:`,E),N.u_(E)}}),R(l,xx.STAT_EVENT,O=>{O.stat===dh.PROXY?$(st,`RPC '${e}' stream ${s} detected buffering proxy`):O.stat===dh.NOPROXY&&$(st,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.__()},0),N}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t){return new EN(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&$("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0="PersistentStream";class vw{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yw(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Un(n.toString()),Un("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return $(H0,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():($(H0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class _A extends vw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=bN(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?mn(o.readTime):X.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Eh(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=gh(c)?{documents:NN(i,c)}:{query:AN(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=ow(i,o.resumeToken);const d=_h(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=ru(i,o.snapshotVersion.toTimestamp());const d=_h(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=RN(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Eh(this.serializer),n.removeTarget=e,this.q_(n)}}class xA extends vw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=SN(e.writeResults,e.commitTime),r=mn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Eh(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>IN(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{}class EA extends wA{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,xh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(M.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,xh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class kA{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Un(n),this.aa=!1):$("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="RemoteStore";class TA{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{hs(this)&&($(os,"Restarting streams for network reachability change."),await async function(c){const d=J(c);d.Ea.add(4),await ra(d),d.Ra.set("Unknown"),d.Ea.delete(4),await Bu(d)}(this))})}),this.Ra=new kA(r,s)}}async function Bu(t){if(hs(t))for(const e of t.da)await e(!0)}async function ra(t){for(const e of t.da)await e(!1)}function _w(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sm(n)?rm(n):_i(n).O_()&&nm(n,e))}function tm(t,e){const n=J(t),r=_i(n);n.Ia.delete(e),r.O_()&&xw(n,e),n.Ia.size===0&&(r.O_()?r.L_():hs(n)&&n.Ra.set("Unknown"))}function nm(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_i(t).Y_(e)}function xw(t,e){t.Va.Ue(e),_i(t).Z_(e)}function rm(t){t.Va=new vN({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),_i(t).start(),t.Ra.ua()}function sm(t){return hs(t)&&!_i(t).x_()&&t.Ia.size>0}function hs(t){return J(t).Ea.size===0}function ww(t){t.Va=void 0}async function bA(t){t.Ra.set("Online")}async function IA(t){t.Ia.forEach((e,n)=>{nm(t,e)})}async function SA(t,e){ww(t),sm(t)?(t.Ra.ha(e),rm(t)):t.Ra.set("Unknown")}async function NA(t,e,n){if(t.Ra.set("Online"),e instanceof iw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){$(os,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await iu(t,r)}else if(e instanceof yl?t.Va.Ze(e):e instanceof sw?t.Va.st(e):t.Va.tt(e),!n.isEqual(X.min()))try{const r=await gw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const m=i.Ia.get(d);m&&i.Ia.set(d,m.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const m=i.Ia.get(c);if(!m)return;i.Ia.set(c,m.withResumeToken(Je.EMPTY_BYTE_STRING,m.snapshotVersion)),xw(i,c);const v=new ir(m.target,c,d,m.sequenceNumber);nm(i,v)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){$(os,"Failed to raise snapshot:",r),await iu(t,r)}}async function iu(t,e,n){if(!yi(e))throw e;t.Ea.add(1),await ra(t),t.Ra.set("Offline"),n||(n=()=>gw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{$(os,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Bu(t)})}function Ew(t,e){return e().catch(n=>iu(t,n,e))}async function $u(t){const e=J(t),n=Ir(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Uf;for(;AA(e);)try{const s=await cA(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,CA(e,s)}catch(s){await iu(e,s)}kw(e)&&Tw(e)}function AA(t){return hs(t)&&t.Ta.length<10}function CA(t,e){t.Ta.push(e);const n=Ir(t);n.O_()&&n.X_&&n.ea(e.mutations)}function kw(t){return hs(t)&&!Ir(t).x_()&&t.Ta.length>0}function Tw(t){Ir(t).start()}async function RA(t){Ir(t).ra()}async function PA(t){const e=Ir(t);for(const n of t.Ta)e.ea(n.mutations)}async function DA(t,e,n){const r=t.Ta.shift(),s=Kf.from(r,e,n);await Ew(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await $u(t)}async function jA(t,e){e&&Ir(t).X_&&await async function(r,s){if(function(o){return pN(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();Ir(r).B_(),await Ew(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await $u(r)}}(t,e),kw(t)&&Tw(t)}async function q0(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),$(os,"RemoteStore received new credentials");const r=hs(n);n.Ea.add(3),await ra(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Bu(n)}async function VA(t,e){const n=J(t);e?(n.Ea.delete(2),await Bu(n)):e||(n.Ea.add(2),await ra(n),n.Ra.set("Unknown"))}function _i(t){return t.ma||(t.ma=function(n,r,s){const i=J(n);return i.sa(),new _A(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:bA.bind(null,t),t_:IA.bind(null,t),r_:SA.bind(null,t),H_:NA.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),sm(t)?rm(t):t.Ra.set("Unknown")):(await t.ma.stop(),ww(t))})),t.ma}function Ir(t){return t.fa||(t.fa=function(n,r,s){const i=J(n);return i.sa(),new xA(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:RA.bind(null,t),r_:jA.bind(null,t),ta:PA.bind(null,t),na:DA.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await $u(t)):(await t.fa.stop(),t.Ta.length>0&&($(os,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new im(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function om(t,e){if(Un("AsyncQueue",`${e}: ${t}`),yi(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{static emptySet(e){return new Ws(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Qi(),this.sortedSet=new Ie(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ws)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ws;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(){this.ga=new Ie(W.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Y(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ai{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ai(e,n,Ws.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class OA{constructor(){this.queries=G0(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=G0(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function G0(){return new ds(t=>qx(t),Mu)}async function bw(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new MA,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=om(o,`Initialization of query '${ws(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&am(n)}async function Iw(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LA(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&am(n)}function FA(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function am(t){t.Ca.forEach(e=>{e.next()})}var bh,K0;(K0=bh||(bh={})).Ma="default",K0.Cache="cache";class Sw{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ai(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ai.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==bh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e){this.key=e}}class Aw{constructor(e){this.key=e}}class UA{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=se(),this.mutatedKeys=se(),this.eu=Wx(e),this.tu=new Ws(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new W0,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((m,v)=>{const g=s.get(m),T=Ou(this.query,v)?v:null,N=!!g&&this.mutatedKeys.has(g.key),R=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let O=!1;g&&T?g.data.isEqual(T.data)?N!==R&&(r.track({type:3,doc:T}),O=!0):this.su(g,T)||(r.track({type:2,doc:T}),O=!0,(c&&this.eu(T,c)>0||d&&this.eu(T,d)<0)&&(l=!0)):!g&&T?(r.track({type:0,doc:T}),O=!0):g&&!T&&(r.track({type:1,doc:g}),O=!0,(c||d)&&(l=!0)),O&&(T?(o=o.add(T),i=R?i.add(m):i.delete(m)):(o=o.delete(m),i=i.delete(m)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const m=this.query.limitType==="F"?o.last():o.first();o=o.delete(m.key),i=i.delete(m.key),r.track({type:1,doc:m})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((m,v)=>function(T,N){const R=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y(20277,{Rt:O})}};return R(T)-R(N)}(m.type,v.type)||this.eu(m.doc,v.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new ai(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new W0,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=se(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Aw(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Nw(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=se();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ai.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lm="SyncEngine";class zA{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class BA{constructor(e){this.key=e,this.hu=!1}}class $A{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ds(l=>qx(l),Mu),this.Iu=new Map,this.Eu=new Set,this.du=new Ie(W.comparator),this.Au=new Map,this.Ru=new Xf,this.Vu={},this.mu=new Map,this.fu=oi.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HA(t,e,n=!0){const r=Vw(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Cw(r,e,n,!0),s}async function qA(t,e){const n=Vw(t);await Cw(n,e,!0,!1)}async function Cw(t,e,n,r){const s=await dA(t.localStore,fn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await WA(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&_w(t.remoteStore,s),l}async function WA(t,e,n,r,s){t.pu=(v,g,T)=>async function(R,O,w,E){let S=O.view.ru(w);S.Cs&&(S=await U0(R.localStore,O.query,!1).then(({documents:x})=>O.view.ru(x,S)));const P=E&&E.targetChanges.get(O.targetId),D=E&&E.targetMismatches.get(O.targetId)!=null,V=O.view.applyChanges(S,R.isPrimaryClient,P,D);return Y0(R,O.targetId,V.au),V.snapshot}(t,v,g,T);const i=await U0(t.localStore,e,!0),o=new UA(e,i.Qs),l=o.ru(i.documents),c=na.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);Y0(t,n,d.au);const m=new zA(e,n,o);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function GA(t,e,n){const r=J(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Mu(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await kh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&tm(r.remoteStore,s.targetId),Ih(r,s.targetId)}).catch(gi)):(Ih(r,s.targetId),await kh(r.localStore,s.targetId,!0))}async function KA(t,e){const n=J(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),tm(n.remoteStore,r.targetId))}async function QA(t,e,n){const r=nC(t);try{const s=await function(o,l){const c=J(o),d=Z.now(),m=l.reduce((T,N)=>T.add(N.key),se());let v,g;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let N=zn(),R=se();return c.Ns.getEntries(T,m).next(O=>{N=O,N.forEach((w,E)=>{E.isValidDocument()||(R=R.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,N)).next(O=>{v=O;const w=[];for(const E of l){const S=cN(E,v.get(E.key).overlayedDocument);S!=null&&w.push(new jr(E.key,S,Ox(S.value.mapValue),Ut.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,w,l)}).next(O=>{g=O;const w=O.applyToLocalDocumentSet(v,R);return c.documentOverlayCache.saveOverlays(T,O.batchId,w)})}).then(()=>({batchId:g.batchId,changes:Kx(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Ie(re)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await sa(r,s.changes),await $u(r.remoteStore)}catch(s){const i=om(s,"Failed to persist write");n.reject(i)}}async function Rw(t,e){const n=J(t);try{const r=await lA(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await sa(n,r,e)}catch(r){await gi(r)}}function Q0(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=J(o);c.onlineState=l;let d=!1;c.queries.forEach((m,v)=>{for(const g of v.Sa)g.va(l)&&(d=!0)}),d&&am(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YA(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Ie(W.comparator);o=o.insert(i,at.newNoDocument(i,X.min()));const l=se().add(i),c=new Uu(X.min(),new Map,new Ie(re),o,l);await Rw(r,c),r.du=r.du.remove(i),r.Au.delete(e),um(r)}else await kh(r.localStore,e,!1).then(()=>Ih(r,e,n)).catch(gi)}async function XA(t,e){const n=J(t),r=e.batch.batchId;try{const s=await aA(n.localStore,e);Dw(n,r,null),Pw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await sa(n,s)}catch(s){await gi(s)}}async function JA(t,e,n){const r=J(t);try{const s=await function(o,l){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let m;return c.mutationQueue.lookupMutationBatch(d,l).next(v=>(ce(v!==null,37113),m=v.keys(),c.mutationQueue.removeMutationBatch(d,v))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,m,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,m)).next(()=>c.localDocuments.getDocuments(d,m))})}(r.localStore,e);Dw(r,e,n),Pw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await sa(r,s)}catch(s){await gi(s)}}function Pw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Dw(t,e,n){const r=J(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ih(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||jw(t,r)})}function jw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(tm(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),um(t))}function Y0(t,e,n){for(const r of n)r instanceof Nw?(t.Ru.addReference(r.key,e),ZA(t,r)):r instanceof Aw?($(lm,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||jw(t,r.key)):Y(19791,{wu:r})}function ZA(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||($(lm,"New document in limbo: "+n),t.Eu.add(r),um(t))}function um(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new W(ge.fromString(e)),r=t.fu.next();t.Au.set(r,new BA(n)),t.du=t.du.insert(n,r),_w(t.remoteStore,new ir(fn(qf(n.path)),r,"TargetPurposeLimboResolution",Du.ce))}}async function sa(t,e,n){const r=J(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var m;if((d||n)&&r.isPrimaryClient){const v=d?!d.fromCache:(m=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:m.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(d){s.push(d);const v=Zf.As(c.targetId,d);i.push(v)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,d){const m=J(c);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>L.forEach(d,g=>L.forEach(g.Es,T=>m.persistence.referenceDelegate.addReference(v,g.targetId,T)).next(()=>L.forEach(g.ds,T=>m.persistence.referenceDelegate.removeReference(v,g.targetId,T)))))}catch(v){if(!yi(v))throw v;$(em,"Failed to update sequence numbers: "+v)}for(const v of d){const g=v.targetId;if(!v.fromCache){const T=m.Ms.get(g),N=T.snapshotVersion,R=T.withLastLimboFreeSnapshotVersion(N);m.Ms=m.Ms.insert(g,R)}}}(r.localStore,i))}async function eC(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){$(lm,"User change. New user:",e.toKey());const r=await pw(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new B(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await sa(n,r.Ls)}}function tC(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return se().add(r.key);{let s=se();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function Vw(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Rw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YA.bind(null,e),e.Pu.H_=LA.bind(null,e.eventManager),e.Pu.yu=FA.bind(null,e.eventManager),e}function nC(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=JA.bind(null,e),e}class ou{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=zu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oA(this.persistence,new rA,e.initialUser,this.serializer)}Cu(e){return new mw(Jf.mi,this.serializer)}Du(e){return new fA}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ou.provider={build:()=>new ou};class rC extends ou{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof su,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new BN(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yt.withCacheSize(this.cacheSizeBytes):yt.DEFAULT;return new mw(r=>su.mi(r,n),this.serializer)}}class Sh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Q0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eC.bind(null,this.syncEngine),await VA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new OA}()}createDatastore(e){const n=zu(e.databaseInfo.databaseId),r=function(i){return new vA(i)}(e.databaseInfo);return function(i,o,l,c){return new EA(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new TA(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Q0(this.syncEngine,n,0),function(){return $0.v()?new $0:new mA}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,m){const v=new $A(s,i,o,l,c,d);return m&&(v.gu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);$(os,"RemoteStore shutting down."),i.Ea.add(5),await ra(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Sh.provider={build:()=>new Sh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Un("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr="FirestoreClient";class sC{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=it.UNAUTHENTICATED,this.clientId=Ff.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{$(Sr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>($(Sr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=om(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ad(t,e){t.asyncQueue.verifyOperationInProgress(),$(Sr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function X0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await iC(t);$(Sr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>q0(e.remoteStore,s)),t._onlineComponents=e}async function iC(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){$(Sr,"Using user provided OfflineComponentProvider");try{await ad(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ni("Error using user provided cache. Falling back to memory cache: "+n),await ad(t,new ou)}}else $(Sr,"Using default OfflineComponentProvider"),await ad(t,new rC(void 0));return t._offlineComponents}async function Ow(t){return t._onlineComponents||(t._uninitializedComponentsProvider?($(Sr,"Using user provided OnlineComponentProvider"),await X0(t,t._uninitializedComponentsProvider._online)):($(Sr,"Using default OnlineComponentProvider"),await X0(t,new Sh))),t._onlineComponents}function oC(t){return Ow(t).then(e=>e.syncEngine)}async function Lw(t){const e=await Ow(t),n=e.eventManager;return n.onListen=HA.bind(null,e.syncEngine),n.onUnlisten=GA.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=qA.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KA.bind(null,e.syncEngine),n}function aC(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new Mw({next:g=>{m.Nu(),o.enqueueAndForget(()=>Iw(i,v));const T=g.docs.has(l);!T&&g.fromCache?d.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&g.fromCache&&c&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),v=new Sw(qf(l.path),m,{includeMetadataChanges:!0,qa:!0});return bw(i,v)}(await Lw(t),t.asyncQueue,e,n,r)),r.promise}function lC(t,e,n={}){const r=new Pn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const m=new Mw({next:g=>{m.Nu(),o.enqueueAndForget(()=>Iw(i,v)),g.fromCache&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),v=new Sw(l,m,{includeMetadataChanges:!0,qa:!0});return bw(i,v)}(await Lw(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uw="firestore.googleapis.com",Z0=!0;class ey{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Uw,this.ssl=Z0}else this.host=e.host,this.ssl=e.ssl??Z0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UN)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}b2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Fw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Hu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ey({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ey(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new p2;switch(r.type){case"firstParty":return new _2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=J0.get(n);r&&($("ComponentProvider","Removing Datastore"),J0.delete(n),r.terminate())}(this),Promise.resolve()}}function uC(t,e,n,r={}){var d;t=tn(t,Hu);const s=hi(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(C_(`https://${l}`),R_("Firestore",!0)),i.host!==Uw&&i.host!==l&&ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!es(c,o)&&(t._setSettings(c),r.mockUserToken)){let m,v;if(typeof r.mockUserToken=="string")m=r.mockUserToken,v=it.MOCK_USER;else{m=IT(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new it(g)}t._authCredentials=new g2(new Tx(m,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fs{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fs(this.firestore,e,this._query)}}class De{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(ea(n,De._jsonSchema))return new De(e,r||null,new W(ge.fromString(n.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:Oe("string",De._jsonSchemaVersion),referencePath:Oe("string")};class _r extends fs{constructor(e,n,r){super(e,n,qf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new W(e))}withConverter(e){return new _r(this.firestore,e,this._path)}}function li(t,e,...n){if(t=qe(t),bx("collection","path",e),t instanceof Hu){const r=ge.fromString(e,...n);return f0(r),new _r(t,null,r)}{if(!(t instanceof De||t instanceof _r))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return f0(r),new _r(t.firestore,null,r)}}function Jt(t,e,...n){if(t=qe(t),arguments.length===1&&(e=Ff.newId()),bx("doc","path",e),t instanceof Hu){const r=ge.fromString(e,...n);return h0(r),new De(t,null,new W(r))}{if(!(t instanceof De||t instanceof _r))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ge.fromString(e,...n));return h0(r),new De(t.firestore,t instanceof _r?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ty="AsyncQueue";class ny{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yw(this,"async_queue_retry"),this._c=()=>{const r=od();r&&$(ty,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=od();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=od();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Pn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yi(e))throw e;$(ty,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Un("INTERNAL UNHANDLED ERROR: ",ry(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=im.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&Y(47125,{Pc:ry(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ry(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ms extends Hu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ny,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ny(e),this._firestoreClient=void 0,await e}}}function qu(t,e){const n=typeof t=="object"?t:j_(),r=typeof t=="string"?t:e||Jl,s=Af(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=TT("firestore");i&&uC(s,...i)}return s}function cm(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||cC(t),t._firestoreClient}function cC(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,m){return new M2(l,c,d,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Fw(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new sC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ot(Je.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ot(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ot._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ea(e,Ot._jsonSchema))return Ot.fromBase64String(e.bytes)}}Ot._jsonSchemaVersion="firestore/bytes/1.0",Ot._jsonSchema={type:Oe("string",Ot._jsonSchemaVersion),bytes:Oe("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pn._jsonSchemaVersion}}static fromJSON(e){if(ea(e,pn._jsonSchema))return new pn(e.latitude,e.longitude)}}pn._jsonSchemaVersion="firestore/geoPoint/1.0",pn._jsonSchema={type:Oe("string",pn._jsonSchemaVersion),latitude:Oe("number"),longitude:Oe("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ea(e,gn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new gn(e.vectorValues);throw new B(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gn._jsonSchemaVersion="firestore/vectorValue/1.0",gn._jsonSchema={type:Oe("string",gn._jsonSchemaVersion),vectorValues:Oe("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=/^__.*__$/;class hC{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new jr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ta(e,this.data,n,this.fieldTransforms)}}class zw{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new jr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Bw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y(40011,{Ac:t})}}class hm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return au(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Bw(this.Ac)&&dC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class fC{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||zu(e)}Cc(e,n,r,s=!1){return new hm({Ac:e,methodName:n,Dc:r,path:Qe.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Gu(t){const e=t._freezeSettings(),n=zu(t._databaseId);return new fC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $w(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);fm("Data must be an object, but it was:",o,r);const l=Hw(r,o);let c,d;if(i.merge)c=new St(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const m=[];for(const v of i.mergeFields){const g=Nh(e,v,n);if(!o.contains(g))throw new B(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Ww(m,g)||m.push(g)}c=new St(m),d=o.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,d=o.fieldTransforms;return new hC(new _t(l),c,d)}class Ku extends dm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ku}}function mC(t,e,n,r){const s=t.Cc(1,e,n);fm("Data must be an object, but it was:",s,r);const i=[],o=_t.empty();Dr(r,(c,d)=>{const m=mm(e,c,n);d=qe(d);const v=s.yc(m);if(d instanceof Ku)i.push(m);else{const g=ia(d,v);g!=null&&(i.push(m),o.set(m,g))}});const l=new St(i);return new zw(o,l,s.fieldTransforms)}function pC(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Nh(e,r,n)],c=[s];if(i.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Nh(e,i[g])),c.push(i[g+1]);const d=[],m=_t.empty();for(let g=l.length-1;g>=0;--g)if(!Ww(d,l[g])){const T=l[g];let N=c[g];N=qe(N);const R=o.yc(T);if(N instanceof Ku)d.push(T);else{const O=ia(N,R);O!=null&&(d.push(T),m.set(T,O))}}const v=new St(d);return new zw(m,v,o.fieldTransforms)}function gC(t,e,n,r=!1){return ia(n,t.Cc(r?4:3,e))}function ia(t,e){if(qw(t=qe(t)))return fm("Unsupported field value:",e,t),Hw(t,e);if(t instanceof dm)return function(r,s){if(!Bw(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=ia(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sN(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Z.fromDate(r);return{timestampValue:ru(s.serializer,i)}}if(r instanceof Z){const i=new Z(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(s.serializer,i)}}if(r instanceof pn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ot)return{bytesValue:ow(s.serializer,r._byteString)};if(r instanceof De){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof gn)return function(o,l){return{mapValue:{fields:{[jx]:{stringValue:Mx},[Zl]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Wf(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Pu(r)}`)}(t,e)}function Hw(t,e){const n={};return Nx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dr(t,(r,s)=>{const i=ia(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function qw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Z||t instanceof pn||t instanceof Ot||t instanceof De||t instanceof dm||t instanceof gn)}function fm(t,e,n){if(!qw(n)||!Ix(n)){const r=Pu(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Nh(t,e,n){if((e=qe(e))instanceof Wu)return e._internalPath;if(typeof e=="string")return mm(t,e);throw au("Field path arguments must be of type string or ",t,!1,void 0,n)}const yC=new RegExp("[~\\*/\\[\\]]");function mm(t,e,n){if(e.search(yC)>=0)throw au(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Wu(...e.split("."))._internalPath}catch{throw au(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function au(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new B(M.INVALID_ARGUMENT,l+t+c)}function Ww(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Qu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class vC extends Gw{data(){return super.data()}}function Qu(t,e){return typeof e=="string"?mm(t,e):e instanceof Wu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _C(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pm{}class Kw extends pm{}function gm(t,e,...n){let r=[];e instanceof pm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof vm).length,l=i.filter(c=>c instanceof Yu).length;if(o>1||o>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Yu extends Kw{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yu(e,n,r)}_apply(e){const n=this._parse(e);return Qw(e._query,n),new fs(e.firestore,e.converter,yh(e._query,n))}_parse(e){const n=Gu(e.firestore);return function(i,o,l,c,d,m,v){let g;if(d.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){iy(v,m);const N=[];for(const R of v)N.push(sy(c,i,R));g={arrayValue:{values:N}}}else g=sy(c,i,v)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||iy(v,m),g=gC(l,o,v,m==="in"||m==="not-in");return Me.create(d,m,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ym(t,e,n){const r=e,s=Qu("where",t);return Yu._create(s,r,n)}class vm extends pm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new vm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)Qw(o,c),o=yh(o,c)}(e._query,n),new fs(e.firestore,e.converter,yh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _m extends Kw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _m(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lo(i,o)}(e._query,this._field,this._direction);return new fs(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new vi(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function lu(t,e="asc"){const n=e,r=Qu("orderBy",t);return _m._create(r,n)}function sy(t,e,n){if(typeof(n=qe(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hx(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ge.fromString(n));if(!W.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return w0(t,new W(r))}if(n instanceof De)return w0(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pu(n)}.`)}function iy(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Qw(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class xC{convertValue(e,n="none"){switch(br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Tr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Dr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Zl].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Re(o.doubleValue));return new gn(n)}convertGeoPoint(e){return new pn(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Vu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Vo(e));default:return null}}convertTimestamp(e){const n=kr(e);return new Z(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ge.fromString(e);ce(hw(r),9688,{name:e});const s=new Mo(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||Un(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Xi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kr extends Gw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new vl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Qu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Kr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Kr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Kr._jsonSchema={type:Oe("string",Kr._jsonSchemaVersion),bundleSource:Oe("string","DocumentSnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class vl extends Kr{data(e={}){return super.data(e)}}class Gs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Xi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new vl(this._firestore,this._userDataWriter,r.key,r,new Xi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new vl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new vl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Xi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,m=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),m=o.indexOf(l.doc.key)),{type:wC(l.type),doc:c,oldIndex:d,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new B(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Gs._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ff.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function wC(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){t=tn(t,De);const e=tn(t.firestore,ms);return aC(cm(e),t._key).then(n=>kC(e,t,n))}Gs._jsonSchemaVersion="firestore/querySnapshot/1.0",Gs._jsonSchema={type:Oe("string",Gs._jsonSchemaVersion),bundleSource:Oe("string","QuerySnapshot"),bundleName:Oe("string"),bundle:Oe("string")};class Jw extends xC{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ot(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}}function xm(t){t=tn(t,fs);const e=tn(t.firestore,ms),n=cm(e),r=new Jw(e);return _C(t._query),lC(n,t._query).then(s=>new Gs(e,r,t,s))}function Zw(t,e,n){t=tn(t,De);const r=tn(t.firestore,ms),s=Yw(t.converter,e);return Xu(r,[$w(Gu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ut.none())])}function oa(t,e,n,...r){t=tn(t,De);const s=tn(t.firestore,ms),i=Gu(s);let o;return o=typeof(e=qe(e))=="string"||e instanceof Wu?pC(i,"updateDoc",t._key,e,n,r):mC(i,"updateDoc",t._key,e),Xu(s,[o.toMutation(t._key,Ut.exists(!0))])}function EC(t){return Xu(tn(t.firestore,ms),[new Gf(t._key,Ut.none())])}function wm(t,e){const n=tn(t.firestore,ms),r=Jt(t),s=Yw(t.converter,e);return Xu(n,[$w(Gu(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ut.exists(!1))]).then(()=>r)}function Xu(t,e){return function(r,s){const i=new Pn;return r.asyncQueue.enqueueAndForget(async()=>QA(await oC(r),s,i)),i.promise}(cm(t),e)}function kC(t,e,n){const r=n.docs.get(e._key),s=new Jw(t);return new Kr(t,s,e._key,r,new Xi(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){pi=s})(fi),ti(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ms(new y2(r.getProvider("auth-internal")),new x2(o,r.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mo(d.options.projectId,m)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),yr(l0,u0,e),yr(l0,u0,"esm2020")})();console.log("🔍 Testing Firebase imports...");console.log("📦 Firebase modules loaded:",{initializeApp:ns,getAuth:Ru,getFirestore:qu});const Ah={apiKey:"AIzaSyAwuGiCbhncNHERF9vOV1wV5QiA3RXdgPk",authDomain:"mesi-takip-web-v1.firebaseapp.com",projectId:"mesi-takip-web-v1",storageBucket:"mesi-takip-web-v1.firebasestorage.app",messagingSenderId:"1061767802586",appId:"1:1061767802586:web:edefb08963448c70b2bfe3",measurementId:"G-75T6X9CPSP"};console.log("⚙️ Firebase config:",Ah);console.log("🚀 Initializing Firebase app...");let or;try{console.log("🚀 About to call initializeApp..."),console.log("🚀 initializeApp function:",typeof ns),console.log("🚀 firebaseConfig:",Ah),or=ns(Ah),console.log("✅ Firebase app initialized:",or),console.log("✅ App name:",or.name),console.log("✅ App options:",or.options)}catch(t){throw console.error("❌ Firebase app initialization failed:",t),console.error("❌ Error message:",t.message),console.error("❌ Error stack:",t.stack),t}console.log("🔐 Initializing Firebase Auth...");const At=Ru(or);console.log("✅ Firebase Auth initialized:",At);console.log("🗄️ Initializing Firestore...");const Le=qu(or);console.log("✅ Firestore initialized:",Le);const TC=or;console.log("🌐 Binding Firebase to window object...");if(typeof window<"u")try{window.firebase=or,window.firebaseAuth=At,window.firebaseDb=Le,window.auth=At,window.db=Le,console.log("🔥 Firebase successfully bound to window object"),console.log("window.firebase:",window.firebase),console.log("window.auth:",window.auth),console.log("window.db:",window.db),console.log("window.firebaseAuth:",window.firebaseAuth),console.log("window.firebaseDb:",window.firebaseDb)}catch(t){console.error("❌ Error binding Firebase to window:",t)}else console.log("⚠️ Window object not available (server-side)");const e1={registerUser:async(t,e,n,r)=>{try{const s=JSON.parse(localStorage.getItem("users")||"[]");if(s.find(l=>l.email===t))return{success:!1,error:"Bu email adresi zaten kullanılıyor"};const o={uid:Date.now().toString(),email:t,password:btoa(e),name:n,startDate:r,employeeType:"normal"};return s.push(o),localStorage.setItem("users",JSON.stringify(s)),{success:!0,user:{uid:o.uid,email:o.email,displayName:o.name}}}catch{return{success:!1,error:"Kayıt sırasında hata oluştu"}}},loginUser:async(t,e)=>{try{const r=JSON.parse(localStorage.getItem("users")||"[]").find(s=>s.email===t&&s.password===btoa(e));return r?{success:!0,user:{uid:r.uid,email:r.email,displayName:r.name}}:{success:!1,error:"Email veya şifre hatalı"}}catch{return{success:!1,error:"Giriş sırasında hata oluştu"}}},logoutUser:async()=>(localStorage.removeItem("currentUser"),{success:!0}),onAuthStateChange:t=>{const e=localStorage.getItem("currentUser");return t(e?JSON.parse(e):null),()=>{}},getCurrentUser:()=>{const t=localStorage.getItem("currentUser");return t?JSON.parse(t):null}},bC=async(t,e,n,r)=>{try{console.log("=== FIREBASE REGISTRATION ATTEMPT ==="),console.log("Email:",t),console.log("Password length:",e.length),console.log("Auth object:",At),console.log("Firebase app:",At.app);const s=await YI(At,t,e);return console.log("✅ Firebase registration successful:",s.user),console.log("User UID:",s.user.uid),console.log("User Email:",s.user.email),console.log("=== END FIREBASE REGISTRATION ==="),{success:!0,user:s.user}}catch(s){return console.error("❌ Firebase registration error:",s),console.error("Error code:",s.code),console.error("Error message:",s.message),s.code==="auth/network-request-failed"||s.message.includes("ERR_CONNECTION_RESET")?(console.log("🔄 Using localStorage fallback for registration"),n&&r?await e1.registerUser(t,e,n,r):{success:!1,error:"Firebase bağlantısı kurulamadı. Lütfen internet bağlantınızı kontrol edin."}):{success:!1,error:s.message}}},IC=async(t,e)=>{try{console.log("=== FIREBASE LOGIN ATTEMPT ==="),console.log("Email:",t),console.log("Auth object:",At);const n=await XI(At,t,e);return console.log("✅ Firebase login successful:",n.user),console.log("User UID:",n.user.uid),console.log("=== END FIREBASE LOGIN ==="),{success:!0,user:n.user}}catch(n){return console.error("❌ Firebase login error:",n),console.error("Error code:",n.code),console.error("Error message:",n.message),n.code==="auth/network-request-failed"||n.message.includes("ERR_CONNECTION_RESET")?(console.log("🔄 Using localStorage fallback for login"),await e1.loginUser(t,e)):{success:!1,error:n.message}}},SC=async()=>{try{return await tS(At),{success:!0}}catch(t){return{success:!1,error:t.message}}},NC=t=>eS(At,t),oy={async createProfile(t){try{const e=Jt(Le,"userProfiles",t.uid);return await Zw(e,{...t,createdAt:Z.now(),updatedAt:Z.now()}),!0}catch(e){return console.error("Error creating user profile:",e),!1}},async getProfile(t){try{const e=Jt(Le,"userProfiles",t),n=await Xw(e);return n.exists()?n.data():null}catch(e){return console.error("Error getting user profile:",e),null}},async updateProfile(t,e){try{const n=Jt(Le,"userProfiles",t);return await oa(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating user profile:",n),!1}}},AC={theme:"light",language:"tr",notifications:{email:!0,push:!0,overtime:!0,leave:!0,salary:!0},workingHours:{daily:8,weekly:40,monthly:160},overtimeRate:{normal:1.5,weekend:2,holiday:2.5}},CC={async createSettings(t){try{const e=Jt(Le,"userSettings",t);return await Zw(e,{uid:t,...AC,createdAt:Z.now(),updatedAt:Z.now()}),!0}catch(e){return console.error("Error creating user settings:",e),!1}},async getSettings(t){try{const e=Jt(Le,"userSettings",t),n=await Xw(e);return n.exists()?n.data():await this.createSettings(t)?await this.getSettings(t):null}catch(e){return console.error("Error getting user settings:",e),null}},async updateSettings(t,e){try{const n=Jt(Le,"userSettings",t);return await oa(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating user settings:",n),!1}}},t1=q.createContext(void 0),$t=()=>{const t=q.useContext(t1);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},RC=({children:t})=>{const[e,n]=q.useState(null),[r,s]=q.useState(!0);q.useEffect(()=>{const d=NC(async m=>{var v;if(m){const g=await oy.getProfile(m.uid);if(g){const T={id:g.uid,name:g.name,email:g.email,startDate:g.startDate,employeeType:g.employeeType};n(T)}else{const T={id:m.uid,name:m.displayName||((v=m.email)==null?void 0:v.split("@")[0])||"Kullanıcı",email:m.email||"",startDate:new Date().toISOString().split("T")[0],employeeType:"normal"};n(T)}}else n(null);s(!1)});return()=>d()},[]);const i=async(d,m)=>{s(!0);try{return await IC(d,m)}catch(v){return console.error("Login error:",v),{success:!1,error:"Giriş sırasında bir hata oluştu"}}finally{s(!1)}},o=async(d,m,v,g)=>{s(!0);try{if(v.length<6)return{success:!1,error:"Şifre en az 6 karakter olmalıdır"};const T=await bC(m,v,d,g);if(T.success&&T.user)try{await oy.createProfile({uid:T.user.uid,name:d,email:m,startDate:g,employeeType:"normal"})||console.error("Failed to create user profile"),await CC.createSettings(T.user.uid)||console.error("Failed to create user settings")}catch{console.log("Firebase services not available, using localStorage only")}return T}catch(T){return console.error("Register error:",T),{success:!1,error:"Kayıt sırasında bir hata oluştu"}}finally{s(!1)}},l=async()=>{try{await SC(),n(null)}catch(d){console.error("Logout error:",d)}},c=async d=>{if(!e)return;const m={...e,...d};n(m)};return u.jsx(t1.Provider,{value:{user:e,login:i,register:o,logout:l,isLoading:r,updateUser:c},children:t})},PC=[{date:"2024-01-01",name:"Yılbaşı",isRecurring:!0},{date:"2024-04-09",name:"Ramazan Bayramı Arifesi",isRecurring:!1},{date:"2024-04-10",name:"Ramazan Bayramı 1. Gün",isRecurring:!1},{date:"2024-04-11",name:"Ramazan Bayramı 2. Gün",isRecurring:!1},{date:"2024-04-12",name:"Ramazan Bayramı 3. Gün",isRecurring:!1},{date:"2024-04-23",name:"Ulusal Egemenlik ve Çocuk Bayramı",isRecurring:!0},{date:"2024-05-01",name:"Emek ve Dayanışma Günü",isRecurring:!0},{date:"2024-05-19",name:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",isRecurring:!0},{date:"2024-06-15",name:"Kurban Bayramı Arifesi",isRecurring:!1},{date:"2024-06-16",name:"Kurban Bayramı 1. Gün",isRecurring:!1},{date:"2024-06-17",name:"Kurban Bayramı 2. Gün",isRecurring:!1},{date:"2024-06-18",name:"Kurban Bayramı 3. Gün",isRecurring:!1},{date:"2024-06-19",name:"Kurban Bayramı 4. Gün",isRecurring:!1},{date:"2024-07-15",name:"Demokrasi ve Milli Birlik Günü",isRecurring:!0},{date:"2024-08-30",name:"Zafer Bayramı",isRecurring:!0},{date:"2024-10-29",name:"Cumhuriyet Bayramı",isRecurring:!0},{date:"2025-01-01",name:"Yılbaşı",isRecurring:!0},{date:"2025-03-29",name:"Ramazan Bayramı Arifesi",isRecurring:!1},{date:"2025-03-30",name:"Ramazan Bayramı 1. Gün",isRecurring:!1},{date:"2025-03-31",name:"Ramazan Bayramı 2. Gün",isRecurring:!1},{date:"2025-04-01",name:"Ramazan Bayramı 3. Gün",isRecurring:!1},{date:"2025-04-23",name:"Ulusal Egemenlik ve Çocuk Bayramı",isRecurring:!0},{date:"2025-05-01",name:"Emek ve Dayanışma Günü",isRecurring:!0},{date:"2025-05-19",name:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",isRecurring:!0},{date:"2025-06-06",name:"Kurban Bayramı Arifesi",isRecurring:!1},{date:"2025-06-07",name:"Kurban Bayramı 1. Gün",isRecurring:!1},{date:"2025-06-08",name:"Kurban Bayramı 2. Gün",isRecurring:!1},{date:"2025-06-09",name:"Kurban Bayramı 3. Gün",isRecurring:!1},{date:"2025-06-10",name:"Kurban Bayramı 4. Gün",isRecurring:!1},{date:"2025-07-15",name:"Demokrasi ve Milli Birlik Günü",isRecurring:!0},{date:"2025-08-30",name:"Zafer Bayramı",isRecurring:!0},{date:"2025-10-29",name:"Cumhuriyet Bayramı",isRecurring:!0},{date:"2026-01-01",name:"Yılbaşı",isRecurring:!0},{date:"2026-03-19",name:"Ramazan Bayramı Arifesi",isRecurring:!1},{date:"2026-03-20",name:"Ramazan Bayramı 1. Gün",isRecurring:!1},{date:"2026-03-21",name:"Ramazan Bayramı 2. Gün",isRecurring:!1},{date:"2026-03-22",name:"Ramazan Bayramı 3. Gün",isRecurring:!1},{date:"2026-04-23",name:"Ulusal Egemenlik ve Çocuk Bayramı",isRecurring:!0},{date:"2026-05-01",name:"Emek ve Dayanışma Günü",isRecurring:!0},{date:"2026-05-19",name:"Atatürk'ü Anma, Gençlik ve Spor Bayramı",isRecurring:!0},{date:"2026-05-27",name:"Kurban Bayramı Arifesi",isRecurring:!1},{date:"2026-05-28",name:"Kurban Bayramı 1. Gün",isRecurring:!1},{date:"2026-05-29",name:"Kurban Bayramı 2. Gün",isRecurring:!1},{date:"2026-05-30",name:"Kurban Bayramı 3. Gün",isRecurring:!1},{date:"2026-05-31",name:"Kurban Bayramı 4. Gün",isRecurring:!1},{date:"2026-07-15",name:"Demokrasi ve Milli Birlik Günü",isRecurring:!0},{date:"2026-08-30",name:"Zafer Bayramı",isRecurring:!0},{date:"2026-10-29",name:"Cumhuriyet Bayramı",isRecurring:!0}],ld={async getAll(t){try{const e=gm(li(Le,"overtimes"),ym("userId","==",t),lu("date","desc"));return(await xm(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting overtimes:",e),[]}},async add(t){try{return(await wm(li(Le,"overtimes"),{...t,createdAt:Z.now(),updatedAt:Z.now()})).id}catch(e){return console.error("Error adding overtime:",e),null}},async update(t,e){try{const n=Jt(Le,"overtimes",t);return await oa(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating overtime:",n),!1}}},ud={async getAll(t){try{const e=gm(li(Le,"leaves"),ym("userId","==",t),lu("startDate","desc"));return(await xm(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting leaves:",e),[]}},async add(t){try{return(await wm(li(Le,"leaves"),{...t,createdAt:Z.now(),updatedAt:Z.now()})).id}catch(e){return console.error("Error adding leave:",e),null}},async update(t,e){try{const n=Jt(Le,"leaves",t);return await oa(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating leave:",n),!1}}},Ka={async getAll(t){try{const e=gm(li(Le,"salaries"),ym("userId","==",t),lu("year","desc"),lu("month","desc"));return(await xm(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){return console.error("Error getting salaries:",e),[]}},async add(t){try{return(await wm(li(Le,"salaries"),{...t,createdAt:Z.now(),updatedAt:Z.now()})).id}catch(e){return console.error("Error adding salary:",e),null}},async update(t,e){try{const n=Jt(Le,"salaries",t);return await oa(n,{...e,updatedAt:Z.now()}),!0}catch(n){return console.error("Error updating salary:",n),!1}},async delete(t){try{return await EC(Jt(Le,"salaries",t)),!0}catch(e){return console.error("Error deleting salary:",e),!1}}},n1=q.createContext(void 0),as=()=>{const t=q.useContext(n1);if(t===void 0)throw new Error("useData must be used within a DataProvider");return t},DC=({children:t})=>{const[e,n]=q.useState([]),[r,s]=q.useState([]),[i,o]=q.useState([]),[l,c]=q.useState([]),{user:d}=$t();q.useEffect(()=>{d!=null&&d.id&&m()},[d==null?void 0:d.id]);const m=async()=>{if(d!=null&&d.id)try{const x=await ld.getAll(d.id);s(x);const p=await ud.getAll(d.id);o(p);const y=await Ka.getAll(d.id);n(y);const k=localStorage.getItem("holidays");if(k)c(JSON.parse(k));else{const I=PC.map(A=>({...A,id:Date.now().toString()+Math.random().toString(36).slice(2)}));c(I),localStorage.setItem("holidays",JSON.stringify(I))}}catch(x){console.error("Error loading data:",x)}};q.useEffect(()=>{localStorage.setItem("holidays",JSON.stringify(l))},[l]);const v=async x=>{if(d!=null&&d.id)try{const p={...x,userId:d.id},y=await Ka.add(p);if(y){const k={...x,id:y,createdAt:new Date().toISOString().split("T")[0]};n(I=>[...I,k])}}catch(p){console.error("Error adding salary:",p)}},g=async(x,p)=>{try{await Ka.update(x,p)&&n(k=>k.map(I=>I.id===x?{...I,...p}:I))}catch(y){console.error("Error updating salary:",y)}},T=async x=>{try{await Ka.delete(x)&&n(y=>y.filter(k=>k.id!==x))}catch(p){console.error("Error deleting salary:",p)}},N=async x=>{if(d!=null&&d.id)try{const p={...x,userId:d.id},y=await ld.add(p);if(y){const k={...x,id:y};s(I=>[...I,k])}}catch(p){console.error("Error adding overtime:",p)}},R=async(x,p)=>{try{await ld.update(x,p)&&s(k=>k.map(I=>I.id===x?{...I,...p}:I))}catch(y){console.error("Error updating overtime:",y)}},O=x=>{s(p=>p.filter(y=>y.id!==x))},w=async x=>{if(d!=null&&d.id)try{const p={...x,userId:d.id},y=await ud.add(p);if(y){const k={...x,id:y};o(I=>[...I,k])}}catch(p){console.error("Error adding leave:",p)}},E=async(x,p)=>{try{await ud.update(x,p)&&o(k=>k.map(I=>I.id===x?{...I,...p}:I))}catch(y){console.error("Error updating leave:",y)}},S=x=>{o(p=>p.filter(y=>y.id!==x))},P=x=>{const p={...x,id:Date.now().toString()};c(y=>[...y,p])},D=(x,p)=>{c(y=>y.map(k=>k.id===x?{...k,...p}:k))},V=x=>{c(p=>p.filter(y=>y.id!==x))};return u.jsx(n1.Provider,{value:{salaries:e,addSalary:v,updateSalary:g,deleteSalary:T,overtimes:r,addOvertime:N,updateOvertime:R,deleteOvertime:O,leaves:i,addLeave:w,updateLeave:E,deleteLeave:S,holidays:l,addHoliday:P,updateHoliday:D,deleteHoliday:V},children:t})},jC=({message:t,visible:e})=>e?u.jsx("div",{className:"fixed left-4 bottom-4 z-50 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg animate-fade-in-out transition-all",children:t}):null,r1=q.createContext(void 0),VC=()=>{const t=q.useContext(r1);if(!t)throw new Error("useToast must be used within a ToastProvider");return t},MC=({children:t})=>{const[e,n]=q.useState({message:"",visible:!1}),r=q.useCallback(s=>{n({message:s,visible:!0}),setTimeout(()=>n({message:"",visible:!1}),2500)},[]);return u.jsxs(r1.Provider,{value:{showToast:r},children:[t,u.jsx(jC,{message:e.message,visible:e.visible})]})},s1=q.createContext(void 0),Em=()=>{const t=q.useContext(s1);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t},OC=({children:t})=>{const[e,n]=q.useState(!1),r=()=>{n(!e)};return u.jsx(s1.Provider,{value:{isCollapsed:e,setIsCollapsed:n,toggleSidebar:r},children:t})},ay={profile:{name:"",email:"",phone:"",department:"Yazılım Geliştirme",position:"Senior Developer",startDate:"",employeeId:"EMP001"},notifications:{salaryReminder:!0,overtimeApproval:!0,leaveStatus:!0,holidayReminder:!0,emailNotifications:!0,pushNotifications:!1},salary:{defaultNetSalary:"5000.00",defaultHourlyRate:"150.00",currency:"TRY",workingHoursPerDay:"8",workingDaysPerWeek:"5",annualLeaveEntitlement:"14",besContribution:"0"},appearance:{theme:"light",language:"tr",dateFormat:"DD/MM/YYYY",numberFormat:"tr-TR"}},i1=q.createContext(void 0),xi=()=>{const t=q.useContext(i1);if(t===void 0)throw new Error("useSettings must be used within a SettingsProvider");return t},LC=({children:t})=>{const[e,n]=q.useState(ay);q.useEffect(()=>{const l=localStorage.getItem("userSettings");if(l)try{const c=JSON.parse(l);n({...ay,...c})}catch(c){console.error("Ayarlar yüklenirken hata oluştu:",c)}},[]);const r=l=>{try{localStorage.setItem("userSettings",JSON.stringify(l))}catch(c){console.error("Ayarlar kaydedilirken hata oluştu:",c)}},s=()=>{const{theme:l}=e.appearance,c=document.documentElement;l==="dark"||l==="auto"&&window.matchMedia("(prefers-color-scheme: dark)").matches?(c.classList.add("dark"),c.classList.remove("light")):(c.classList.add("light"),c.classList.remove("dark"))};q.useEffect(()=>{if(s(),e.appearance.theme==="auto"){const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>s();return l.addEventListener("change",c),()=>l.removeEventListener("change",c)}},[e.appearance.theme]);const i=(l,c)=>{const d={...e,[l]:{...e[l],...c}};n(d),r(d)},o=l=>{i("appearance",l)};return u.jsx(i1.Provider,{value:{settings:e,updateSettings:i,updateAppearance:o,applyTheme:s},children:t})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var FC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),fe=(t,e)=>{const n=q.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},m)=>q.createElement("svg",{ref:m,...FC,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${UC(t)}`,l].join(" "),...d},[...e.map(([v,g])=>q.createElement(v,g)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=fe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=fe("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o1=fe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ju=fe("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=fe("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ly=fe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a1=fe("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l1=fe("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=fe("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=fe("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=fe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=fe("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c1=fe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=fe("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=fe("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ch=fe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=fe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d1=fe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=fe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=fe("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zu=fe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=fe("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=fe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=fe("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=fe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=fe("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cu=fe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=fe("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uy=fe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),JC=({onSwitchToRegister:t})=>{const[e,n]=q.useState(""),[r,s]=q.useState(""),[i,o]=q.useState(!1),[l,c]=q.useState(""),{login:d,isLoading:m}=$t(),v=async g=>{if(g.preventDefault(),c(""),!e||!r){c("Lütfen tüm alanları doldurun.");return}const T=await d(e,r);T.success||c(T.error||"Giriş başarısız. Email veya şifre hatalı.")};return u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Giriş Yap"}),u.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Hesabınıza erişim sağlayın"})]}),l&&u.jsx("div",{className:"mb-4 text-red-700 dark:text-red-400 text-base bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-800 p-3 rounded-lg font-semibold text-center",children:l}),u.jsxs("form",{onSubmit:v,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(d1,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"email",type:"email",value:e,onChange:g=>n(g.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"ornek@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Ch,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"password",type:i?"text":"password",value:r,onChange:g=>s(g.target.value),className:"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Şifrenizi girin",required:!0}),u.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:i?u.jsx(u1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):u.jsx(c1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),u.jsx("button",{type:"submit",disabled:m,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Giriş yapılıyor...":"Giriş Yap"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Hesabınız yok mu?"," ",u.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors",children:"Kayıt Ol"})]})})]})},ZC=({onSwitchToLogin:t})=>{const[e,n]=q.useState({name:"",email:"",password:"",confirmPassword:"",startDate:""}),[r,s]=q.useState(!1),[i,o]=q.useState(""),{register:l,isLoading:c}=$t(),d=v=>{n({...e,[v.target.name]:v.target.value})},m=async v=>{if(v.preventDefault(),o(""),!e.name||!e.email||!e.password||!e.confirmPassword||!e.startDate){o("Lütfen tüm alanları doldurun.");return}if(e.name.length<2){o("Ad soyad en az 2 karakter olmalıdır.");return}if(!e.email.includes("@")){o("Geçerli bir email adresi girin.");return}if(e.password!==e.confirmPassword){o("Şifreler eşleşmiyor.");return}if(e.password.length<6){o("Şifre en az 6 karakter olmalıdır.");return}const g=await l(e.name,e.email,e.password,e.startDate);g.success||o(g.error||"Kayıt başarısız. Bu email adresi zaten kullanılıyor olabilir.")};return u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Kayıt Ol"}),u.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Yeni hesap oluşturun"})]}),u.jsxs("form",{onSubmit:m,className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ad Soyad"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(cu,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"name",name:"name",type:"text",value:e.name,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Adınız ve soyadınız",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-posta Adresi"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(d1,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"email",name:"email",type:"email",value:e.email,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"ornek@email.com",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"startDate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İşe Başlama Tarihi"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(rn,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"startDate",name:"startDate",type:"date",value:e.startDate,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Şifre"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Ch,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"password",name:"password",type:r?"text":"password",value:e.password,onChange:d,className:"block w-full pl-10 pr-10 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"En az 6 karakter",required:!0}),u.jsx("button",{type:"button",onClick:()=>s(!r),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:r?u.jsx(u1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"}):u.jsx(c1,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Şifre Tekrar"}),u.jsxs("div",{className:"relative",children:[u.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u.jsx(Ch,{className:"h-5 w-5 text-gray-400"})}),u.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",value:e.confirmPassword,onChange:d,className:"block w-full pl-10 pr-3 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Şifrenizi tekrar girin",required:!0})]})]}),i&&u.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm bg-red-50 dark:bg-red-900/20 p-3 rounded-lg",children:i}),u.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 focus:ring-4 focus:ring-blue-200 dark:focus:ring-blue-800 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Kayıt oluşturuluyor...":"Kayıt Ol"})]}),u.jsx("div",{className:"mt-6 text-center",children:u.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Zaten hesabınız var mı?"," ",u.jsx("button",{onClick:t,className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300 font-medium transition-colors",children:"Giriş Yap"})]})})]})},eR=()=>{const{user:t,logout:e}=$t(),{isCollapsed:n}=Em();return u.jsx("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700 fixed top-0 left-0 right-0 z-30",children:u.jsxs("div",{className:"flex justify-between items-center h-16 px-4 sm:px-6 lg:px-8",children:[u.jsx("div",{className:"flex items-center",children:u.jsx("div",{className:"flex-shrink-0",children:u.jsx("h1",{className:`text-xl font-bold text-gray-900 dark:text-white transition-all duration-300 ${n?"md:ml-16":"md:ml-64"}`,children:"Maaş & Çalışma Takibi"})})}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",children:u.jsx(o1,{className:"h-5 w-5"})}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:u.jsx(cu,{className:"h-4 w-4 text-white"})}),u.jsxs("div",{className:"hidden md:block",children:[u.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t==null?void 0:t.name}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:t==null?void 0:t.email})]})]}),u.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-full transition-colors",title:"Çıkış Yap",children:u.jsx(WC,{className:"h-5 w-5"})})]})]})]})})},tR=({activeTab:t,onTabChange:e})=>{const{isCollapsed:n,toggleSidebar:r}=Em(),[s,i]=q.useState(!1),[o,l]=q.useState(window.innerWidth);q.useEffect(()=>{const m=()=>{l(window.innerWidth),window.innerWidth>=768&&i(!1)};return window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]);const c=[{id:"dashboard",label:"Anasayfa",icon:qC},{id:"salary",label:"Maaş Yönetimi",icon:Dn},{id:"overtime",label:"Fazla Mesai",icon:yn},{id:"calendar",label:"Takvim & Tatiller",icon:rn},{id:"leaves",label:"İzin Yönetimi",icon:HC},{id:"calculators",label:"Tazminat Hesapları",icon:Ju},{id:"reports",label:"Raporlar",icon:BC},{id:"settings",label:"Ayarlar",icon:QC}],d=()=>{i(!1)};return u.jsxs(u.Fragment,{children:[u.jsx("button",{className:"md:hidden fixed top-4 left-4 z-50 p-2 bg-white dark:bg-gray-800 rounded-lg shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",onClick:()=>i(!s),children:s?u.jsx(uy,{className:"h-6 w-6"}):u.jsx(GC,{className:"h-6 w-6"})}),u.jsxs("div",{className:`hidden md:block bg-white dark:bg-gray-900 shadow-lg h-full fixed top-0 left-0 transition-all duration-300 ease-in-out z-40 ${n?"w-16":"w-64"}`,children:[u.jsx("button",{onClick:r,className:"absolute -right-3 top-6 bg-white dark:bg-gray-800 rounded-full p-1 shadow-md hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors z-50",children:n?u.jsx(l1,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"}):u.jsx(a1,{className:"h-4 w-4 text-gray-600 dark:text-gray-400"})}),u.jsxs("div",{className:"h-16 flex items-center justify-center border-b border-gray-200 dark:border-gray-700",children:[!n&&u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"₺"})}),u.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mesai Takip"})]}),n&&u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"₺"})})]}),u.jsx("nav",{className:"mt-4 px-2",children:c.map(m=>{const v=m.icon,g=t===m.id;return u.jsxs("button",{onClick:()=>e(m.id),className:`w-full flex items-center px-3 py-3 text-sm font-medium rounded-lg transition-all duration-200 mb-1 group ${g?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-r-2 border-blue-700 dark:border-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,title:n?m.label:void 0,children:[u.jsx(v,{className:`h-5 w-5 ${n?"mx-auto":"mr-3"}`}),!n&&u.jsx("span",{className:"truncate",children:m.label}),n&&u.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-gray-800 dark:bg-gray-700 text-white dark:text-gray-200 text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:m.label})]},m.id)})})]}),s&&u.jsx("div",{className:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:d}),u.jsxs("div",{className:`md:hidden fixed top-0 left-0 h-full bg-white dark:bg-gray-900 shadow-lg z-50 transition-transform duration-300 ease-in-out ${s?"translate-x-0":"-translate-x-full"}`,style:{width:"280px"},children:[u.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center mr-3",children:u.jsx("span",{className:"text-white text-sm font-bold",children:"₺"})}),u.jsx("span",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Mesai Takip"})]}),u.jsx("button",{onClick:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:u.jsx(uy,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),u.jsx("nav",{className:"mt-4 px-4",children:c.map(m=>{const v=m.icon,g=t===m.id;return u.jsxs("button",{onClick:()=>{e(m.id),d()},className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors mb-1 ${g?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-r-2 border-blue-700 dark:border-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,children:[u.jsx(v,{className:"mr-3 h-5 w-5"}),u.jsx("span",{children:m.label})]},m.id)})})]})]})},Ya=({title:t,value:e,change:n,changeType:r="neutral",icon:s,iconColor:i})=>{const o={positive:"text-green-600 dark:text-green-400 bg-green-100 dark:bg-green-900/20",negative:"text-red-600 dark:text-red-400 bg-red-100 dark:bg-red-900/20",neutral:"text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-800"};return u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6 hover:shadow-md transition-shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:t}),u.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:e}),n&&u.jsx("p",{className:`text-xs font-medium px-2 py-1 rounded-full inline-block mt-2 ${o[r]}`,children:n})]}),u.jsx("div",{className:`p-3 rounded-lg ${i}`,children:u.jsx(s,{className:"h-6 w-6 text-white"})})]})})},nR=(t,e=0)=>{const n=t*.15,r=t*.00759,s=t*.14,i=t*.01,o=n+r+s+i+e;return Math.max(0,t-o)},rR=(t,e,n)=>{const r={normal:1.5,weekend:2,holiday:2};return t*e*r[n]},sR=(t,e,n=new Date().toISOString())=>{const r=new Date(e),s=new Date(n),i=Math.floor((s.getTime()-r.getTime())/(1e3*60*60*24)),o=i/365.25,l=t*o,c=l*.00759,d=l-c;return{grossAmount:l,stampTax:c,netAmount:d,workingDays:i}},iR=t=>{if(t.length!==4)throw new Error("Son 4 ayın maaş bilgisi gereklidir");const e=t.reduce((i,o)=>i+o,0)/4,n=e*.6,r=nR(n),s=n-r;return{grossAmount:n,stampTax:s,netAmount:r,averageSalary:e}},ee=t=>new Intl.NumberFormat("tr-TR",{style:"currency",currency:"TRY",minimumFractionDigits:2}).format(t),Rh=t=>new Intl.DateTimeFormat("tr-TR",{year:"numeric",month:"long",day:"numeric"}).format(new Date(t)),cy=()=>{const{settings:t}=xi(),{user:e}=$t(),{salaries:n,overtimes:r,leaves:s,holidays:i}=as(),o=y=>["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"].indexOf(y),l=n.filter(y=>y.userId===(e==null?void 0:e.id)),c=r.filter(y=>y.userId===(e==null?void 0:e.id)),d=s.filter(y=>y.userId===(e==null?void 0:e.id)),m=new Date,v=i.filter(y=>new Date(y.date)>m).sort((y,k)=>new Date(y.date).getTime()-new Date(k.date).getTime()).slice(0,3),T=(()=>{const y=new Date,k=y.getMonth(),I=y.getFullYear(),A=c.filter(ie=>{const Ce=new Date(ie.date);return Ce.getMonth()===k&&Ce.getFullYear()===I}),b=A.reduce((ie,Ce)=>ie+Ce.totalPayment,0),ue=d.filter(ie=>{const Ce=new Date(ie.startDate),Dt=new Date(ie.endDate);return Ce.getMonth()===k&&Ce.getFullYear()===I||Dt.getMonth()===k&&Dt.getFullYear()===I}).filter(ie=>ie.leaveType==="unpaid"&&ie.status==="approved").reduce((ie,Ce)=>ie+Ce.daysUsed,0),Se=parseFloat(t.salary.defaultNetSalary)||5e3,gt=Se/30,z=ue*gt,G=parseFloat(t.salary.besContribution)||0,K=Se-z+b,ve=K>5e4?.35:K>3e4?.3:K>15e3?.25:.2,de=K/(1-ve);return{baseSalary:Se,overtimePay:b,besContribution:G,grossSalary:de,netSalary:K,overtimeHours:A.reduce((ie,Ce)=>ie+Ce.hours,0),unpaidLeaveDays:ue,unpaidLeaveDeduction:z}})(),N=l[l.length-1],R=c.reduce((y,k)=>y+k.hours,0),O=c.reduce((y,k)=>y+k.totalPayment,0),w=d.filter(y=>y.status==="approved").reduce((y,k)=>y+k.daysUsed,0),P=(()=>{if(!(e!=null&&e.startDate))return 0;const y=new Date(e.startDate),I=new Date().getFullYear()-y.getFullYear();if(I<1)return 0;const A=parseInt(t.salary.annualLeaveEntitlement)||14;return I*A})()-w,D=()=>{const y=new Date,k=y.getMonth(),I=y.getFullYear(),A=l.find(G=>{const K=new Date(G.year,o(G.month),1);return K.getMonth()===k&&K.getFullYear()===I}),b=k===0?11:k-1,me=k===0?I-1:I,ue=l.find(G=>{const K=new Date(G.year,o(G.month),1);return K.getMonth()===b&&K.getFullYear()===me});if(!A||!ue)return{change:"Veri yok",changeType:"neutral"};const Se=A.netSalary,gt=ue.netSalary,z=(Se-gt)/gt*100;return{change:`${z>=0?"+":""}${z.toFixed(1)}% geçen aya göre`,changeType:z>=0?"positive":"negative"}},V=()=>{const y=new Date().getFullYear(),k=l.filter(ue=>ue.year===y),I=l.filter(ue=>ue.year===y-1);if(k.length===0||I.length===0)return{change:"Veri yok",changeType:"neutral"};const A=k.reduce((ue,Se)=>ue+Se.netSalary,0),b=I.reduce((ue,Se)=>ue+Se.netSalary,0),me=(A-b)/b*100;return{change:`${me>=0?"+":""}${me.toFixed(1)}% geçen yıla göre`,changeType:me>=0?"positive":"negative"}},x=D(),p=V();return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Anasayfa"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Maaş ve çalışma durumunuzun özeti"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Son güncellenme"}),u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date().toLocaleDateString("tr-TR")})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-700 dark:to-blue-800 rounded-xl shadow-sm p-6 text-white",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Dn,{className:"h-8 w-8 text-blue-200 mr-3"}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold",children:"Bu Ay Tahmini Maaş"}),u.jsx("p",{className:"text-blue-100",children:"Güncel ay için tahmini geliriniz"})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-3xl font-bold",children:ee(T.netSalary)}),u.jsx("p",{className:"text-blue-200 text-sm",children:"Net Maaş"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mt-6",children:[u.jsxs("div",{className:"bg-blue-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-blue-200 text-sm",children:"Taban Maaş"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.baseSalary)})]}),u.jsxs("div",{className:"bg-green-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-green-200 text-sm",children:"Fazla Mesai"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.overtimePay)}),u.jsxs("p",{className:"text-green-200 text-xs",children:[T.overtimeHours," saat"]})]}),T.unpaidLeaveDays>0&&u.jsxs("div",{className:"bg-red-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-red-200 text-sm",children:"Ücretsiz İzin"}),u.jsxs("p",{className:"text-xl font-semibold",children:["-",ee(T.unpaidLeaveDeduction)]}),u.jsxs("p",{className:"text-red-200 text-xs",children:[T.unpaidLeaveDays," gün"]})]}),u.jsxs("div",{className:"bg-purple-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-purple-200 text-sm",children:"BES Katkısı"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.besContribution)})]}),u.jsxs("div",{className:"bg-orange-500/20 rounded-lg p-4",children:[u.jsx("p",{className:"text-orange-200 text-sm",children:"Brüt Maaş"}),u.jsx("p",{className:"text-xl font-semibold",children:ee(T.grossSalary)})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[u.jsx(Ya,{title:"Bu Ayın Maaşı",value:ee((N==null?void 0:N.netSalary)||T.netSalary),change:x.change,changeType:x.changeType,icon:Dn,iconColor:"bg-blue-600"}),u.jsx(Ya,{title:"Toplam Fazla Mesai",value:`${R} saat`,change:ee(O),changeType:"positive",icon:yn,iconColor:"bg-green-600"}),u.jsx(Ya,{title:"Kullanılan İzin",value:`${w} gün`,change:`${P} gün kaldı`,changeType:"neutral",icon:rn,iconColor:"bg-orange-600"}),u.jsx(Ya,{title:"Yıllık Toplam",value:ee(l.reduce((y,k)=>y+k.netSalary,0)),change:p.change,changeType:p.changeType,icon:uu,iconColor:"bg-purple-600"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Son Maaş Ödemeleri"}),u.jsx("div",{className:"space-y-3",children:l.length>0?l.slice(-3).reverse().map(y=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[y.month," ",y.year]}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Net: ",ee(y.netSalary)]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400",children:ee(y.netSalary)}),y.bonus>0&&u.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:["+",ee(y.bonus)," ikramiye"]})]})]},y.id)):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Dn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz maaş verisi girilmemiş"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Maaş yönetimi bölümünden maaş verilerinizi girebilirsiniz"})]})})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Son Fazla Mesailer"}),u.jsx("div",{className:"space-y-3",children:c.length>0?c.slice(-3).reverse().map(y=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:new Date(y.date).toLocaleDateString("tr-TR")}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[y.hours," saat - ",y.overtimeType==="normal"?"Normal":y.overtimeType==="weekend"?"Hafta Sonu":"Tatil"]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400",children:ee(y.totalPayment)}),u.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[ee(y.hourlyRate),"/saat"]})]})]},y.id)):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(yn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz fazla mesai kaydı yok"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:"Fazla mesai bölümünden mesai kayıtlarınızı girebilirsiniz"})]})})]})]}),u.jsx("div",{className:"bg-gradient-to-r from-green-600 to-green-700 dark:from-green-700 dark:to-green-800 rounded-xl shadow-sm p-6 text-white",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Yaklaşan Tatiller"}),v.length>0?u.jsx("div",{className:"space-y-2",children:v.map((y,k)=>u.jsxs("p",{className:"text-green-100",children:[k===0?"Bir sonraki tatil: ":`${k+1}. `,u.jsxs("span",{className:"font-medium",children:[new Date(y.date).toLocaleDateString("tr-TR")," - ",y.name]})]},y.id))}):u.jsx("p",{className:"text-green-100",children:u.jsx("span",{className:"font-medium",children:"Henüz tatil eklenmemiş"})})]}),u.jsx(rn,{className:"h-12 w-12 text-green-200"})]})})]})},oR=()=>{const{salaries:t,leaves:e,addSalary:n,deleteSalary:r}=as(),{user:s}=$t(),{settings:i}=xi(),[o,l]=q.useState(!1),[c,d]=q.useState(!1);q.useState(null);const[m,v]=q.useState("24457"),[g,T]=q.useState(i.salary.besContribution||"500"),[N,R]=q.useState({month:"Ocak",year:2025,netSalary:"",bonus:"",besDeduction:i.salary.besContribution||"500"}),O=t.filter(E=>E.userId===(s==null?void 0:s.id)),w=()=>{const E=parseFloat(m),S=parseFloat(g),P=new Date,D=P.getMonth(),V=P.getFullYear(),y=e.filter(b=>b.userId===(s==null?void 0:s.id)).filter(b=>{const me=new Date(b.startDate),ue=new Date(b.endDate);return me.getMonth()===D&&me.getFullYear()===V||ue.getMonth()===D&&ue.getFullYear()===V}).filter(b=>b.leaveType==="unpaid"&&b.status==="approved").reduce((b,me)=>b+me.daysUsed,0),k=E/30,I=y*k,A=E-I;return{gross:(A+S)/.75,net:A,unpaidLeaveDays:y,unpaidLeaveDeduction:I}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Maaş Yönetimi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Maaş bilgilerinizi yönetin ve hesaplayın"})]}),u.jsxs("div",{className:"flex space-x-3",children:[u.jsxs("button",{onClick:()=>d(!c),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[u.jsx(Ju,{className:"h-4 w-4 mr-2"}),"Brüt/Net Hesapla"]}),u.jsxs("button",{onClick:()=>l(!o),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Zu,{className:"h-4 w-4 mr-2"}),"Maaş Ekle"]})]})]}),c&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Net/Brüt Maaş Hesaplayıcı"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Net Maaş (₺)"}),u.jsx("input",{type:"number",value:m,onChange:E=>v(E.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"24457"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"BES Kesintisi (₺)"}),u.jsx("input",{type:"number",value:g,onChange:E=>T(E.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:i.salary.besContribution||"500"})]}),u.jsx("div",{className:"flex items-end",children:u.jsxs("div",{className:"w-full p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[u.jsx("p",{className:"text-sm text-green-700 dark:text-green-300 font-medium",children:"Brüt Maaş"}),u.jsx("p",{className:"text-xl font-bold text-green-800 dark:text-green-200",children:ee(w().gross)})]})})]}),w().unpaidLeaveDays>0&&u.jsx("div",{className:"mt-4 p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-red-700 dark:text-red-300",children:"Ücretsiz İzin Kesintisi"}),u.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400",children:[w().unpaidLeaveDays," gün ücretsiz izin = -",ee(w().unpaidLeaveDeduction)]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 font-medium",children:"Düzeltilmiş Net Maaş"}),u.jsx("p",{className:"text-lg font-bold text-red-800 dark:text-red-200",children:ee(w().net)})]})]})})]}),o&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni Maaş Bilgisi Ekle"}),u.jsxs("form",{onSubmit:E=>{if(E.preventDefault(),!s)return;const S=parseFloat(N.netSalary),P=parseFloat(N.besDeduction),D=(S+P)/.75,V={userId:s.id,month:N.month,year:N.year,netSalary:S,grossSalary:D,bonus:parseFloat(N.bonus)||0,besDeduction:P};n(V),l(!1),R({month:"Ocak",year:2025,netSalary:"",bonus:"",besDeduction:i.salary.besContribution||"500"})},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ay"}),u.jsxs("select",{value:N.month,onChange:E=>R({...N,month:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"Ocak",children:"Ocak"}),u.jsx("option",{value:"Şubat",children:"Şubat"}),u.jsx("option",{value:"Mart",children:"Mart"}),u.jsx("option",{value:"Nisan",children:"Nisan"}),u.jsx("option",{value:"Mayıs",children:"Mayıs"}),u.jsx("option",{value:"Haziran",children:"Haziran"}),u.jsx("option",{value:"Temmuz",children:"Temmuz"}),u.jsx("option",{value:"Ağustos",children:"Ağustos"}),u.jsx("option",{value:"Eylül",children:"Eylül"}),u.jsx("option",{value:"Ekim",children:"Ekim"}),u.jsx("option",{value:"Kasım",children:"Kasım"}),u.jsx("option",{value:"Aralık",children:"Aralık"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yıl"}),u.jsx("input",{type:"number",value:N.year,onChange:E=>R({...N,year:parseInt(E.target.value)}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",min:"2020",max:"2030"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Net Maaş (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:N.netSalary,onChange:E=>R({...N,netSalary:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"24457",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İkramiye (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:N.bonus,onChange:E=>R({...N,bonus:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"0"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"BES Kesintisi (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:N.besDeduction,onChange:E=>R({...N,besDeduction:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:i.salary.besContribution||"500"})]}),u.jsxs("div",{className:"md:col-span-2 lg:col-span-3 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kaydet"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Maaş Geçmişi"}),u.jsx("div",{className:"flex items-center space-x-4",children:u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(Dn,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",ee(O.reduce((E,S)=>E+S.netSalary,0))]})]})})]}),O.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Dönem"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Net Maaş"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Brüt Maaş"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"İkramiye"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"BES"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"İşlemler"})]})}),u.jsx("tbody",{children:O.map(E=>u.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[u.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-white",children:[E.month," ",E.year]}),u.jsx("td",{className:"py-3 px-4 font-semibold text-green-600 dark:text-green-400",children:ee(E.netSalary)}),u.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:ee(E.grossSalary)}),u.jsx("td",{className:"py-3 px-4 text-blue-600 dark:text-blue-400",children:E.bonus>0?ee(E.bonus):"-"}),u.jsx("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:ee(E.besDeduction)}),u.jsx("td",{className:"py-3 px-4",children:u.jsx("button",{onClick:()=>r(E.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(ec,{className:"h-4 w-4"})})})]},E.id))})]})}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(Dn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz maaş verisi girilmemiş"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "Maaş Ekle" butonunu kullanarak maaş verilerinizi girebilirsiniz'})]})]})]})},aR=()=>{const{overtimes:t,addOvertime:e,deleteOvertime:n}=as(),{user:r}=$t(),{settings:s}=xi(),[i,o]=q.useState(!1);q.useState(null);const[l,c]=q.useState({date:"",hours:"",overtimeType:"normal",hourlyRate:s.salary.defaultHourlyRate||"150.00"}),d=t.filter(T=>T.userId===(r==null?void 0:r.id)),m=T=>{if(T.preventDefault(),!r)return;const N=rR(parseFloat(l.hours),parseFloat(l.hourlyRate),l.overtimeType),R={userId:r.id,date:l.date,hours:parseFloat(l.hours),overtimeType:l.overtimeType,hourlyRate:parseFloat(l.hourlyRate),totalPayment:N};e(R),o(!1),c({date:"",hours:"",overtimeType:"normal",hourlyRate:s.salary.defaultHourlyRate||"150.00"})},v=T=>({normal:"Normal Gün",weekend:"Hafta Sonu",holiday:"Resmi Tatil"})[T],g=T=>({normal:"1.5x",weekend:"2.0x",holiday:"2.0x"})[T];return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Fazla Mesai Takibi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Fazla mesai saatlerinizi kaydedin ve takip edin"})]}),u.jsxs("button",{onClick:()=>o(!i),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Zu,{className:"h-4 w-4 mr-2"}),"Mesai Ekle"]})]}),i&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni Fazla Mesai Ekle"}),u.jsxs("form",{onSubmit:m,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tarih"}),u.jsx("input",{type:"date",value:l.date,onChange:T=>c({...l,date:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Saat"}),u.jsx("input",{type:"number",step:"0.5",value:l.hours,onChange:T=>c({...l,hours:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"8.0",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mesai Türü"}),u.jsxs("select",{value:l.overtimeType,onChange:T=>c({...l,overtimeType:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"normal",children:"Normal Gün (1.5x)"}),u.jsx("option",{value:"weekend",children:"Hafta Sonu (2.0x)"}),u.jsx("option",{value:"holiday",children:"Resmi Tatil (2.0x)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Saatlik Ücret"}),u.jsx("input",{type:"number",step:"0.01",value:l.hourlyRate,onChange:T=>c({...l,hourlyRate:T.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:s.salary.defaultHourlyRate||"133.33"})]}),u.jsxs("div",{className:"md:col-span-4 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kaydet"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Fazla Mesai Geçmişi"}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(yn,{className:"h-5 w-5 text-blue-600"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",d.reduce((T,N)=>T+N.hours,0)," saat"]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx(rn,{className:"h-5 w-5 text-green-600"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Toplam: ",d.reduce((T,N)=>T+N.totalPayment,0).toLocaleString("tr-TR")," ₺"]})]})]})]}),d.length>0?u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Tarih"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Saat"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Tür"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Saatlik Ücret"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"Toplam"}),u.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900 dark:text-white",children:"İşlemler"})]})}),u.jsx("tbody",{children:d.map(T=>u.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700",children:[u.jsx("td",{className:"py-3 px-4",children:u.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:new Date(T.date).toLocaleDateString("tr-TR")})}),u.jsxs("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-white",children:[T.hours," saat"]}),u.jsx("td",{className:"py-3 px-4",children:u.jsxs("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${T.overtimeType==="normal"?"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400":T.overtimeType==="weekend"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400"}`,children:[v(T.overtimeType)," (",g(T.overtimeType),")"]})}),u.jsxs("td",{className:"py-3 px-4 text-gray-700 dark:text-gray-300",children:[T.hourlyRate.toLocaleString("tr-TR")," ₺/saat"]}),u.jsxs("td",{className:"py-3 px-4 font-semibold text-green-600 dark:text-green-400",children:[T.totalPayment.toLocaleString("tr-TR")," ₺"]}),u.jsx("td",{className:"py-3 px-4",children:u.jsx("button",{onClick:()=>n(T.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(ec,{className:"h-4 w-4"})})})]},T.id))})]})}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(yn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz fazla mesai kaydı yok"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "Mesai Ekle" butonunu kullanarak fazla mesai kaydı oluşturabilirsiniz'})]})]})]})},lR=()=>{const{holidays:t,addHoliday:e,deleteHoliday:n}=as(),{overtimes:r,leaves:s}=as(),{user:i}=$t(),[o,l]=q.useState(new Date),[c,d]=q.useState(!1);q.useState(null);const[m,v]=q.useState({date:"",name:"",isRecurring:!1}),g=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],T=["Pzt","Sal","Çar","Per","Cum","Cmt","Paz"],N=p=>{const y=p.getFullYear(),k=p.getMonth(),I=new Date(y,k,1),b=new Date(y,k+1,0).getDate(),me=(I.getDay()+6)%7,ue=[];for(let Se=0;Se<me;Se++)ue.push(null);for(let Se=1;Se<=b;Se++)ue.push(new Date(y,k,Se));return ue},R=p=>{if(!p)return!1;const y=p.toISOString().split("T")[0];return t.some(k=>k.date===y)},O=p=>{if(!p)return"";const y=p.toISOString().split("T")[0],k=t.find(I=>I.date===y);return(k==null?void 0:k.name)||""},w=p=>{if(!p)return!1;const y=p.getDay();return y===0||y===6},E=p=>{l(y=>{const k=new Date(y);return p==="prev"?k.setMonth(y.getMonth()-1):k.setMonth(y.getMonth()+1),k})},S=p=>{p.preventDefault(),e(m),d(!1),v({date:"",name:"",isRecurring:!1})},P=r.filter(p=>p.userId===(i==null?void 0:i.id)),D=s.filter(p=>p.userId===(i==null?void 0:i.id)),V=p=>{if(!p)return{holiday:null,leave:null,overtime:null};const y=p.toISOString().split("T")[0],k=t.find(b=>b.date===y),I=D.find(b=>{const me=new Date(b.startDate),ue=new Date(b.endDate);return p>=me&&p<=ue}),A=P.find(b=>b.date===y);return{holiday:k,leave:I,overtime:A}},x=N(o);return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Takvim & Tatiller"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Resmi tatilleri görüntüleyin ve yönetin"})]}),u.jsxs("button",{onClick:()=>d(!c),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Zu,{className:"h-4 w-4 mr-2"}),"Tatil Ekle"]})]}),c&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni Tatil Ekle"}),u.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tarih"}),u.jsx("input",{type:"date",value:m.date,onChange:p=>v({...m,date:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tatil Adı"}),u.jsx("input",{type:"text",value:m.name,onChange:p=>v({...m,name:p.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"Örn: Kurban Bayramı",required:!0})]}),u.jsx("div",{className:"flex items-end",children:u.jsxs("label",{className:"flex items-center",children:[u.jsx("input",{type:"checkbox",checked:m.isRecurring,onChange:p=>v({...m,isRecurring:p.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),u.jsx("span",{className:"ml-2 text-sm text-gray-700 dark:text-gray-300",children:"Her yıl tekrar et"})]})}),u.jsxs("div",{className:"md:col-span-3 flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Kaydet"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-6",children:[u.jsx("button",{onClick:()=>E("prev"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:u.jsx(a1,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),u.jsxs("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[g[o.getMonth()]," ",o.getFullYear()]}),u.jsx("button",{onClick:()=>E("next"),className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:u.jsx(l1,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})})]}),u.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:T.map(p=>u.jsx("div",{className:"p-3 text-center text-sm font-medium text-gray-500 dark:text-gray-400",children:p},p))}),u.jsx("div",{className:"grid grid-cols-7 gap-1",children:x.map((p,y)=>{const k=V(p);return u.jsx("div",{className:`min-h-[80px] p-2 border border-gray-100 dark:border-gray-600 rounded-lg ${p?"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600":"bg-gray-50 dark:bg-gray-800"} ${R(p)?"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800":""} ${w(p)&&!R(p)?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":""}`,children:p&&u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`text-sm font-medium ${R(p)?"text-red-700 dark:text-red-400":w(p)?"text-blue-700 dark:text-blue-400":"text-gray-900 dark:text-white"}`,children:p.getDate()}),R(p)&&u.jsx("div",{className:"text-xs text-red-600 dark:text-red-400 mt-1 leading-tight",children:O(p)}),u.jsxs("div",{className:"flex flex-col gap-1 mt-1",children:[k.holiday&&u.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mx-auto",title:k.holiday.name}),k.leave&&u.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mx-auto",title:"İzin"}),k.overtime&&u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mx-auto",title:"Mesai"})]})]})},y)})}),u.jsxs("div",{className:"mt-6 flex items-center justify-center space-x-6 text-sm",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-4 h-4 bg-red-100 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resmi Tatil"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-4 h-4 bg-blue-100 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Hafta Sonu"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-4 h-4 bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Çalışma Günü"})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),u.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Mesai Günü"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx(rn,{className:"h-6 w-6 text-blue-600 mr-3"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Tatiller"})]}),t.length>0?u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(p=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:p.name}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:Rh(p.date)})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[p.isRecurring&&u.jsx("span",{className:"text-xs bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400 px-2 py-1 rounded-full",children:"Yıllık"}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${new Date(p.date)>new Date?"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400":"bg-gray-100 dark:bg-gray-600 text-gray-800 dark:text-gray-300"}`,children:new Date(p.date)>new Date?"Yaklaşan":"Geçmiş"}),u.jsx("button",{onClick:()=>n(p.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(ec,{className:"h-4 w-4"})})]})]},p.id))}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(rn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz tatil eklenmemiş"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "Tatil Ekle" butonunu kullanarak tatil ekleyebilirsiniz'})]})]})]})},uR=()=>{const{leaves:t,addLeave:e,deleteLeave:n}=as(),{user:r}=$t(),{settings:s}=xi(),[i,o]=q.useState(!1);q.useState(null);const[l,c]=q.useState({startDate:"",endDate:"",reason:"",leaveType:"annual"}),d=t.filter(D=>D.userId===(r==null?void 0:r.id)),m=(D,V)=>{if(!D||!V)return 0;const x=new Date(D),p=new Date(V),y=Math.abs(p.getTime()-x.getTime());return Math.ceil(y/(1e3*60*60*24))+1},g=(()=>{if(!(r!=null&&r.startDate))return 0;const D=new Date(r.startDate),V=new Date,x=V.getFullYear()-D.getFullYear();if(V.getMonth()-D.getMonth(),x<1)return 0;const p=parseInt(s.salary.annualLeaveEntitlement)||14;return x*p})(),T=d.filter(D=>(D.leaveType||"annual")==="annual").reduce((D,V)=>D+V.daysUsed,0),N=g-T,R=D=>{if(D.preventDefault(),!r)return;const V=m(l.startDate,l.endDate),x={userId:r.id,startDate:l.startDate,endDate:l.endDate,daysUsed:V,status:"approved",reason:l.reason,leaveType:l.leaveType};e(x),o(!1),c({startDate:"",endDate:"",reason:"",leaveType:"annual"})},O=D=>{switch(D){case"approved":return u.jsx(ly,{className:"h-5 w-5 text-green-600"});case"rejected":return u.jsx(XC,{className:"h-5 w-5 text-red-600"});default:return u.jsx(yn,{className:"h-5 w-5 text-yellow-600"})}},w=D=>{switch(D){case"approved":return"Onaylandı";case"rejected":return"Reddedildi";default:return"Beklemede"}},E=D=>{switch(D){case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},S=D=>{switch(D){case"paid":return"Ücretli İzin";case"unpaid":return"Ücretsiz İzin";case"annual":return"Yıllık İzin";case"maternity":return"Doğum İzni";case"bereavement":return"Ölüm İzni";case"administrative":return"İdari İzin";default:return"Diğer"}},P=D=>{switch(D){case"paid":return"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400";case"unpaid":return"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400";case"annual":return"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400";case"maternity":return"bg-pink-100 text-pink-800 dark:bg-pink-900/20 dark:text-pink-400";case"bereavement":return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400";case"administrative":return"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400";default:return"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"İzin Yönetimi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"İzin taleplerinizi yönetin ve takip edin"})]}),u.jsxs("button",{onClick:()=>o(!i),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Zu,{className:"h-4 w-4 mr-2"}),"İzin Talebi"]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(rn,{className:"h-8 w-8 text-blue-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Toplam İzin Hakkı"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[g," gün"]})]})]})}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(ly,{className:"h-8 w-8 text-green-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Kullanılan İzin"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[T," gün"]})]})]})}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(yn,{className:"h-8 w-8 text-orange-600 mr-3"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:"Kalan İzin"}),u.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[N," gün"]})]})]})})]}),g===0&&u.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:u.jsxs("div",{className:"flex",children:[u.jsx("div",{className:"flex-shrink-0",children:u.jsx(yn,{className:"h-5 w-5 text-yellow-400"})}),u.jsxs("div",{className:"ml-3",children:[u.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Yıllık İzin Hakkı"}),u.jsx("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:u.jsx("p",{children:"Henüz 1 yıllık çalışma sürenizi tamamlamadığınız için yıllık izin hakkınız bulunmamaktadır. İşe başlama tarihinizden itibaren 1 yıl geçtikten sonra yıllık izin talep edebilirsiniz."})})]})]})}),i&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Yeni İzin Talebi"}),u.jsxs("form",{onSubmit:R,className:"space-y-4",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Başlangıç Tarihi"}),u.jsx("input",{type:"date",value:l.startDate,onChange:D=>c({...l,startDate:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bitiş Tarihi"}),u.jsx("input",{type:"date",value:l.endDate,onChange:D=>c({...l,endDate:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İzin Türü"}),u.jsxs("select",{value:l.leaveType,onChange:D=>c({...l,leaveType:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",required:!0,children:[u.jsx("option",{value:"paid",children:"Ücretli İzin (Para Kesmez)"}),u.jsx("option",{value:"unpaid",children:"Ücretsiz İzin (Para Keser)"}),g>0&&u.jsx("option",{value:"annual",children:"Yıllık İzin (Para Kesmez)"}),u.jsx("option",{value:"maternity",children:"Doğum İzni (Para Kesmez)"}),u.jsx("option",{value:"bereavement",children:"Ölüm İzni (Para Kesmez)"}),u.jsx("option",{value:"administrative",children:"İdari İzin (Para Kesmez)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İzin Nedeni"}),u.jsx("textarea",{value:l.reason,onChange:D=>c({...l,reason:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",rows:3,placeholder:"İzin nedeninizi açıklayın...",required:!0})]}),u.jsxs("div",{className:"flex justify-end space-x-3",children:[u.jsx("button",{type:"button",onClick:()=>o(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"İptal"}),u.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Talep Et"})]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"İzin Geçmişi"}),d.length>0?u.jsx("div",{className:"space-y-4",children:d.map(D=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[O(D.status),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S(D.leaveType||"annual")}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[Rh(D.startDate)," - ",Rh(D.endDate)," (",D.daysUsed," gün)"]}),D.reason&&u.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:D.reason})]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${P(D.leaveType||"annual")}`,children:S(D.leaveType||"annual")}),u.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${E(D.status)}`,children:w(D.status)}),u.jsx("button",{onClick:()=>n(D.id),className:"text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",children:u.jsx(ec,{className:"h-4 w-4"})})]})]},D.id))}):u.jsxs("div",{className:"text-center py-8",children:[u.jsx(rn,{className:"h-12 w-12 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-2",children:"Henüz izin talebi bulunmuyor"}),u.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:'Yukarıdaki "İzin Talebi" butonunu kullanarak izin talep edebilirsiniz'})]})]})]})},cR=()=>{const{salaries:t,overtimes:e,leaves:n}=as(),{user:r}=$t();xi();const[s,i]=q.useState("2025"),[o,l]=q.useState("salary"),c=t.filter(w=>w.userId===(r==null?void 0:r.id)),d=e.filter(w=>w.userId===(r==null?void 0:r.id)),m=n.filter(w=>w.userId===(r==null?void 0:r.id)),v=()=>{const w=c.filter(A=>A.year.toString()===s),E=w.reduce((A,b)=>A+b.grossSalary,0),S=w.reduce((A,b)=>A+b.netSalary,0),P=w.reduce((A,b)=>A+b.bonus,0),V=m.filter(A=>new Date(A.startDate).getFullYear().toString()===s&&A.leaveType==="unpaid"&&A.status==="approved").reduce((A,b)=>A+b.daysUsed,0),x=S/(w.length*30)||0,p=V*x,y=S-p,k=E/w.length||0,I=y/w.length||0;return{totalGross:E,totalNet:y,totalBonus:P,avgGross:k,avgNet:I,monthCount:w.length,totalUnpaidLeaveDays:V,totalUnpaidLeaveDeduction:p}},g=()=>{const w=d.reduce((V,x)=>V+x.hours,0),E=d.reduce((V,x)=>V+x.totalPayment,0),S=d.filter(V=>V.overtimeType==="normal").reduce((V,x)=>V+x.hours,0),P=d.filter(V=>V.overtimeType==="weekend").reduce((V,x)=>V+x.hours,0),D=d.filter(V=>V.overtimeType==="holiday").reduce((V,x)=>V+x.hours,0);return{totalHours:w,totalPayment:E,normalHours:S,weekendHours:P,holidayHours:D,avgHourlyRate:E/w||0}},T=v(),N=g(),R=(()=>{const w=["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"];return w.map(E=>{const S=c.filter(x=>x.month===E&&x.year.toString()===s),P=d.filter(x=>{const p=new Date(x.date);return p.getMonth()===w.indexOf(E)&&p.getFullYear().toString()===s}),D=S.reduce((x,p)=>x+p.netSalary,0),V=P.reduce((x,p)=>x+p.totalPayment,0);return{month:E,salary:D,overtime:V,total:D+V}}).filter(E=>E.total>0)})(),O=w=>{console.log(`Exporting ${w} report for ${s}`),alert(`${w} raporu Excel formatında indiriliyor...`)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Raporlar ve Analiz"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Gelir ve çalışma verilerinizi analiz edin"})]}),u.jsxs("div",{className:"flex items-center space-x-3",children:[u.jsxs("select",{value:s,onChange:w=>i(w.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"2024",children:"2024"}),u.jsx("option",{value:"2025",children:"2025"}),u.jsx("option",{value:"2026",children:"2026"})]}),u.jsxs("button",{onClick:()=>O(o),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[u.jsx($C,{className:"h-4 w-4 mr-2"}),"Dışa Aktar"]})]})]}),u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsxs("button",{onClick:()=>l("salary"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="salary"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[u.jsx(Dn,{className:"h-4 w-4 mr-2 inline"}),"Maaş Raporu"]}),u.jsxs("button",{onClick:()=>l("overtime"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${o==="overtime"?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:[u.jsx(yn,{className:"h-4 w-4 mr-2 inline"}),"Fazla Mesai Raporu"]})]}),o==="salary"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Yıllık Toplam"}),u.jsx(Dn,{className:"h-6 w-6 text-blue-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(T.totalNet)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Net Gelir"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ortalama Aylık"}),u.jsx(uu,{className:"h-6 w-6 text-green-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(T.avgNet)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Net Ortalama"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Toplam İkramiye"}),u.jsx(rn,{className:"h-6 w-6 text-purple-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(T.totalBonus)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Yıllık İkramiye"})]}),T.totalUnpaidLeaveDays>0&&u.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-6 border border-red-200 dark:border-red-800",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-red-800 dark:text-red-200",children:"Ücretsiz İzin"}),u.jsx(rn,{className:"h-6 w-6 text-red-600"})]}),u.jsxs("p",{className:"text-3xl font-bold text-red-800 dark:text-red-200",children:["-",ee(T.totalUnpaidLeaveDeduction)]}),u.jsxs("p",{className:"text-sm text-red-600 dark:text-red-400 mt-2",children:[T.totalUnpaidLeaveDays," gün kesinti"]})]})]}),o==="overtime"&&u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Toplam Saat"}),u.jsx(yn,{className:"h-6 w-6 text-blue-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:N.totalHours}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Fazla Mesai Saati"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Toplam Kazanç"}),u.jsx(Dn,{className:"h-6 w-6 text-green-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(N.totalPayment)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Fazla Mesai Ücreti"})]}),u.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h4",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Ortalama Saatlik"}),u.jsx(uu,{className:"h-6 w-6 text-purple-600"})]}),u.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:ee(N.avgHourlyRate)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Saatlik Ücret"})]})]})]}),R.length>0&&u.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Aylık Gelir Trendi"}),u.jsx("div",{className:"space-y-3",children:R.map((w,E)=>u.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsx("div",{className:"w-12 text-sm font-medium text-gray-900 dark:text-white",children:w.month}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Maaş: ",ee(w.salary)]})]}),u.jsxs("div",{className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),u.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Fazla Mesai: ",ee(w.overtime)]})]})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("p",{className:"font-semibold text-gray-900 dark:text-white",children:ee(w.total)}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Toplam"})]})]},E))})]})]})},dR=()=>{const{user:t,updateUser:e}=$t(),{showToast:n}=VC(),{settings:r,updateSettings:s,updateAppearance:i}=xi(),[o,l]=q.useState("profile"),c=async w=>{w==="profile"?(await e({name:r.profile.name,email:r.profile.email,startDate:r.profile.startDate}),n("Profil ayarları kaydedildi!")):n(w==="notifications"?"Bildirim ayarları kaydedildi!":w==="salary"?"Maaş ayarları kaydedildi!":w==="appearance"?"Görünüm ayarları kaydedildi!":`${w} ayarları kaydedildi!`)},d=(w,E)=>{i({[w]:E})},m=[{id:"profile",label:"Profil Bilgileri",icon:cu},{id:"notifications",label:"Bildirimler",icon:o1},{id:"salary",label:"Maaş Ayarları",icon:Ju},{id:"appearance",label:"Görünüm",icon:KC},{id:"security",label:"Güvenlik",icon:YC}],v=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center space-x-4 mb-6",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center",children:u.jsx(cu,{className:"h-10 w-10 text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.profile.name}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:r.profile.position}),u.jsx("button",{className:"text-blue-600 hover:text-blue-700 text-sm font-medium mt-1",children:"Profil fotoğrafını değiştir"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ad Soyad"}),u.jsx("input",{type:"text",value:r.profile.name,onChange:w=>s("profile",{name:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"E-posta"}),u.jsx("input",{type:"email",value:r.profile.email,onChange:w=>s("profile",{email:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telefon"}),u.jsx("input",{type:"tel",value:r.profile.phone,onChange:w=>s("profile",{phone:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"+90 555 123 45 67"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Departman"}),u.jsxs("select",{value:r.profile.department,onChange:w=>s("profile",{department:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{children:"Yazılım Geliştirme"}),u.jsx("option",{children:"İnsan Kaynakları"}),u.jsx("option",{children:"Pazarlama"}),u.jsx("option",{children:"Satış"}),u.jsx("option",{children:"Muhasebe"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pozisyon"}),u.jsx("input",{type:"text",value:r.profile.position,onChange:w=>s("profile",{position:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"İşe Başlama Tarihi"}),u.jsx("input",{type:"date",value:r.profile.startDate,onChange:w=>s("profile",{startDate:w.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("profile"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]}),g=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Bildirim Tercihleri"}),u.jsx("div",{className:"space-y-4",children:Object.entries(r.notifications).map(([w,E])=>u.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsxs("div",{children:[u.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:[w==="salaryReminder"&&"Maaş Günü Hatırlatıcısı",w==="overtimeApproval"&&"Fazla Mesai Onayları",w==="leaveStatus"&&"İzin Durumu Güncellemeleri",w==="holidayReminder"&&"Tatil Hatırlatıcıları",w==="emailNotifications"&&"E-posta Bildirimleri",w==="pushNotifications"&&"Push Bildirimleri"]}),u.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[w==="salaryReminder"&&"Maaş ödeme günü yaklaştığında bildirim al",w==="overtimeApproval"&&"Fazla mesai onaylandığında bildirim al",w==="leaveStatus"&&"İzin talebinizin durumu değiştiğinde bildirim al",w==="holidayReminder"&&"Yaklaşan resmi tatiller için bildirim al",w==="emailNotifications"&&"Tüm bildirimleri e-posta ile al",w==="pushNotifications"&&"Tarayıcı push bildirimleri"]})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:E,onChange:S=>s("notifications",{[w]:S.target.checked}),className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]},w))})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("notifications"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]}),T=()=>{const w=(P,D,V)=>{const x=parseFloat(P)||0,p=parseFloat(D)||8,y=parseFloat(V)||5;if(x===0||p===0||y===0)return"0";const k=p*30;return(x/k).toFixed(2)},E=P=>{const D=w(P,r.salary.workingHoursPerDay,r.salary.workingDaysPerWeek);s("salary",{defaultNetSalary:P,defaultHourlyRate:D})},S=(P,D)=>{const V={[P]:D},x=w(r.salary.defaultNetSalary,P==="workingHoursPerDay"?D:r.salary.workingHoursPerDay,P==="workingDaysPerWeek"?D:r.salary.workingDaysPerWeek);V.defaultHourlyRate=x,s("salary",V)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Maaş ve Çalışma Ayarları"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Varsayılan Net Maaş (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:r.salary.defaultNetSalary,onChange:P=>E(P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"5000.00"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Bu değer değiştiğinde saatlik ücret otomatik hesaplanır"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hesaplanan Saatlik Ücret (₺)"}),u.jsx("input",{type:"number",step:"0.01",value:r.salary.defaultHourlyRate,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-gray-900 dark:text-white cursor-not-allowed"}),u.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Otomatik hesaplanır"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Para Birimi"}),u.jsxs("select",{value:r.salary.currency,onChange:P=>s("salary",{currency:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"TRY",children:"Türk Lirası (₺)"}),u.jsx("option",{value:"USD",children:"Amerikan Doları ($)"}),u.jsx("option",{value:"EUR",children:"Euro (€)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Günlük Çalışma Saati"}),u.jsx("input",{type:"number",value:r.salary.workingHoursPerDay,onChange:P=>S("workingHoursPerDay",P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Haftalık Çalışma Günü"}),u.jsx("input",{type:"number",value:r.salary.workingDaysPerWeek,onChange:P=>S("workingDaysPerWeek",P.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Yıllık İzin Hakkı (Gün)"}),u.jsx("input",{type:"number",value:r.salary.annualLeaveEntitlement,onChange:P=>s("salary",{annualLeaveEntitlement:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"BES Katkısı (₺)"}),u.jsx("input",{type:"number",value:r.salary.besContribution,onChange:P=>s("salary",{besContribution:P.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("salary"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]})},N=()=>u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Görünüm ve Dil Ayarları"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tema"}),u.jsxs("select",{value:r.appearance.theme,onChange:w=>d("theme",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"light",children:"Açık Tema"}),u.jsx("option",{value:"dark",children:"Koyu Tema"}),u.jsx("option",{value:"auto",children:"Sistem Ayarı"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dil"}),u.jsxs("select",{value:r.appearance.language,onChange:w=>d("language",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"tr",children:"Türkçe"}),u.jsx("option",{value:"en",children:"English"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tarih Formatı"}),u.jsxs("select",{value:r.appearance.dateFormat,onChange:w=>d("dateFormat",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),u.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),u.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sayı Formatı"}),u.jsxs("select",{value:r.appearance.numberFormat,onChange:w=>d("numberFormat",w.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[u.jsx("option",{value:"tr-TR",children:"Türkiye (1.234,56)"}),u.jsx("option",{value:"en-US",children:"ABD (1,234.56)"})]})]})]})]}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("button",{onClick:()=>c("appearance"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[u.jsx(Qa,{className:"h-4 w-4 mr-2"}),"Kaydet"]})})]}),R=()=>u.jsx("div",{className:"space-y-6",children:u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Güvenlik Ayarları"}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Şifre Değiştir"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Hesabınızın güvenliği için düzenli olarak şifrenizi değiştirin."}),u.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Şifre Değiştir"})]}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"İki Faktörlü Kimlik Doğrulama"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Hesabınıza ek güvenlik katmanı ekleyin."}),u.jsx("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:"Etkinleştir"})]}),u.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[u.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Aktif Oturumlar"}),u.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Hesabınıza bağlı aktif oturumları görüntüleyin ve yönetin."}),u.jsx("button",{className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Oturumları Görüntüle"})]}),u.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[u.jsx("h4",{className:"font-medium text-red-900 dark:text-red-100 mb-2",children:"Hesabı Sil"}),u.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Hesabınızı kalıcı olarak silmek istiyorsanız bu işlemi kullanın. Bu işlem geri alınamaz."}),u.jsx("button",{className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Hesabı Sil"})]})]})]})}),O=()=>{switch(o){case"profile":return v();case"notifications":return g();case"salary":return T();case"appearance":return N();case"security":return R();default:return v()}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Ayarlar"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Hesap ve uygulama ayarlarınızı yönetin"})]}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u.jsx("div",{className:"lg:w-1/4",children:u.jsx("nav",{className:"space-y-1",children:m.map(w=>{const E=w.icon;return u.jsxs("button",{onClick:()=>l(w.id),className:`w-full flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${o===w.id?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300 border-r-2 border-blue-700 dark:border-blue-300":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-800 hover:text-gray-900 dark:hover:text-white"}`,children:[u.jsx(E,{className:"mr-3 h-5 w-5"}),w.label]},w.id)})})}),u.jsx("div",{className:"lg:w-3/4",children:u.jsx("div",{className:"bg-white dark:bg-gray-900 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:O()})})]})]})},hR=()=>{const[t,e]=q.useState({grossSalary:"30000",startDate:"2023-01-15",endDate:new Date().toISOString().split("T")[0]}),[n,r]=q.useState({march:"30000",april:"30000",may:"30000",june:"30000"}),[s,i]=q.useState(null),[o,l]=q.useState(null),c=()=>{const m=sR(parseFloat(t.grossSalary),t.startDate,t.endDate);i(m)},d=()=>{const m=[parseFloat(n.march),parseFloat(n.april),parseFloat(n.may),parseFloat(n.june)],v=iR(m);l(v)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tazminat Hesaplayıcıları"}),u.jsx("p",{className:"text-gray-600",children:"Kıdem ve işsizlik maaşı hesaplamalarınızı yapın"})]}),u.jsx(Ju,{className:"h-8 w-8 text-blue-600"})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx(uu,{className:"h-6 w-6 text-green-600 mr-3"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Kıdem Tazminatı Hesaplayıcı"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Son Brüt Maaş (₺)"}),u.jsx("input",{type:"number",value:t.grossSalary,onChange:m=>e({...t,grossSalary:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İşe Başlama Tarihi"}),u.jsx("input",{type:"date",value:t.startDate,onChange:m=>e({...t,startDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"İşten Ayrılma Tarihi"}),u.jsx("input",{type:"date",value:t.endDate,onChange:m=>e({...t,endDate:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500"})]}),u.jsx("button",{onClick:c,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Kıdem Tazminatını Hesapla"}),s&&u.jsxs("div",{className:"mt-6 p-4 bg-green-50 rounded-lg border border-green-200",children:[u.jsx("h4",{className:"font-semibold text-green-800 mb-3",children:"Hesaplama Sonucu"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Çalışma Süresi:"}),u.jsxs("span",{className:"font-medium text-green-800",children:[Math.floor(s.workingDays/365.25)," yıl ",Math.floor(s.workingDays%365.25/30)," ay"]})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Brüt Kıdem Tazminatı:"}),u.jsx("span",{className:"font-medium text-green-800",children:ee(s.grossAmount)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-green-700",children:"Damga Vergisi:"}),u.jsxs("span",{className:"font-medium text-red-600",children:["-",ee(s.stampTax)]})]}),u.jsx("hr",{className:"border-green-300"}),u.jsxs("div",{className:"flex justify-between text-lg",children:[u.jsx("span",{className:"font-semibold text-green-800",children:"Net Kıdem Tazminatı:"}),u.jsx("span",{className:"font-bold text-green-800",children:ee(s.netAmount)})]})]})]})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[u.jsxs("div",{className:"flex items-center mb-6",children:[u.jsx(zC,{className:"h-6 w-6 text-blue-600 mr-3"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"İşsizlik Maaşı Hesaplayıcı"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsx("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-4",children:u.jsx("p",{className:"text-sm text-blue-700",children:"Son 4 ayın brüt maaş bilgilerini giriniz. İşsizlik maaşı bu ayların ortalamasının %60'ı olarak hesaplanır."})}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mart 2025 (₺)"}),u.jsx("input",{type:"number",value:n.march,onChange:m=>r({...n,march:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nisan 2025 (₺)"}),u.jsx("input",{type:"number",value:n.april,onChange:m=>r({...n,april:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mayıs 2025 (₺)"}),u.jsx("input",{type:"number",value:n.may,onChange:m=>r({...n,may:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Haziran 2025 (₺)"}),u.jsx("input",{type:"number",value:n.june,onChange:m=>r({...n,june:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"30000"})]})]}),u.jsx("button",{onClick:d,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"İşsizlik Maaşını Hesapla"}),o&&u.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[u.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Hesaplama Sonucu"}),u.jsxs("div",{className:"space-y-2 text-sm",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"4 Aylık Ortalama:"}),u.jsx("span",{className:"font-medium text-blue-800",children:ee(o.averageSalary)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"İşsizlik Maaşı (%60):"}),u.jsx("span",{className:"font-medium text-blue-800",children:ee(o.grossAmount)})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-blue-700",children:"Vergiler ve Kesintiler:"}),u.jsxs("span",{className:"font-medium text-red-600",children:["-",ee(o.stampTax)]})]}),u.jsx("hr",{className:"border-blue-300"}),u.jsxs("div",{className:"flex justify-between text-lg",children:[u.jsx("span",{className:"font-semibold text-blue-800",children:"Net İşsizlik Maaşı:"}),u.jsx("span",{className:"font-bold text-blue-800",children:ee(o.netAmount)})]})]}),u.jsx("div",{className:"mt-3 p-3 bg-yellow-50 rounded border border-yellow-200",children:u.jsxs("p",{className:"text-xs text-yellow-800",children:[u.jsx("strong",{children:"Not:"})," Bu hesaplama tahminidir. Gerçek işsizlik maaşı İŞKUR tarafından belirlenen kriterlere göre değişebilir."]})})]})]})]})]}),u.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 border border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Önemli Bilgiler"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Kıdem Tazminatı"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:"• En az 1 yıl çalışma şartı"}),u.jsx("li",{children:"• Damga vergisi %0.759 oranında"}),u.jsx("li",{children:"• Fesih sebebine göre değişir"}),u.jsx("li",{children:"• 2025 yılı tavanı güncellenecek"})]})]}),u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"İşsizlik Maaşı"}),u.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[u.jsx("li",{children:"• Son 4 ayın ortalamasının %60'ı"}),u.jsx("li",{children:"• En az 600 gün prim ödeme şartı"}),u.jsx("li",{children:"• Süre: 180-300 gün arası"}),u.jsx("li",{children:"• Alt ve üst limit uygulanır"})]})]})]})]})]})};console.log("=== FIREBASE CONNECTION TEST ===");console.log("Firebase app initialized:",TC);console.log("Firebase auth service:",At);console.log("Firebase firestore service:",Le);console.log("Window.firebase available:",window.firebase);console.log("Window.firebaseAuth available:",window.firebaseAuth);console.log("Window.firebaseDb available:",window.firebaseDb);console.log("Window.auth available:",window.auth);console.log("Window.db available:",window.db);const fR=async()=>{try{console.log("🧪 Testing Firebase connection...");const t=await At.signInAnonymously();console.log("✅ Firebase connection test successful:",t),await At.signOut(),console.log("✅ Firebase signout test successful")}catch(t){console.error("❌ Firebase connection test failed:",t)}};fR();console.log("🔍 Global scope test:");console.log("typeof window.firebase:",typeof window.firebase);console.log("typeof window.auth:",typeof window.auth);console.log("typeof window.db:",typeof window.db);console.log("=== END FIREBASE TEST ===");const mR=()=>{const[t,e]=q.useState(!0);return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"w-full max-w-md",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("span",{className:"text-white text-2xl font-bold",children:"₺"})}),u.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"Maaş ve Çalışma Takibi"}),u.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Maaşınızı, fazla mesainizi ve izinlerinizi kolayca yönetin"})]}),u.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8",children:t?u.jsx(JC,{onSwitchToRegister:()=>e(!1)}):u.jsx(ZC,{onSwitchToLogin:()=>e(!0)})})]})})},pR=()=>{const{user:t,isLoading:e}=$t(),{isCollapsed:n}=Em(),[r,s]=q.useState("dashboard");if(e)return u.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t)return u.jsx(mR,{});const i=()=>{switch(r){case"dashboard":return u.jsx(cy,{});case"salary":return u.jsx(oR,{});case"overtime":return u.jsx(aR,{});case"calendar":return u.jsx(lR,{});case"leaves":return u.jsx(uR,{});case"reports":return u.jsx(cR,{});case"settings":return u.jsx(dR,{});case"calculators":return u.jsx(hR,{});default:return u.jsx(cy,{})}};return u.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[u.jsx(eR,{}),u.jsxs("div",{className:"flex pt-16",children:[u.jsx(tR,{activeTab:r,onTabChange:s}),u.jsx("main",{className:`flex-1 p-6 transition-all duration-300 ease-in-out ${n?"md:ml-16":"md:ml-64"}`,children:i()})]})]})},gR=()=>u.jsx(LC,{children:u.jsx(OC,{children:u.jsx(pR,{})})});function yR(){return u.jsx(MC,{children:u.jsx(RC,{children:u.jsx(DC,{children:u.jsx(gR,{})})})})}console.log("🔍 Testing Firebase imports in main.tsx...");console.log("📦 Firebase modules loaded:",{initializeApp:ns,getAuth:Ru,getFirestore:qu});const h1={apiKey:"AIzaSyAwuGiCbhncNHERF9vOV1wV5QiA3RXdgPk",authDomain:"mesi-takip-web-v1.firebaseapp.com",projectId:"mesi-takip-web-v1",storageBucket:"mesi-takip-web-v1.firebasestorage.app",messagingSenderId:"1061767802586",appId:"1:1061767802586:web:edefb08963448c70b2bfe3",measurementId:"G-75T6X9CPSP"};console.log("⚙️ Firebase config:",h1);console.log("🚀 Initializing Firebase app...");let An;try{console.log("🚀 About to call initializeApp..."),console.log("🚀 initializeApp function:",typeof ns),An=ns(h1),console.log("✅ Firebase app initialized:",An),console.log("✅ App name:",An.name),console.log("✅ App options:",An.options)}catch(t){console.error("❌ Firebase app initialization failed:",t),console.error("❌ Error message:",t.message),console.error("❌ Error stack:",t.stack)}let zo,Bo;An?(console.log("🔐 Initializing Firebase Auth..."),zo=Ru(An),console.log("✅ Firebase Auth initialized:",zo),console.log("🗄️ Initializing Firestore..."),Bo=qu(An),console.log("✅ Firestore initialized:",Bo)):console.error("❌ Cannot initialize Firebase services - app is undefined");window.firebase=An;window.firebaseAuth=zo;window.firebaseDb=Bo;window.auth=zo;window.db=Bo;console.log("🔥 Firebase successfully bound to window object");console.log("🚀 Firebase initialized globally:",An);console.log("🚀 Firebase auth available:",zo);console.log("🚀 Firebase db available:",Bo);console.log("🚀 Window.firebase:",window.firebase);console.log("🚀 Window.auth:",window.auth);console.log("🚀 Window.db:",window.db);k_(document.getElementById("root")).render(u.jsx(q.StrictMode,{children:u.jsx(yR,{})}));
